{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the InvestSuite Integration API developer documentation. Glad you're integrating with InvestSuite! Before going further let's make sure you've come to the right place. These pages provide technical documentation to assist developers in working with our APIs. We assume you've determined with our specialists the type of integration you\u2019d like to set up and are ready to dive right in. If not and instead you would like to know more about our products, please get in touch with a team member or find out more on investsuite.com. And if you run in trouble or anything, just drop us a mail at api@investsuite.com and we will very quickly respond. About this API \u00b6 The InvestSuite API is an Open API 3.0 compliant API for developers to integrate with InvestSuite products and services. It is a REST API specifically designed for backend-to-backend integrations . Common use cases for the InvestSuite API are: Initiate accounts in the InvestSuite system Update portfolio holdings and transactions Retrieve portfolio statistics Info You are looking at version 1.9 of the InvestSuite API. As renewed insights arise it will be necessary to change and adjust some parts of the API. Still it is the intention of InvestSuite to not introduce breaking changes so that version upgrades will not affect your integrations. Instead of changes to existing endpoints and models, in future versions endpoints may be added and models extended. The InvestSuite API is in constant progress to give you a good developer experience and make integration as effortless as can be. If you have any ideas or comments please send them to api@investsuite.com . So\u2026 let\u2019s dive in. About InvestSuite \u00b6 InvestSuite provides wealthtech solutions to banks, brokers, wealth managers and other financial institutions in Europe, the Middle East, Asia and the Americas. Our suite of products consists of Portfolio Optimizer, StoryTeller, Robo Advisor and Self Investor, all world class digital investment solutions to serve your clients better. For more information, please visit www.investsuite.com .","title":"Introduction"},{"location":"#about-this-api","text":"The InvestSuite API is an Open API 3.0 compliant API for developers to integrate with InvestSuite products and services. It is a REST API specifically designed for backend-to-backend integrations . Common use cases for the InvestSuite API are: Initiate accounts in the InvestSuite system Update portfolio holdings and transactions Retrieve portfolio statistics Info You are looking at version 1.9 of the InvestSuite API. As renewed insights arise it will be necessary to change and adjust some parts of the API. Still it is the intention of InvestSuite to not introduce breaking changes so that version upgrades will not affect your integrations. Instead of changes to existing endpoints and models, in future versions endpoints may be added and models extended. The InvestSuite API is in constant progress to give you a good developer experience and make integration as effortless as can be. If you have any ideas or comments please send them to api@investsuite.com . So\u2026 let\u2019s dive in.","title":"About this API"},{"location":"#about-investsuite","text":"InvestSuite provides wealthtech solutions to banks, brokers, wealth managers and other financial institutions in Europe, the Middle East, Asia and the Americas. Our suite of products consists of Portfolio Optimizer, StoryTeller, Robo Advisor and Self Investor, all world class digital investment solutions to serve your clients better. For more information, please visit www.investsuite.com .","title":"About InvestSuite"},{"location":"changelog/","text":"Maintenance team \u00b6 The current and past members of the InvestSuite team. @lsorber @gidven @Lotte-Verheyden-IVS @LukV @woutervanranst @MelanieHoubrechts v9 (2022-06-13) \u00b6 Added how to register the cancellation of an order v8 (2022-02-21) \u00b6 Fixed technical issues 1/ with pymdownx.tabbed being broken and 2/ custom domain name being lost on every deploy v7 (2022-01-14) \u00b6 Add detailed instructions on Portfolio Optimizer v6 (2021-11-19) \u00b6 Add portfolio funding and cash withdrawal v6 (2021-11-19) \u00b6 Add Financial Data Service API documentation v5 (2021-10-19) \u00b6 Add draft Risk Profiler documentation Add cash transactions documentation Created mailbox api@investsuite.com Updated error codes v4 (2021-10-12) \u00b6 For InvestSuite API v1.9 Add Common scenarios: Portfolio synchronization v3 (2021-09-28) \u00b6 For InvestSuite API v1.8 Add Quick start section Add Common scenarios: Account initiation v2 (2021-06-24) \u00b6 For InvestSuite API v0.1.0 Add Introduction page Add Get started: authentication Add Release notes (this) v1 (2021-04-08) \u00b6 For InvestSuite API v0.1.0 Scaffolding InvestSuite API documentation Add \"Embedding\" article","title":"Release notes"},{"location":"changelog/#maintenance-team","text":"The current and past members of the InvestSuite team. @lsorber @gidven @Lotte-Verheyden-IVS @LukV @woutervanranst @MelanieHoubrechts","title":"Maintenance team"},{"location":"changelog/#v9-2022-06-13","text":"Added how to register the cancellation of an order","title":"v9 (2022-06-13)"},{"location":"changelog/#v8-2022-02-21","text":"Fixed technical issues 1/ with pymdownx.tabbed being broken and 2/ custom domain name being lost on every deploy","title":"v8 (2022-02-21)"},{"location":"changelog/#v7-2022-01-14","text":"Add detailed instructions on Portfolio Optimizer","title":"v7 (2022-01-14)"},{"location":"changelog/#v6-2021-11-19","text":"Add portfolio funding and cash withdrawal","title":"v6 (2021-11-19)"},{"location":"changelog/#v6-2021-11-19_1","text":"Add Financial Data Service API documentation","title":"v6 (2021-11-19)"},{"location":"changelog/#v5-2021-10-19","text":"Add draft Risk Profiler documentation Add cash transactions documentation Created mailbox api@investsuite.com Updated error codes","title":"v5 (2021-10-19)"},{"location":"changelog/#v4-2021-10-12","text":"For InvestSuite API v1.9 Add Common scenarios: Portfolio synchronization","title":"v4 (2021-10-12)"},{"location":"changelog/#v3-2021-09-28","text":"For InvestSuite API v1.8 Add Quick start section Add Common scenarios: Account initiation","title":"v3 (2021-09-28)"},{"location":"changelog/#v2-2021-06-24","text":"For InvestSuite API v0.1.0 Add Introduction page Add Get started: authentication Add Release notes (this)","title":"v2 (2021-06-24)"},{"location":"changelog/#v1-2021-04-08","text":"For InvestSuite API v0.1.0 Scaffolding InvestSuite API documentation Add \"Embedding\" article","title":"v1 (2021-04-08)"},{"location":"common_scenarios/account_initiation/","text":"Info Applicable to: Robo Advisor, Self Investor, StoryTeller Context \u00b6 To intiate an account two steps are required: create a user and create a portfolio. To create a user, register the user ID identifying the customer in your system. The InvestSuite API will then create a user in the system, storing this user ID and creating an InvestSuite ID that uniquely identifies the user in our system. Then use the InvestSuite ID that the API returns to create a portfolio with this user as owner. Create a user \u00b6 User objects serve two purposes. Firstly to grant access to one or more InvestSuite products i.e. StoryTeller, Robo Advisor, Self Investor or the Admin Console. Secondly to assign users as owners to one or more portfolios. To create a user a limited number of fields are required, i.e. a user ID and optionally the user's name. Later on, more data can be stored in the user objects, depending on the InvestSuite products that your customer will be using. Basic fields You can add the ID of that user in your system in the external_id field, also called the reference ID. Next to your user ID you can optionally register the first name and last name. Let\u2019s now create a user and then see why adding the user\u2019s first name and last name may be a good idea. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"external_id\": \"unique_external_entity_id\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\", }' https://api.sandbox.investsuite.com/users/ Field Description Data type Example Required external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in your system to identify this entity. string <= 64 characters unique_external_entity_id no first_name The first name of the user. string <= 128 characters Ashok no last_name The last name of the user. string <= 128 characters Kumar no Response body { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , } Now that you have successfully registered the user you can find that user in the InvestSuite Admin Console. Contact your representative or reach out to api@investsuite.com to get credentials to access the Admin Console. Having provided the user\u2019s name now comes in handy. What else: You can create logins for your customers for them to view and manage their portfolios. (Next) You can add the counter account for withdrawal instructions. You can change (\u201cpatch\u201d) fields . You can delete the user . You can search for users by Reference ID, the user\u2019s name etc. You can create a portfolio for the user. Create login \u00b6 InvestSuite prefers not to store personal data (PII) in the InvestSuite platform. Instead we merely demand an identifier to reference your client. However if you want to create credentials on the InvestSuite platform so that your user can log in to the platform, or in fact to the front-ends exposing the platform, you need to register the user\u2019s e-mail address and mobile number. HTTP curl POST /users/?create_idp_user=true HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"external_id\": \"unique_external_entity_id\", \\ \"first_name\": \"Ashok\", \\ \"last_name\": \"Kumar\", \\ \"email\": \"ashok.kumar@example.com\", \\ \"phone\": \"+123456789\" }' https://api.sandbox.investsuite.com/users/?create_idp_user = true By passing the e-mail address and phone number of your client you make InvestSuite register the user in the identify platform (IdP) linked to your configuration - which in most cases is Azure ADB2C. Since e-mail and phone number are required to identify your customer in the identify platform both fields are required to be unique. On top, these fields are write once . You cannot update them. Field Description Data type Example Required email The e-mail address of the user. Unique and write once. email ashok.kumar@example.com no phone The mobile phone number of the user in international format. Unique and write once. string (^\\+[1-9][0-9]{7,15}\\Z) +123456789 no When the user is registered in the IdP for a customer, that customer can then go through a process to obtain a password. This process takes place outside of InvestSuite and the bank and requires the user to access the identity platform immediately. Now, with the e-mail address and the password the user can authenticate against the IdP. When authentication is successful the IdP returns a JWT. You can then add the InvestSuite User ID in the JWT claims to interact with the API on behalf of that user, for instance going through risk profiling on the person\u2019s behalf, retrieving portfolio data, issuing buy or sell orders etc. Add a counter account \u00b6 You can optionally add a counter account during user creation; or afterwards by patching the user object. This is used to display to your customer the account that is funded in case of a withdrawal instruction. In some cases banks allow the customer to modify the counter account via its front-end. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/users/' \\ --header 'Content-Type: application/json' \\ -H \"Auhorization\" : \"{string}\" \\ --data-raw '{ \"external_id\": \"unique_external_entity_id\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\", \"email\": \"ashok.kumar@example.com\", \"phone\": \"+12345667\", \"counter_account\": { \"bank_account_number\": \"BE01234567891234\", \"bank_account_number_type\": \"IBAN\", \"bank_id\": \"IDQMIE2D\", \"bank_id_type\": \"BIC\" } }' Field Description Data type Example Required bank_account_number Account number of the user for withdrawal instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes bank_account_number_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no bank_id_type Bank identifier code type. string AnyOf(\"BIC\", \"ABA\") BIC no Create a portfolio \u00b6 With a InvestSuite User ID at hand you can create a portfolio for your customer. Let\u2019s first do that and then go over it line by line. HTTP curl POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , } }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"REAL_MONEY\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"base_currency\":\"USD\", \\ \"config\":{ \\ \"manager\":\"ROBO_ADVISOR_DISCRETIONARY\", \\ \"manager_version\":1 \\ \"manager_settings\": { \\ \"policy_id\":\"Y01EF46X9XB437JS4678X0K529C\", \\ } \\ }, \\ \"external_id\":\"your-bank-portfolio-1\", \\ \"money_type\":\"PAPER_MONEY\", \\ \"owned_by_user_id\":\"U01F5WYKRRXZHXT9S6FF1JZNJVZ\", \\ }' \\ https://api.sandbox.investsuite.com/portfolios/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } What is a portfolio to InvestSuite - An investment portfolio in the classical sense of the term is a collection of financial assets grouped with the aim of earning a profit. These assets are referred to as holdings. Alongside holdings, portfolio objects in the InvestSuite platform contain general info, for instance to display to the customer, and configuration settings to manage the portfolio. An example of general info is a portfolio name e.g. My Retirement Portfolio, examples of configuration settings are the active boolean to indicate that trading is allowed for a portfolio and the risk profile the customer had set for the portfolio. Field Description Data type Example Required name The display name of the portfolio set by the user. string <= 128 characters My Portfolio-1 yes owned_by_user_id The portfolio owner's user ID. This field is required firstly to get to the account of the owner for cash withdrawals, and secondly to group portfolios by owner. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes base_currency The portfolio's currency. string ^[A-Z]{3}\\Z USD yes money_type Defines whether this is a 'virtual' portfolio or not. In a virtual portfolio buying and selling decisions are simulated, rather than placed as actual orders through a broker. ! Write once enum(\"REAL_MONEY\", \"PAPER_MONEY\") REAL_MONEY yes config->manager The manager type is either: self managed, or managed by the Robo Advisor under an advisory or discretionary mandate. For Self Investor select USER_MANAGED ! Write once. enum(\"USER_MANAGED\", \"ROBO_ADVISOR_ADVISORY\", \"ROBO_ADVISOR_DISCRETIONARY\") ROBO_ADVISOR_DISCRETIONARY yes config->manager_version Which major version of the selected portfolio manager to use. integer >= 1 1 yes brokerage_account Account information associated with this portfolio Object no brokerage_account->bank_account_number Account number of the portfolio owner's bank account associated with this portfolio for payment instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes brokerage_account->bank_account_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes brokerage_account->bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no Portfolio management settings \u00b6 For the Robo Advisor to operate, there is a limited number of management settings that need configuration, e.g. the related investment policy or the user\u2019s risk profile. Either while creating the portfolio issuing a POST request, or afterwards by issuing a PATCH request you can register these management settings. Field Description Data type Example Required policy_id The ID of the policy applied in the optimization of this portfolio. Investment Policies reflect a financial institution\u2019s investment strategies for specific audiences, or even individuals. To get a list of investment policies issue GET /robo-advisor/policies/ . Y01ARZ3NDEKTSV4RRFFQ69G5FAV string ^Y[0-9A-HJKMNP-TV-Z]{26}\\Z no risk_profile_id The ID of the risk profile associated with this portfolio, optionally set by a customer. In case of Robo Advisor, a policy will be proposed for this Portfolio based on the computed risk profile score. string ^K[0-9A-HJKMNP-TV-Z]{26}\\Z K01ARZ3NDEKTSV4RRFFQ69G5FAV no goal_id (Robo Advisor only) The ID of the goal associated with this portfolio. To get a list of investment policies issue GET /robo-advisor/goals/ . string ^L[0-9A-HJKMNP-TV-Z]{26}\\Z L01ARZ3NDEKTSV4RRFFQ69G5FAV no horizon_id (Robo Advisor only) The ID of the horizon associated with this portfolio. To get a list of investment policies issue GET /robo-advisor/horizons/ . string ^H[0-9A-HJKMNP-TV-Z]{26}\\Z H01ARZ3NDEKTSV4RRFFQ69G5FAV no What else: You can block a portfolio You can change (\u201cpatch\u201d) portfolio fields You can delete the portfolio You can search for portfolios","title":"Account initiation"},{"location":"common_scenarios/account_initiation/#context","text":"To intiate an account two steps are required: create a user and create a portfolio. To create a user, register the user ID identifying the customer in your system. The InvestSuite API will then create a user in the system, storing this user ID and creating an InvestSuite ID that uniquely identifies the user in our system. Then use the InvestSuite ID that the API returns to create a portfolio with this user as owner.","title":"Context"},{"location":"common_scenarios/account_initiation/#create-a-user","text":"User objects serve two purposes. Firstly to grant access to one or more InvestSuite products i.e. StoryTeller, Robo Advisor, Self Investor or the Admin Console. Secondly to assign users as owners to one or more portfolios. To create a user a limited number of fields are required, i.e. a user ID and optionally the user's name. Later on, more data can be stored in the user objects, depending on the InvestSuite products that your customer will be using. Basic fields You can add the ID of that user in your system in the external_id field, also called the reference ID. Next to your user ID you can optionally register the first name and last name. Let\u2019s now create a user and then see why adding the user\u2019s first name and last name may be a good idea. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"external_id\": \"unique_external_entity_id\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\", }' https://api.sandbox.investsuite.com/users/ Field Description Data type Example Required external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in your system to identify this entity. string <= 64 characters unique_external_entity_id no first_name The first name of the user. string <= 128 characters Ashok no last_name The last name of the user. string <= 128 characters Kumar no Response body { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , } Now that you have successfully registered the user you can find that user in the InvestSuite Admin Console. Contact your representative or reach out to api@investsuite.com to get credentials to access the Admin Console. Having provided the user\u2019s name now comes in handy. What else: You can create logins for your customers for them to view and manage their portfolios. (Next) You can add the counter account for withdrawal instructions. You can change (\u201cpatch\u201d) fields . You can delete the user . You can search for users by Reference ID, the user\u2019s name etc. You can create a portfolio for the user.","title":"Create a user"},{"location":"common_scenarios/account_initiation/#create-login","text":"InvestSuite prefers not to store personal data (PII) in the InvestSuite platform. Instead we merely demand an identifier to reference your client. However if you want to create credentials on the InvestSuite platform so that your user can log in to the platform, or in fact to the front-ends exposing the platform, you need to register the user\u2019s e-mail address and mobile number. HTTP curl POST /users/?create_idp_user=true HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"external_id\": \"unique_external_entity_id\", \\ \"first_name\": \"Ashok\", \\ \"last_name\": \"Kumar\", \\ \"email\": \"ashok.kumar@example.com\", \\ \"phone\": \"+123456789\" }' https://api.sandbox.investsuite.com/users/?create_idp_user = true By passing the e-mail address and phone number of your client you make InvestSuite register the user in the identify platform (IdP) linked to your configuration - which in most cases is Azure ADB2C. Since e-mail and phone number are required to identify your customer in the identify platform both fields are required to be unique. On top, these fields are write once . You cannot update them. Field Description Data type Example Required email The e-mail address of the user. Unique and write once. email ashok.kumar@example.com no phone The mobile phone number of the user in international format. Unique and write once. string (^\\+[1-9][0-9]{7,15}\\Z) +123456789 no When the user is registered in the IdP for a customer, that customer can then go through a process to obtain a password. This process takes place outside of InvestSuite and the bank and requires the user to access the identity platform immediately. Now, with the e-mail address and the password the user can authenticate against the IdP. When authentication is successful the IdP returns a JWT. You can then add the InvestSuite User ID in the JWT claims to interact with the API on behalf of that user, for instance going through risk profiling on the person\u2019s behalf, retrieving portfolio data, issuing buy or sell orders etc.","title":"Create login"},{"location":"common_scenarios/account_initiation/#add-a-counter-account","text":"You can optionally add a counter account during user creation; or afterwards by patching the user object. This is used to display to your customer the account that is funded in case of a withdrawal instruction. In some cases banks allow the customer to modify the counter account via its front-end. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/users/' \\ --header 'Content-Type: application/json' \\ -H \"Auhorization\" : \"{string}\" \\ --data-raw '{ \"external_id\": \"unique_external_entity_id\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\", \"email\": \"ashok.kumar@example.com\", \"phone\": \"+12345667\", \"counter_account\": { \"bank_account_number\": \"BE01234567891234\", \"bank_account_number_type\": \"IBAN\", \"bank_id\": \"IDQMIE2D\", \"bank_id_type\": \"BIC\" } }' Field Description Data type Example Required bank_account_number Account number of the user for withdrawal instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes bank_account_number_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no bank_id_type Bank identifier code type. string AnyOf(\"BIC\", \"ABA\") BIC no","title":"Add a counter account"},{"location":"common_scenarios/account_initiation/#create-a-portfolio","text":"With a InvestSuite User ID at hand you can create a portfolio for your customer. Let\u2019s first do that and then go over it line by line. HTTP curl POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , } }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"REAL_MONEY\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"base_currency\":\"USD\", \\ \"config\":{ \\ \"manager\":\"ROBO_ADVISOR_DISCRETIONARY\", \\ \"manager_version\":1 \\ \"manager_settings\": { \\ \"policy_id\":\"Y01EF46X9XB437JS4678X0K529C\", \\ } \\ }, \\ \"external_id\":\"your-bank-portfolio-1\", \\ \"money_type\":\"PAPER_MONEY\", \\ \"owned_by_user_id\":\"U01F5WYKRRXZHXT9S6FF1JZNJVZ\", \\ }' \\ https://api.sandbox.investsuite.com/portfolios/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } What is a portfolio to InvestSuite - An investment portfolio in the classical sense of the term is a collection of financial assets grouped with the aim of earning a profit. These assets are referred to as holdings. Alongside holdings, portfolio objects in the InvestSuite platform contain general info, for instance to display to the customer, and configuration settings to manage the portfolio. An example of general info is a portfolio name e.g. My Retirement Portfolio, examples of configuration settings are the active boolean to indicate that trading is allowed for a portfolio and the risk profile the customer had set for the portfolio. Field Description Data type Example Required name The display name of the portfolio set by the user. string <= 128 characters My Portfolio-1 yes owned_by_user_id The portfolio owner's user ID. This field is required firstly to get to the account of the owner for cash withdrawals, and secondly to group portfolios by owner. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes base_currency The portfolio's currency. string ^[A-Z]{3}\\Z USD yes money_type Defines whether this is a 'virtual' portfolio or not. In a virtual portfolio buying and selling decisions are simulated, rather than placed as actual orders through a broker. ! Write once enum(\"REAL_MONEY\", \"PAPER_MONEY\") REAL_MONEY yes config->manager The manager type is either: self managed, or managed by the Robo Advisor under an advisory or discretionary mandate. For Self Investor select USER_MANAGED ! Write once. enum(\"USER_MANAGED\", \"ROBO_ADVISOR_ADVISORY\", \"ROBO_ADVISOR_DISCRETIONARY\") ROBO_ADVISOR_DISCRETIONARY yes config->manager_version Which major version of the selected portfolio manager to use. integer >= 1 1 yes brokerage_account Account information associated with this portfolio Object no brokerage_account->bank_account_number Account number of the portfolio owner's bank account associated with this portfolio for payment instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes brokerage_account->bank_account_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes brokerage_account->bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no","title":"Create a portfolio"},{"location":"common_scenarios/account_initiation/#portfolio-management-settings","text":"For the Robo Advisor to operate, there is a limited number of management settings that need configuration, e.g. the related investment policy or the user\u2019s risk profile. Either while creating the portfolio issuing a POST request, or afterwards by issuing a PATCH request you can register these management settings. Field Description Data type Example Required policy_id The ID of the policy applied in the optimization of this portfolio. Investment Policies reflect a financial institution\u2019s investment strategies for specific audiences, or even individuals. To get a list of investment policies issue GET /robo-advisor/policies/ . Y01ARZ3NDEKTSV4RRFFQ69G5FAV string ^Y[0-9A-HJKMNP-TV-Z]{26}\\Z no risk_profile_id The ID of the risk profile associated with this portfolio, optionally set by a customer. In case of Robo Advisor, a policy will be proposed for this Portfolio based on the computed risk profile score. string ^K[0-9A-HJKMNP-TV-Z]{26}\\Z K01ARZ3NDEKTSV4RRFFQ69G5FAV no goal_id (Robo Advisor only) The ID of the goal associated with this portfolio. To get a list of investment policies issue GET /robo-advisor/goals/ . string ^L[0-9A-HJKMNP-TV-Z]{26}\\Z L01ARZ3NDEKTSV4RRFFQ69G5FAV no horizon_id (Robo Advisor only) The ID of the horizon associated with this portfolio. To get a list of investment policies issue GET /robo-advisor/horizons/ . string ^H[0-9A-HJKMNP-TV-Z]{26}\\Z H01ARZ3NDEKTSV4RRFFQ69G5FAV no What else: You can block a portfolio You can change (\u201cpatch\u201d) portfolio fields You can delete the portfolio You can search for portfolios","title":"Portfolio management settings"},{"location":"common_scenarios/authentication/","text":"Authenticate against the API to receive a JSON Web Token (JWT). Learn more about JWT at jwt.io . To authenticate you need an access key and a secret. Reach out to your InvestSuite representative or send a mail to api@investsuite.com and we will set you up in no time. Warning Requests should not be directly sent from your app or website, as your authentication data may be exposed in transit. All requests are required to be made via an HTTPS connection; requests made over plain HTTP will fail. When you successfully authenticate you receive an access_token and a refresh_token . Add the access_token to the HTTP headers in all subsequent requests. This is required to authenticate against the API service. You cannot access any endpoint without a valid JWT. The access_token has a limited lifetime. The duration is added to the response body in the expires_at field, e.g expires_at: 300 . Within the lifetime of the access_token you can refresh the token by issuing the /auth/refresh-token endpoint. We will try this out below where we will perform following three steps: Login: Authenticate with access_key_id and secret_access_key to retrieve an access token. Refresh token: Refresh the access token. Add token: Issue a GET request with the access token. Login \u00b6 HTTP curl POST /auth/login/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"access_key_id\" : \"{access_key}\" , \"secret_access_key\" : \"{secret}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/login/' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"access_key_id\":\"{access_key}\", \"secret_access_key\":\"{secret}\" }' Response: { \"access_token\" : \"{access_token_string}\" , \"token_type\" : \"Bearer\" , \"expires_in\" : \"300\" , \"refresh_token\" : \"{refresh_token_string}\" } Refresh token \u00b6 Use the /auth/refresh-token/ endpoint to silently prolong the session. This endpoint will return the same response as /auth/login does. HTTP curl POST /auth/refresh-token/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"refresh_token\" : \"{refresh_token_string}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/refresh-token/' \\ --header 'Content-Type: application/json' \\ --data-raw '{\"refresh_token\": \"{refresh_token_string}\"}' Add token to requests \u00b6 You are obliged to use the JWT Web Token in all subsequent requests. This is the token that is returned in the access_token property. API requests without authentication will fail and return a 403 Access Forbidden . JSON Web Tokens must be specified via an authorization header as a Bearer token, eg: Authorization: Bearer 4eC39HqLyjWDarjtT1zdp7dc . To try, replace {string} in the curl request below with the access_token you obtained above, and launch the command from your terminal. HTTP curl GET /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/users/' \\ --H 'Authorization: Bearer {access_token_string}'","title":"Authentication"},{"location":"common_scenarios/authentication/#login","text":"HTTP curl POST /auth/login/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"access_key_id\" : \"{access_key}\" , \"secret_access_key\" : \"{secret}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/login/' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"access_key_id\":\"{access_key}\", \"secret_access_key\":\"{secret}\" }' Response: { \"access_token\" : \"{access_token_string}\" , \"token_type\" : \"Bearer\" , \"expires_in\" : \"300\" , \"refresh_token\" : \"{refresh_token_string}\" }","title":"Login"},{"location":"common_scenarios/authentication/#refresh-token","text":"Use the /auth/refresh-token/ endpoint to silently prolong the session. This endpoint will return the same response as /auth/login does. HTTP curl POST /auth/refresh-token/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"refresh_token\" : \"{refresh_token_string}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/refresh-token/' \\ --header 'Content-Type: application/json' \\ --data-raw '{\"refresh_token\": \"{refresh_token_string}\"}'","title":"Refresh token"},{"location":"common_scenarios/authentication/#add-token-to-requests","text":"You are obliged to use the JWT Web Token in all subsequent requests. This is the token that is returned in the access_token property. API requests without authentication will fail and return a 403 Access Forbidden . JSON Web Tokens must be specified via an authorization header as a Bearer token, eg: Authorization: Bearer 4eC39HqLyjWDarjtT1zdp7dc . To try, replace {string} in the curl request below with the access_token you obtained above, and launch the command from your terminal. HTTP curl GET /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/users/' \\ --H 'Authorization: Bearer {access_token_string}'","title":"Add token to requests"},{"location":"common_scenarios/cash_movements/","text":"Info Applicable to: Robo Advisor, Self Investor There are two sorts of cash transactions: deposits (funding) and withdrawals. Depending on (1) the direction (fund, withdraw) (2) the setup with the broker (who is integrated: you or InvestSuite), and (3) the selected product (Robo Advisor or Self Investor) you undertake one or several actions. These actions range from moving the money in the broker's account system, to making InvestSuite send a user notification. Below we describe in detail which actions to take, and which ones are taken on your behalf depending on the scenario. Funding a portfolio \u00b6 Funding a portfolio requires you to perform just one, or four steps depending on whether you or InvestSuite is integrated with the broker. Broker integration by InvestSuite \u00b6 These are the steps performed to fund a portfolio, given the broker integration is handled by InvestSuite: You notify InvestSuite that the investor account at the Bank has been funded by calling POST /events/deposit/ ( see below : Notify InvestSuite on successful deposit). InvestSuite moves the cash at the broker from the bank's home account to the individual's subaccount, given there is sufficient funding in the home account. InvestSuite creates a PENDING transaction in the InvestSuite system, referring to the transaction ID created by the broker. InvestSuite , once the transaction is settled at the broker, updates the portfolio's cash holding and the transaction status. InvestSuite creates a notification to be sent to the client. 1. Notify InvestSuite on successful deposit Call POST /events/deposit/ to send a notification when your customer has transferred cash into their cash account and the transaction is settled on your end. HTTP curl POST /events/deposit/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/deposit/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }' Broker integration by the Client \u00b6 These are the steps performed to fund a portfolio, given the broker integration is handled by you: You , in the event of a successful funding of the investor account at your end, move the cash at the broker from the bank's home account to the individual's subaccount. You create a PENDING transaction in the InvestSuite system, referring to the transaction ID created by the broker in the external_id attribute. See below : Create pending transaction. You update the transaction changing the status to SETTLED once the transaction is settled at the broker. See below : Update transaction to settled. You update the portfolio's cash position. See below : Update cash position. You call POST /events/deposit/ . See below : Instruct InvestSuite to send a notification. InvestSuite creates a notification to be sent to the client. 2. Create pending transaction HTTP curl POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"PENDING\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : 500.0 , } ] } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\", \"movements\": [ { \"type\": \"CASH_DEPOSIT\", \"status\": \"PENDING\", \"datetime\": \"2021-10-06T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity_type\": \"AMOUNT\", \"quantity\": 500.0, } ] }' 3. Update transaction to settled HTTP curl PATCH /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/T01FHCP1CZ9F1S207KJHNA5V244/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"movements\" : [ { \"status\" : \"SETTLED\" } ] } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/T01FHCP1CZ9F1S207KJHNA5V244/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"movements\": [ { \"status\": \"SETTLED\", } ] }' 4. Update cash position HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000, \"US4642886612\":0.76, \"US78468R1014\":3, \"US4642863926\":0.7381 } }' Warning Updating holdings requires you to provide the complete overview of positions . In other words, if you update an invested portfolio with only \"portfolio\": { \"$USD\":10000 } InvestSuite will assume all other positions were sold. 5. Instruct InvestSuite to send a notification HTTP curl POST /events/deposit/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/deposit/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }' Cash withdrawal \u00b6 Robo Advisor \u00b6 Cash withdrawal for Robo Advisor involves two phases: Reserve the amount to be withdrawn by setting that amount in the portfolio divest_amount field. As such the amount is reserved and cannot be used for investing. Then you transfer the money from the user's account in your system to the counter_account saved in the user object referred to from Portfolio->owned_by_user_id . When the money has in fact been withdrawn from the customer's account in your banking system, you alert InvestSuite by issuing POST /events/withdraw/ . We then update the cash position, put the divest_amount field back to null and publish a notification event to the message broker to notify the user via front-end channels. Warning In certain cases the instruction to withdraw money comes from the front-end. It is the front-end integration that updates the divest_amount field, not your integration (remember: this API is designed for backend-to-backend communication). Still, it is you that has to transfer the cash from the user's account to the counter account. In that case you listen to our event queue to trigger such transfer. See diagram below. Broker integration by InvestSuite \u00b6 Steps to take when the clients issues an instruction to withdraw funds, and InvestSuite places sell orders to free up cash: You (or InvestSuite in case the app is managed by InvestSuite) update the portfolio divest_amount by issuing a PATCH request against /portfolios/{portfolioId} when the client sets a divest amount in the app. See below : Set divest amount. InvestSuite asynchronously performs a portfolio optimisation, resulting in one or more sell orders to free up cash. In case of a advisory mandate (as opposed to a discretionary mandate, see Portfolio creation ) the user confirms the sell orders. The confirmation is registered in the owner_choice field of the Optimization object. InvestSuite places the sell orders at the broker. InvestSuite updates the portfolio's cash holding on successful reception of settled transactions from the broker. InvestSuite updates the divest amount to 0 . You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. Info As trigger to transfer the freed up cash you use the input from the broker, for instance be parsing end-of-day files. 1. Set divest amount HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 500 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 500 } } }' 7. Get counter account HTTP curl GET /users/U01234567890123456789012345/ HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive curl --location --request GET 'https://api.sandbox.investsuite.com/users/U01234567890123456789012345/' \\ --header 'Authorization: Bearer {string}' \\ Response body { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" }, \"id\" : \"U01234567890123456789012345\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , } 8. Notify InvestSuite on successful cash transfer HTTP curl POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/withdraw/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }' Broker integration by the Client \u00b6 Steps to take when the clients issues an instruction to withdraw funds, and you as the Client are in charge of the integration with the broker: You (or InvestSuite in case the app is managed by InvestSuite) update the portfolio divest_amount by issuing a PATCH request against /portfolios/{portfolioId} when the client sets a divest amount in the app. See below : Set divest amount. InvestSuite asynchronously performs a portfolio optimisation, resulting in one or more sell orders to free up cash. In case of a advisory mandate (as opposed to a discretionary mandate, see Portfolio creation ) the user confirms the sell orders. The confirmation is registered in the owner_choice field of the Optimization object. You place the sell orders at the broker. You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. You create a SETTLED transaction, referring to the transaction ID created by the broker in the external_id attribute. See below : Create transaction. You update the portfolio's cash position. See below : Update cash position. You reset the divest amount to notify InvestSuite that the cash that became available in the portfolio is ready to be invested. See below : Reset divest amount. 1. Set divest amount HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 500 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 500 } } }' 5. Get counter account HTTP curl GET /users/U01234567890123456789012345/ HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive curl --location --request GET 'https://api.sandbox.investsuite.com/users/U01234567890123456789012345/' \\ --header 'Authorization: Bearer {string}' \\ Response body { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" }, \"id\" : \"U01234567890123456789012345\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , } 6. Notify InvestSuite on successful cash transfer HTTP curl POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/withdraw/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }' 9. Update cash position HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000, \"US4642886612\":0.76, \"US78468R1014\":3, \"US4642863926\":0.7381 } }' Warning Updating holdings requires you to provide the complete overview of positions . In other words, if you update an invested portfolio with only \"portfolio\": { \"$USD\":10000 } InvestSuite will assume all other positions were sold. 8. Create transaction HTTP curl POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_WITHDRAWAL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : 500.0 , } ] } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\", \"movements\": [ { \"type\": \"CASH_WITHDRAWAL\", \"status\": \"SETTLED\", \"datetime\": \"2021-10-06T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity_type\": \"AMOUNT\", \"quantity\": 500.0, } ] }' 10. Reset divest amount HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 0 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 0 } } }' Self Investor \u00b6 For Self Investor InvestSuite manages the app, and captures withdrawal instructions straight from the app. You as the Client transfer the cash to the client's counter account upon input from the broker, e.g. reading the broker's end of day files. Steps: InvestSuite captures in the app the client withdraw instruction, and passes the instruction on to the broker. You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. 2. Get counter account HTTP curl GET /users/U01234567890123456789012345/ HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive curl --location --request GET 'https://api.sandbox.investsuite.com/users/U01234567890123456789012345/' \\ --header 'Authorization: Bearer {string}' \\ Response body { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" }, \"id\" : \"U01234567890123456789012345\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , } 3. Notify InvestSuite on successful cash transfer HTTP POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }","title":"Funding and withdrawal"},{"location":"common_scenarios/cash_movements/#funding-a-portfolio","text":"Funding a portfolio requires you to perform just one, or four steps depending on whether you or InvestSuite is integrated with the broker.","title":"Funding a portfolio"},{"location":"common_scenarios/cash_movements/#broker-integration-by-investsuite","text":"These are the steps performed to fund a portfolio, given the broker integration is handled by InvestSuite: You notify InvestSuite that the investor account at the Bank has been funded by calling POST /events/deposit/ ( see below : Notify InvestSuite on successful deposit). InvestSuite moves the cash at the broker from the bank's home account to the individual's subaccount, given there is sufficient funding in the home account. InvestSuite creates a PENDING transaction in the InvestSuite system, referring to the transaction ID created by the broker. InvestSuite , once the transaction is settled at the broker, updates the portfolio's cash holding and the transaction status. InvestSuite creates a notification to be sent to the client. 1. Notify InvestSuite on successful deposit Call POST /events/deposit/ to send a notification when your customer has transferred cash into their cash account and the transaction is settled on your end. HTTP curl POST /events/deposit/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/deposit/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }'","title":"Broker integration by InvestSuite"},{"location":"common_scenarios/cash_movements/#broker-integration-by-the-client","text":"These are the steps performed to fund a portfolio, given the broker integration is handled by you: You , in the event of a successful funding of the investor account at your end, move the cash at the broker from the bank's home account to the individual's subaccount. You create a PENDING transaction in the InvestSuite system, referring to the transaction ID created by the broker in the external_id attribute. See below : Create pending transaction. You update the transaction changing the status to SETTLED once the transaction is settled at the broker. See below : Update transaction to settled. You update the portfolio's cash position. See below : Update cash position. You call POST /events/deposit/ . See below : Instruct InvestSuite to send a notification. InvestSuite creates a notification to be sent to the client. 2. Create pending transaction HTTP curl POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"PENDING\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : 500.0 , } ] } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\", \"movements\": [ { \"type\": \"CASH_DEPOSIT\", \"status\": \"PENDING\", \"datetime\": \"2021-10-06T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity_type\": \"AMOUNT\", \"quantity\": 500.0, } ] }' 3. Update transaction to settled HTTP curl PATCH /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/T01FHCP1CZ9F1S207KJHNA5V244/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"movements\" : [ { \"status\" : \"SETTLED\" } ] } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/T01FHCP1CZ9F1S207KJHNA5V244/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"movements\": [ { \"status\": \"SETTLED\", } ] }' 4. Update cash position HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000, \"US4642886612\":0.76, \"US78468R1014\":3, \"US4642863926\":0.7381 } }' Warning Updating holdings requires you to provide the complete overview of positions . In other words, if you update an invested portfolio with only \"portfolio\": { \"$USD\":10000 } InvestSuite will assume all other positions were sold. 5. Instruct InvestSuite to send a notification HTTP curl POST /events/deposit/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/deposit/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }'","title":"Broker integration by the Client"},{"location":"common_scenarios/cash_movements/#cash-withdrawal","text":"","title":"Cash withdrawal"},{"location":"common_scenarios/cash_movements/#robo-advisor","text":"Cash withdrawal for Robo Advisor involves two phases: Reserve the amount to be withdrawn by setting that amount in the portfolio divest_amount field. As such the amount is reserved and cannot be used for investing. Then you transfer the money from the user's account in your system to the counter_account saved in the user object referred to from Portfolio->owned_by_user_id . When the money has in fact been withdrawn from the customer's account in your banking system, you alert InvestSuite by issuing POST /events/withdraw/ . We then update the cash position, put the divest_amount field back to null and publish a notification event to the message broker to notify the user via front-end channels. Warning In certain cases the instruction to withdraw money comes from the front-end. It is the front-end integration that updates the divest_amount field, not your integration (remember: this API is designed for backend-to-backend communication). Still, it is you that has to transfer the cash from the user's account to the counter account. In that case you listen to our event queue to trigger such transfer. See diagram below.","title":"Robo Advisor"},{"location":"common_scenarios/cash_movements/#broker-integration-by-investsuite_1","text":"Steps to take when the clients issues an instruction to withdraw funds, and InvestSuite places sell orders to free up cash: You (or InvestSuite in case the app is managed by InvestSuite) update the portfolio divest_amount by issuing a PATCH request against /portfolios/{portfolioId} when the client sets a divest amount in the app. See below : Set divest amount. InvestSuite asynchronously performs a portfolio optimisation, resulting in one or more sell orders to free up cash. In case of a advisory mandate (as opposed to a discretionary mandate, see Portfolio creation ) the user confirms the sell orders. The confirmation is registered in the owner_choice field of the Optimization object. InvestSuite places the sell orders at the broker. InvestSuite updates the portfolio's cash holding on successful reception of settled transactions from the broker. InvestSuite updates the divest amount to 0 . You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. Info As trigger to transfer the freed up cash you use the input from the broker, for instance be parsing end-of-day files. 1. Set divest amount HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 500 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 500 } } }' 7. Get counter account HTTP curl GET /users/U01234567890123456789012345/ HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive curl --location --request GET 'https://api.sandbox.investsuite.com/users/U01234567890123456789012345/' \\ --header 'Authorization: Bearer {string}' \\ Response body { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" }, \"id\" : \"U01234567890123456789012345\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , } 8. Notify InvestSuite on successful cash transfer HTTP curl POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/withdraw/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }'","title":"Broker integration by InvestSuite"},{"location":"common_scenarios/cash_movements/#broker-integration-by-the-client_1","text":"Steps to take when the clients issues an instruction to withdraw funds, and you as the Client are in charge of the integration with the broker: You (or InvestSuite in case the app is managed by InvestSuite) update the portfolio divest_amount by issuing a PATCH request against /portfolios/{portfolioId} when the client sets a divest amount in the app. See below : Set divest amount. InvestSuite asynchronously performs a portfolio optimisation, resulting in one or more sell orders to free up cash. In case of a advisory mandate (as opposed to a discretionary mandate, see Portfolio creation ) the user confirms the sell orders. The confirmation is registered in the owner_choice field of the Optimization object. You place the sell orders at the broker. You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. You create a SETTLED transaction, referring to the transaction ID created by the broker in the external_id attribute. See below : Create transaction. You update the portfolio's cash position. See below : Update cash position. You reset the divest amount to notify InvestSuite that the cash that became available in the portfolio is ready to be invested. See below : Reset divest amount. 1. Set divest amount HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 500 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 500 } } }' 5. Get counter account HTTP curl GET /users/U01234567890123456789012345/ HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive curl --location --request GET 'https://api.sandbox.investsuite.com/users/U01234567890123456789012345/' \\ --header 'Authorization: Bearer {string}' \\ Response body { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" }, \"id\" : \"U01234567890123456789012345\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , } 6. Notify InvestSuite on successful cash transfer HTTP curl POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } curl --location --request POST 'https://api.sandbox.investsuite.com/events/withdraw/' \\ --header 'Content-Type: application/json' \\ --header 'Authorization: Bearer {string}' \\ --data-raw '{ \"data\": { \"amount\": \"1000\", \"currency\": \"USD\", \"portfolio\": \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }' 9. Update cash position HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000, \"US4642886612\":0.76, \"US78468R1014\":3, \"US4642863926\":0.7381 } }' Warning Updating holdings requires you to provide the complete overview of positions . In other words, if you update an invested portfolio with only \"portfolio\": { \"$USD\":10000 } InvestSuite will assume all other positions were sold. 8. Create transaction HTTP curl POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_WITHDRAWAL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : 500.0 , } ] } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\", \"movements\": [ { \"type\": \"CASH_WITHDRAWAL\", \"status\": \"SETTLED\", \"datetime\": \"2021-10-06T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity_type\": \"AMOUNT\", \"quantity\": 500.0, } ] }' 10. Reset divest amount HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 0 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 0 } } }'","title":"Broker integration by the Client"},{"location":"common_scenarios/cash_movements/#self-investor","text":"For Self Investor InvestSuite manages the app, and captures withdrawal instructions straight from the app. You as the Client transfer the cash to the client's counter account upon input from the broker, e.g. reading the broker's end of day files. Steps: InvestSuite captures in the app the client withdraw instruction, and passes the instruction on to the broker. You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. 2. Get counter account HTTP curl GET /users/U01234567890123456789012345/ HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive curl --location --request GET 'https://api.sandbox.investsuite.com/users/U01234567890123456789012345/' \\ --header 'Authorization: Bearer {string}' \\ Response body { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" }, \"id\" : \"U01234567890123456789012345\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , } 3. Notify InvestSuite on successful cash transfer HTTP POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } }","title":"Self Investor"},{"location":"common_scenarios/collections/","text":"At this point, you have moved beyond the common scenarios and are ready to learn more about the inner workings of the InvestSuite API. Most of the topics allow you to run scenarios or to try out yourselves. Such requires authentication data. Reach out to your representative and we will provide you with credentials in no time. Find out how to authenticate in the First steps chapter. Collection response format \u00b6 Collections are paginated lists of entities. To request a collection issue a GET request against the entity root path e.g. GET /users , GET /portfolios , GET /instrument_groups . Request Response (body) GET /portfolios/ ?embed=owned_by_user_id &limit=2 HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"next\" : \"http://api.sandbox.investsuite.com/portfolios/?embed=owned_by_user_id&limit=2\" , \"count\" : 204 , \"offset\" : \"10\" , \"results\" :[ { \"external_id\" : \"AE820230000000000001918\" , \"readable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"modifiable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"name\" : \"Child's education\" , \"owned_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01F5G34T4FE6T1EH798FA0M170\" , \"goal_id\" : \"L01EF46X3JH1QDFPD270BKSDTTX\" , \"horizon_id\" : \"H01EF46X564YMWFR8GTNBED16CN\" , \"risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"divest_amount\" : null , \"start_amount\" : 600.0 , \"recurring_deposit_amount\" : 500.0 , \"end_datetime\" : null , \"active\" : true , \"proposed_risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"tags\" :[ ], \"risk_profile_score\" : 3 , \"background_image\" : \"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1200&q=82\" , \"background_color\" : null } }, \"brokerage_account\" :{ \"brokerage_portfolio_id\" : \"BrokerAccountKey\" , \"brokerage_user_id\" : \"BrokerAccountId\" , \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"AE820230000000000001918\" , \"bank_id\" : null }, \"owned_by_user_ids\" :[ ], \"portfolio\" :{ }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F7KDVY6H718JNV91840DE5V4\" , \"creation_datetime\" : \"2021-06-07T00:00:00+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-07T14:26:21.231855+00:00\" , \"version_authored_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"deleted\" : false , \"_embedded\" :{ }, \"status\" : \"WAITING_FOR_FUNDS\" } ], \"_embedded\" :{ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" :{ \"external_id\" : null , \"readable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"modifiable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"id\" : \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"creation_datetime\" : \"2021-05-17T00:00:00+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-05-17T15:43:23.427412+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"_embedded\" :{ }, \"first_name\" : \"Laurent\" , \"last_name\" : \"Sorber\" , \"email\" : \"laurent.sorber@gmail.com\" , \"phone\" : null , \"brokerage_user_id\" : null , \"idp_user_id\" : \"a8c8b808-bad9-4acb-babf-aae52488e468\" , \"language\" : \"en-US\" , \"products\" :[ ] } } } Query parameters \u00b6 Collection endpoints accept alongside the embed query parameter two parameters: limit and offset. Parameter Description limit Example: limit=50 ) Allows you to pass in the number of items to be returned in the results array of the response. The default collection response size is 20 items . The maximum size is 100. offset Example offset=50 To be used in combination with the limit parameter, the offset defines the number of records that need to be skipped. embed Example: embed=field_name_1,field_name_2 Optional comma-separated list of field names for which the referenced entity is to be included in the _embedded object of the response. See Embedding . search Example: query=email+eq+'jane.doe@example.com See below. Search \u00b6 The API provides a structural search and filtering mechanism for all entities. We already opted to work with a query string parameter query=email+eq+'jane.doe@example.com instead of a POST body for more efficient client-side caching and ease of use for testing. The query syntax is a mix of both OData and Apache Lucene Query Parser Syntax . Request GET /portfolios ?query=lastmodified+in+['20200101'+to+'20240101'] HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} Fundamental rules \u00b6 Every entity type can be queried by issuing a GET request e.g. GET users/?query=email+eq+'jane*' . The query string must be URL encoded. This implies that spaces would be transformed to %20 , but for improved legibility we recommend using + instead Operators \u00b6 Operator type Operator Example Number operator Exact match age eq 1 Number operator Less than age lt 18 Number operator Less than or equal age le 18 Number operator Greater than age gt 18 Number operator Greater than or equal age ge 18 String operator Exact match email eq 'jane.doe@example.com' String operator Prefix search email eq john* String operator Postfix search email eq '*gmail.com' String operator LIKE matching email eq '*gmail*' Date operator Exact match last_modified eq '2020-09-11T09:03:53.721588+00:00' Date operator Is in range for dates without time lastmodified in ['20200101' to '20210101'] Date operator Is in range for dates with time lastmodified in ['2020-09-11T09:03:53.721588' to '2020-11-11T09:03:53.721588'] Date operator Is in range for dates with timeezonr lastmodified in ['2020-09-11T09:03:53.721588+00:00' to '2020-11-11T09:03:53.721588+00:00'] Boolean operator Boolean queries archived eq true List operator IN (element of) field in ['value1', 'value2', 'value3'] Logical operator AND , OR email eq kristof and age gt 18 Hint You can combine operators in all possible compositions e.g. query=email+eq+'*tom*'+and+firstname+in+[\u2019tom',+\u2018thomas\u2019] . Sorting \u00b6 The sorting operator always comes as the last term, except when there is a selection term which is always at the very last: orderby {attribute_name}, orderby {attribute_name} asc e.g. orderby+age is always ascending, so the same as orderby+age+asc Order descending: orderby {attribute_name} desc e.g. orderby+age+desc Multiple attributes: orderby {attribute_name} desc, {attribute_name2} asc e.g. orderby+age+desc,+firstname Attributes names can be nested e.g. orderby+manager.bank_account .","title":"Collection responses"},{"location":"common_scenarios/collections/#collection-response-format","text":"Collections are paginated lists of entities. To request a collection issue a GET request against the entity root path e.g. GET /users , GET /portfolios , GET /instrument_groups . Request Response (body) GET /portfolios/ ?embed=owned_by_user_id &limit=2 HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"next\" : \"http://api.sandbox.investsuite.com/portfolios/?embed=owned_by_user_id&limit=2\" , \"count\" : 204 , \"offset\" : \"10\" , \"results\" :[ { \"external_id\" : \"AE820230000000000001918\" , \"readable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"modifiable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"name\" : \"Child's education\" , \"owned_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01F5G34T4FE6T1EH798FA0M170\" , \"goal_id\" : \"L01EF46X3JH1QDFPD270BKSDTTX\" , \"horizon_id\" : \"H01EF46X564YMWFR8GTNBED16CN\" , \"risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"divest_amount\" : null , \"start_amount\" : 600.0 , \"recurring_deposit_amount\" : 500.0 , \"end_datetime\" : null , \"active\" : true , \"proposed_risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"tags\" :[ ], \"risk_profile_score\" : 3 , \"background_image\" : \"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1200&q=82\" , \"background_color\" : null } }, \"brokerage_account\" :{ \"brokerage_portfolio_id\" : \"BrokerAccountKey\" , \"brokerage_user_id\" : \"BrokerAccountId\" , \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"AE820230000000000001918\" , \"bank_id\" : null }, \"owned_by_user_ids\" :[ ], \"portfolio\" :{ }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F7KDVY6H718JNV91840DE5V4\" , \"creation_datetime\" : \"2021-06-07T00:00:00+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-07T14:26:21.231855+00:00\" , \"version_authored_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"deleted\" : false , \"_embedded\" :{ }, \"status\" : \"WAITING_FOR_FUNDS\" } ], \"_embedded\" :{ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" :{ \"external_id\" : null , \"readable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"modifiable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"id\" : \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"creation_datetime\" : \"2021-05-17T00:00:00+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-05-17T15:43:23.427412+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"_embedded\" :{ }, \"first_name\" : \"Laurent\" , \"last_name\" : \"Sorber\" , \"email\" : \"laurent.sorber@gmail.com\" , \"phone\" : null , \"brokerage_user_id\" : null , \"idp_user_id\" : \"a8c8b808-bad9-4acb-babf-aae52488e468\" , \"language\" : \"en-US\" , \"products\" :[ ] } } }","title":"Collection response format"},{"location":"common_scenarios/collections/#query-parameters","text":"Collection endpoints accept alongside the embed query parameter two parameters: limit and offset. Parameter Description limit Example: limit=50 ) Allows you to pass in the number of items to be returned in the results array of the response. The default collection response size is 20 items . The maximum size is 100. offset Example offset=50 To be used in combination with the limit parameter, the offset defines the number of records that need to be skipped. embed Example: embed=field_name_1,field_name_2 Optional comma-separated list of field names for which the referenced entity is to be included in the _embedded object of the response. See Embedding . search Example: query=email+eq+'jane.doe@example.com See below.","title":"Query parameters"},{"location":"common_scenarios/collections/#search","text":"The API provides a structural search and filtering mechanism for all entities. We already opted to work with a query string parameter query=email+eq+'jane.doe@example.com instead of a POST body for more efficient client-side caching and ease of use for testing. The query syntax is a mix of both OData and Apache Lucene Query Parser Syntax . Request GET /portfolios ?query=lastmodified+in+['20200101'+to+'20240101'] HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string}","title":"Search"},{"location":"common_scenarios/collections/#fundamental-rules","text":"Every entity type can be queried by issuing a GET request e.g. GET users/?query=email+eq+'jane*' . The query string must be URL encoded. This implies that spaces would be transformed to %20 , but for improved legibility we recommend using + instead","title":"Fundamental rules"},{"location":"common_scenarios/collections/#operators","text":"Operator type Operator Example Number operator Exact match age eq 1 Number operator Less than age lt 18 Number operator Less than or equal age le 18 Number operator Greater than age gt 18 Number operator Greater than or equal age ge 18 String operator Exact match email eq 'jane.doe@example.com' String operator Prefix search email eq john* String operator Postfix search email eq '*gmail.com' String operator LIKE matching email eq '*gmail*' Date operator Exact match last_modified eq '2020-09-11T09:03:53.721588+00:00' Date operator Is in range for dates without time lastmodified in ['20200101' to '20210101'] Date operator Is in range for dates with time lastmodified in ['2020-09-11T09:03:53.721588' to '2020-11-11T09:03:53.721588'] Date operator Is in range for dates with timeezonr lastmodified in ['2020-09-11T09:03:53.721588+00:00' to '2020-11-11T09:03:53.721588+00:00'] Boolean operator Boolean queries archived eq true List operator IN (element of) field in ['value1', 'value2', 'value3'] Logical operator AND , OR email eq kristof and age gt 18 Hint You can combine operators in all possible compositions e.g. query=email+eq+'*tom*'+and+firstname+in+[\u2019tom',+\u2018thomas\u2019] .","title":"Operators"},{"location":"common_scenarios/collections/#sorting","text":"The sorting operator always comes as the last term, except when there is a selection term which is always at the very last: orderby {attribute_name}, orderby {attribute_name} asc e.g. orderby+age is always ascending, so the same as orderby+age+asc Order descending: orderby {attribute_name} desc e.g. orderby+age+desc Multiple attributes: orderby {attribute_name} desc, {attribute_name2} asc e.g. orderby+age+desc,+firstname Attributes names can be nested e.g. orderby+manager.bank_account .","title":"Sorting"},{"location":"common_scenarios/embedding/","text":"Introduction \u00b6 The InvestSuite API supports optional embedding of entities by EntityID , a feature which is modeled after 1 Zalando's RESTful API Performance Guideline #158 . Embedding enables API clients to merge referenced entities directly into a single response, which reduces the amount of (sequential) round trips required to fetch data from InvestSuite's backend. This feature is particularly convenient in use cases where data from multiple entities is joined together, a common operation when preparing data for reporting purposes or in specific front end views. In order to embed certain field(s), the ?embed= query string parameter needs to be provided in GET requests. This parameter can be set to one or more field names that are available in the response object (and are references to other entities). The response will be extended with a populated _embedded key at the root level, which contains a full rendition of the referenced entities. This provides a useful level of flexibility in API responses, allowing clients to directly retrieve related data with a single request. Hint Embedding works for any response field value that is an (array of) EntityID s, which can be recognized by the globally-unique identifier that follows below regex (such as a UserID like U01234567890123456789012345 ). This regex translates to a single alphabet letter identifying the type of entity, followed by a 26-character ULID based on the Crockford base32 character set. ^[A-Z][0-9A-HJKMNP-TV-Z]{26}$ Single embedded entity \u00b6 Suppose an API client requires both data for a specific portfolio ( P01234567890123456789012345 ) and data for the user that owns this particular portfolio. Without embedding, this would be a sequential two-step process, where the client first retrieves the portfolio in question: Request Response (body) GET /portfolios/P01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... } And then uses the owned_by_user_id field value ( U01234567890123456789012345 ) in the response to query data for the owner, who turns out the be John Doe : Request Response (body) GET /users/U01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } Note In this example, unless the client already knows the UserID of the owner for this portfolio, the requests will by definition always be sequential because the required path parameter for the requests to /users/ is not known until the first response is received. With embedding, both requests can be rolled into a single operation , which adds the referenced entities to the _embedded key at the root of the response (see below). Note that this object contains a dictionary where the keys are the referenced EntityID s and the value is the data for that entity (in this case a User object). The client can now directly parse the information for the UserID appearing in the owned_by_used_id field from the _embedded object without having to perform a subsequent request to /users/ . Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Info The amount of 'work' required to retrieve data can be significantly reduced on both sides if embedding is used cleverly. In the above example, the number of requests required from the client is cut in half, which speeds up the interaction considerably. At the same time, API resources are used efficiently, as per-request overhead can be avoided. Multiple embedded entities \u00b6 For the next example, assume that the client requires a portfolio, the owner of the portfolio, and the user that updated the portfolio most recently. This can be achieved by adding multiple response fields to the embed= param, separated by commas: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id,version_authored_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"version_authored_by_user_id\" : \"U01234567890123456789012345\" , \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Note In this case, the referenced entity comes up twice: both as the owner of the portfolio and as the author of the most recent version. As a result, the _embedded object only contains a single object (no repeated keys). This helps to further reduce repeated queries and unnecessary overhead. Embedding with collections \u00b6 Similar to single-entity responses, collections support embedding as well. If embedding is requested, the _embedded object will contain referenced entities for all objects returned in the collection . For instance, a client can request a list of 10 portfolios and directly embed the owners of all these portfolios. This is particularly useful when creating front-end views or collecting data for reporting purposes where multiple entities need to be joined together in bulk. This process also reduces overhead on the server side: 1 query to retrieve portfolios, and 1 query to filter for the list of users is a lot more efficient than requesting these entities sequentially from the client side. Request Response (body) GET /portfolios/?embed=owned_by_user_id&limit=10 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"next\" : \"http://api.investsuite.com/portfolios/?embed=owned_by_user_id&limit=10&offset=P01234567890123456789012345\" , \"offset\" : \"P01234567890123456789012345\" , \"results\" : [ { \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"id\" : \"P01234567890123456789012345\" , ... }, { \"owned_by_user_id\" : \"U98765432109876543210987654\" , \"id\" : \"P98765432109876543210987654\" , ... }, ... ], \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... }, ... } } Embedding a reference to a list of entities \u00b6 Finally, it is also possible to embed not just a single referenced entity, but an array pointing at multiple entity IDs. The readable_by and modifiable_by arrays in the standard entity response are a good example, as these can contain references to multiple (different) entities, such as users and user groups. Suppose the requirement is to retrieve all users that have read access to a certain portfolio, which again can be achieved with a single request. In the below response, user Jane has view-only permissions to the portfolio of John , who is the owner and has both read and write permissions: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=readable_by HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , \"U98765432109876543210987654\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... } } } FAQ \u00b6 What common errors can be encountered when working with embedding? The API will throw helpful error messages when the requested embedding could not be completed successfully, indicating the location of the error ( loc , pointing at query , parameter: embed ), and a human-readable error message with a reference to the received value. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"query\" , \"embed\" ], \"msg\" : \"field 'not_an_existing_field' not found in this entity\" , \"type\" : \"value_error.exception\" } ], \"status\" : 400 } In case a field is requested that that cannot be embedded (i.e. a field that is not a reference to another entity), the error message will be: \"msg\" : \"field 'first_name' cannot be embedded\" What happens if the requesting user does not have access to the embedded entity? Read and write permissions are controlled by the readable_by and modifiable_by arrays on each entity respectively. If the requesting user does not have the right permissions (in this case, its ID is not in the readable_by list on the referenced entity), a standard 403 Forbidden . Note that the error references the embedded entity , which is another user in the below example. This could be slightly confusing when the original request was for a different entity such as a portfolio, but the error indicates lack of read access to a user. { \"title\" : \"Access forbidden\" , \"detail\" : \"User U01234567890123456789012345 does not have READ access on U98765432109876543210987654 (version=latest)\" , \"status\" : 403 } What happens if a reference to a deleted entity is embedded? Similar to the permission error above, when a reference to an entity is requested for embedding, but that entity is no longer available, a standard 404 Not Found response is returned. Again, bear in mind that this error is specific to the embedded entity . It might for instance be possible to retrieve a portfolio instance, but if an embedded reference to the owner of that portfolio is a deleted object, the error will indicate this: { \"title\" : \"Resource not found\" , \"detail\" : \"Entity 'U01234567890123456789012345' (version=0) not found for tenant 'example.com'\" , \"status\" : 404 , } The Zalando guidelines include an example of embedding a sub-resource into the response. The InvestSuite API supports embedding of any referenced entity (which does not necessarily have to be a sub-resource of the requested entity). In addition, it is also possible to embed a list of referenced entities instead of a just single instance. \u21a9","title":"Embedding"},{"location":"common_scenarios/embedding/#introduction","text":"The InvestSuite API supports optional embedding of entities by EntityID , a feature which is modeled after 1 Zalando's RESTful API Performance Guideline #158 . Embedding enables API clients to merge referenced entities directly into a single response, which reduces the amount of (sequential) round trips required to fetch data from InvestSuite's backend. This feature is particularly convenient in use cases where data from multiple entities is joined together, a common operation when preparing data for reporting purposes or in specific front end views. In order to embed certain field(s), the ?embed= query string parameter needs to be provided in GET requests. This parameter can be set to one or more field names that are available in the response object (and are references to other entities). The response will be extended with a populated _embedded key at the root level, which contains a full rendition of the referenced entities. This provides a useful level of flexibility in API responses, allowing clients to directly retrieve related data with a single request. Hint Embedding works for any response field value that is an (array of) EntityID s, which can be recognized by the globally-unique identifier that follows below regex (such as a UserID like U01234567890123456789012345 ). This regex translates to a single alphabet letter identifying the type of entity, followed by a 26-character ULID based on the Crockford base32 character set. ^[A-Z][0-9A-HJKMNP-TV-Z]{26}$","title":"Introduction"},{"location":"common_scenarios/embedding/#single-embedded-entity","text":"Suppose an API client requires both data for a specific portfolio ( P01234567890123456789012345 ) and data for the user that owns this particular portfolio. Without embedding, this would be a sequential two-step process, where the client first retrieves the portfolio in question: Request Response (body) GET /portfolios/P01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... } And then uses the owned_by_user_id field value ( U01234567890123456789012345 ) in the response to query data for the owner, who turns out the be John Doe : Request Response (body) GET /users/U01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } Note In this example, unless the client already knows the UserID of the owner for this portfolio, the requests will by definition always be sequential because the required path parameter for the requests to /users/ is not known until the first response is received. With embedding, both requests can be rolled into a single operation , which adds the referenced entities to the _embedded key at the root of the response (see below). Note that this object contains a dictionary where the keys are the referenced EntityID s and the value is the data for that entity (in this case a User object). The client can now directly parse the information for the UserID appearing in the owned_by_used_id field from the _embedded object without having to perform a subsequent request to /users/ . Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Info The amount of 'work' required to retrieve data can be significantly reduced on both sides if embedding is used cleverly. In the above example, the number of requests required from the client is cut in half, which speeds up the interaction considerably. At the same time, API resources are used efficiently, as per-request overhead can be avoided.","title":"Single embedded entity"},{"location":"common_scenarios/embedding/#multiple-embedded-entities","text":"For the next example, assume that the client requires a portfolio, the owner of the portfolio, and the user that updated the portfolio most recently. This can be achieved by adding multiple response fields to the embed= param, separated by commas: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id,version_authored_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"version_authored_by_user_id\" : \"U01234567890123456789012345\" , \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Note In this case, the referenced entity comes up twice: both as the owner of the portfolio and as the author of the most recent version. As a result, the _embedded object only contains a single object (no repeated keys). This helps to further reduce repeated queries and unnecessary overhead.","title":"Multiple embedded entities"},{"location":"common_scenarios/embedding/#embedding-with-collections","text":"Similar to single-entity responses, collections support embedding as well. If embedding is requested, the _embedded object will contain referenced entities for all objects returned in the collection . For instance, a client can request a list of 10 portfolios and directly embed the owners of all these portfolios. This is particularly useful when creating front-end views or collecting data for reporting purposes where multiple entities need to be joined together in bulk. This process also reduces overhead on the server side: 1 query to retrieve portfolios, and 1 query to filter for the list of users is a lot more efficient than requesting these entities sequentially from the client side. Request Response (body) GET /portfolios/?embed=owned_by_user_id&limit=10 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"next\" : \"http://api.investsuite.com/portfolios/?embed=owned_by_user_id&limit=10&offset=P01234567890123456789012345\" , \"offset\" : \"P01234567890123456789012345\" , \"results\" : [ { \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"id\" : \"P01234567890123456789012345\" , ... }, { \"owned_by_user_id\" : \"U98765432109876543210987654\" , \"id\" : \"P98765432109876543210987654\" , ... }, ... ], \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... }, ... } }","title":"Embedding with collections"},{"location":"common_scenarios/embedding/#embedding-a-reference-to-a-list-of-entities","text":"Finally, it is also possible to embed not just a single referenced entity, but an array pointing at multiple entity IDs. The readable_by and modifiable_by arrays in the standard entity response are a good example, as these can contain references to multiple (different) entities, such as users and user groups. Suppose the requirement is to retrieve all users that have read access to a certain portfolio, which again can be achieved with a single request. In the below response, user Jane has view-only permissions to the portfolio of John , who is the owner and has both read and write permissions: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=readable_by HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , \"U98765432109876543210987654\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... } } }","title":"Embedding a reference to a list of entities"},{"location":"common_scenarios/embedding/#faq","text":"What common errors can be encountered when working with embedding? The API will throw helpful error messages when the requested embedding could not be completed successfully, indicating the location of the error ( loc , pointing at query , parameter: embed ), and a human-readable error message with a reference to the received value. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"query\" , \"embed\" ], \"msg\" : \"field 'not_an_existing_field' not found in this entity\" , \"type\" : \"value_error.exception\" } ], \"status\" : 400 } In case a field is requested that that cannot be embedded (i.e. a field that is not a reference to another entity), the error message will be: \"msg\" : \"field 'first_name' cannot be embedded\" What happens if the requesting user does not have access to the embedded entity? Read and write permissions are controlled by the readable_by and modifiable_by arrays on each entity respectively. If the requesting user does not have the right permissions (in this case, its ID is not in the readable_by list on the referenced entity), a standard 403 Forbidden . Note that the error references the embedded entity , which is another user in the below example. This could be slightly confusing when the original request was for a different entity such as a portfolio, but the error indicates lack of read access to a user. { \"title\" : \"Access forbidden\" , \"detail\" : \"User U01234567890123456789012345 does not have READ access on U98765432109876543210987654 (version=latest)\" , \"status\" : 403 } What happens if a reference to a deleted entity is embedded? Similar to the permission error above, when a reference to an entity is requested for embedding, but that entity is no longer available, a standard 404 Not Found response is returned. Again, bear in mind that this error is specific to the embedded entity . It might for instance be possible to retrieve a portfolio instance, but if an embedded reference to the owner of that portfolio is a deleted object, the error will indicate this: { \"title\" : \"Resource not found\" , \"detail\" : \"Entity 'U01234567890123456789012345' (version=0) not found for tenant 'example.com'\" , \"status\" : 404 , } The Zalando guidelines include an example of embedding a sub-resource into the response. The InvestSuite API supports embedding of any referenced entity (which does not necessarily have to be a sub-resource of the requested entity). In addition, it is also possible to embed a list of referenced entities instead of a just single instance. \u21a9","title":"FAQ"},{"location":"common_scenarios/errors/","text":"Errors happen. If that is the case the API returns a 4** error if it assumes that the error is caused by your application, or a 5** in case of a server error. If there is no error anticipated the API returns a 2** code. Error codes \u00b6 Code Status Description 200 Successful response The request was successfully completed. 201 Created A new resource was successfully created. 400 Bad Request The request was invalid. 401 Unauthorized The request did not include an authentication token or the authentication token was expired. 403 Forbidden The client did not have permission to access the requested resource. 404 Not Found The requested resource was not found. 409 Business Logic Error There is a conflict in the request, or the request would create a conflict with the resource 422 Validation error The request was understood but a validation error prevented the server to process the request. If this is the case the API adds context to the response body (see example below). 500 Internal Server Error The request was not completed due to an internal error on the server side. Example of a 400 Bad Request \u00b6 When a validation error occurs the reason and the location are documented in the response body. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"body\" , \"rik_profile_id\" ], \"msg\" : \"extra fields not permitted\" , \"type\" : \"value_error.extra\" } ], \"status\" : 400 , \"body\" : { \"rik_profile_id\" : \"K01FJCEA3TBBXNPP6GYZ2688EE3\" } } Example of a 401 Unauthorised response \u00b6 { \"title\" : \"Unauthorized\" , \"description\" : \"JWT invalid\" , \"request_id\" : \"8d3cc569-00e1-9cdf-96b3-ed394f402fd3\" , \"timestamp\" : \"2021-10-19T15:06:19.855057+00:00\" }","title":"API errors"},{"location":"common_scenarios/errors/#error-codes","text":"Code Status Description 200 Successful response The request was successfully completed. 201 Created A new resource was successfully created. 400 Bad Request The request was invalid. 401 Unauthorized The request did not include an authentication token or the authentication token was expired. 403 Forbidden The client did not have permission to access the requested resource. 404 Not Found The requested resource was not found. 409 Business Logic Error There is a conflict in the request, or the request would create a conflict with the resource 422 Validation error The request was understood but a validation error prevented the server to process the request. If this is the case the API adds context to the response body (see example below). 500 Internal Server Error The request was not completed due to an internal error on the server side.","title":"Error codes"},{"location":"common_scenarios/errors/#example-of-a-400-bad-request","text":"When a validation error occurs the reason and the location are documented in the response body. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"body\" , \"rik_profile_id\" ], \"msg\" : \"extra fields not permitted\" , \"type\" : \"value_error.extra\" } ], \"status\" : 400 , \"body\" : { \"rik_profile_id\" : \"K01FJCEA3TBBXNPP6GYZ2688EE3\" } }","title":"Example of a 400 Bad Request"},{"location":"common_scenarios/errors/#example-of-a-401-unauthorised-response","text":"{ \"title\" : \"Unauthorized\" , \"description\" : \"JWT invalid\" , \"request_id\" : \"8d3cc569-00e1-9cdf-96b3-ed394f402fd3\" , \"timestamp\" : \"2021-10-19T15:06:19.855057+00:00\" }","title":"Example of a 401 Unauthorised response"},{"location":"common_scenarios/financial_data/","text":"Context \u00b6 The Financial Data API allows you to integrate with the InvestSuite Financial Data services. These services evolve around investment products and securities such as stocks, ETFs, funds, cryptocurrencies ... With the current API endpoints you can query which instruments are attributed to the universe used in your Robo Advisor and Self Investor setups. Instrument universe \u00b6 Financial instruments in general are assets that hold capital and can be traded in the market. Examples are shares, bonds, funds. To use StoryTeller, Optimizer, Self Investor, Robo Advisor you define an instrument universe . This is the collection of instruments that can be used to trade or report on. When you query GET /financial-data/instruments/ the return will hold all instruments in the assigned universe. Getting the instrument universe is as simple as querying the whole Instruments collection. HTTP curl GET /financial-data/instruments/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/' \\ --H 'Authorization: Bearer {access_token_string}' Getting instrument details \u00b6 To retrieve a single instrument request GET /financial-data/instruments/{instrument_id}/. This will return basic data on an instrument: its name, reference ID, type, end-of-day price and lookthrough data. HTTP curl GET /financial-data/instruments/BE0974293251/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/BE0974293251/' \\ --H 'Authorization: Bearer {access_token_string}' Response: { \"id\" : \"BE0974293251\" , \"external_id\" : \"BE0974293251\" , \"name\" : \"ANHEUSER-BUSCH INBEV\" , \"type\" : \"STOCK\" , \"price\" : 54.35 , \"look_through\" : { \"asset_classes\" : { \"alternatives\" : 0.0 , \"bonds\" : 0.0 , \"commodities\" : 0.0 , \"stocks\" : 1.0 , \"cash\" : 0.0 }, \"regions\" : { \"bonds\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 }, \"stocks\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 1.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" : { \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 1.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } } Field Description Data type Example Required id The instrument's external identifier. For instance: ISIN. string BE0974293251 yes external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in the client's system to identify this entity. This field is not checked for uniqueness. string <= 64 characters BE0974293251 yes name The instrument's name string <= 128 characters ANHEUSER-BUSCH INBEV no type The instrument's type. For instance: stock, etf. Enum(\"STOCK\", \"BOND\", \"ETF\", \"MUTUAL_FUND\", \"TOKEN\", \"INDEX\", \"CURRENCY\", \"INTEREST_RATE\") STOCK no price The instrument's last day closing price. decimal 54.35 no look_through The instrument's regional, sectoral and asset type spread. object no","title":"Financial data"},{"location":"common_scenarios/financial_data/#context","text":"The Financial Data API allows you to integrate with the InvestSuite Financial Data services. These services evolve around investment products and securities such as stocks, ETFs, funds, cryptocurrencies ... With the current API endpoints you can query which instruments are attributed to the universe used in your Robo Advisor and Self Investor setups.","title":"Context"},{"location":"common_scenarios/financial_data/#instrument-universe","text":"Financial instruments in general are assets that hold capital and can be traded in the market. Examples are shares, bonds, funds. To use StoryTeller, Optimizer, Self Investor, Robo Advisor you define an instrument universe . This is the collection of instruments that can be used to trade or report on. When you query GET /financial-data/instruments/ the return will hold all instruments in the assigned universe. Getting the instrument universe is as simple as querying the whole Instruments collection. HTTP curl GET /financial-data/instruments/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/' \\ --H 'Authorization: Bearer {access_token_string}'","title":"Instrument universe"},{"location":"common_scenarios/financial_data/#getting-instrument-details","text":"To retrieve a single instrument request GET /financial-data/instruments/{instrument_id}/. This will return basic data on an instrument: its name, reference ID, type, end-of-day price and lookthrough data. HTTP curl GET /financial-data/instruments/BE0974293251/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/BE0974293251/' \\ --H 'Authorization: Bearer {access_token_string}' Response: { \"id\" : \"BE0974293251\" , \"external_id\" : \"BE0974293251\" , \"name\" : \"ANHEUSER-BUSCH INBEV\" , \"type\" : \"STOCK\" , \"price\" : 54.35 , \"look_through\" : { \"asset_classes\" : { \"alternatives\" : 0.0 , \"bonds\" : 0.0 , \"commodities\" : 0.0 , \"stocks\" : 1.0 , \"cash\" : 0.0 }, \"regions\" : { \"bonds\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 }, \"stocks\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 1.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" : { \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 1.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } } Field Description Data type Example Required id The instrument's external identifier. For instance: ISIN. string BE0974293251 yes external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in the client's system to identify this entity. This field is not checked for uniqueness. string <= 64 characters BE0974293251 yes name The instrument's name string <= 128 characters ANHEUSER-BUSCH INBEV no type The instrument's type. For instance: stock, etf. Enum(\"STOCK\", \"BOND\", \"ETF\", \"MUTUAL_FUND\", \"TOKEN\", \"INDEX\", \"CURRENCY\", \"INTEREST_RATE\") STOCK no price The instrument's last day closing price. decimal 54.35 no look_through The instrument's regional, sectoral and asset type spread. object no","title":"Getting instrument details"},{"location":"common_scenarios/introduction/","text":"This section handles topics that are common to all InvestSuite products.","title":"Introduction"},{"location":"common_scenarios/onboarding/","text":"Context \u00b6 An Onboarding process varies wildly from client to client, but typically involves the following steps in any order: Strong identifity verification (eg. through a national ID provider) Capture additional information (Anti Money-Laundering (AML) checks, tax information, ...) Setting a withdrawal IBAN Suitability test MiFID Checks Signing a contract Creation of a User in InvestSuite Creation of a Portfolio in InvestSuite, with the User as owner Broadly speaking, the Onboarding process happens either outside the InvestSuite application (Scenario 1, also referred to as 'API Onboarding') or inside InvestSuite (Scenario 2, also referred to as 'In-App Onboarding'). The former is the preferred scenario as it requires less integration work and provides a smoother experience for your existing users. Scenario 1: API Onboarding \u00b6 Create User \u00b6 Use Case The User onboards outside of InvestSuite / via your application. This means KYC checks, AML checks and contract signing are done through your application. Only after this, the user is created at InvestSuite. How-To The below table shows the minimum required data you provide as an input when creating a user through the InvestSuite API. Field Description How to provide create_idp_user Set to TRUE if InvestSuite creates the user at the identity provider. query parameter external_id Your identifier for the user. request body first_name The first name of the user. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the app. request body last_name The last name of the user. Required if InvestSuite creates the user at the identity provider. request body email The email address of the user. Required if InvestSuite creates the user at the identity provider. request body phone The mobile phone number of the user. Required if InvestSuite creates the user at the identity provider, only if 2-factor authentication is foreseen. request body language The preferred communication language of the user. request body counter_account > bank_account_number_type Type of the bank account number, typically an IBAN number. Required if the user uses InvestSuite's front-end applications for investing. request body counter_account > bank_account_number Account number of the user to which money withdrawn from the user's portfolio will be settled. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the withdrawal screen of the InvestSuite app. request body status The status of the user. Always ACTIVE for this onboarding scenario. request body For the detailed specification of our endpoints, go to InvestSuite API specification . Create Self Investor Portfolio \u00b6 Use Case You create a Self Investor portfolio for a fully onboarded user. The user is already created in InvestSuite. How-To The below table shows the minimum required data you provide as an input when creating a portfolio through the InvestSuite API. Field Description How to provide external_id Your identifier for the portfolio. request body name The portfolio name. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the InvestSuite app. request body owned_by_user_id The portfolio owner's user id. request body base_currency The base currency of the portfolio. request body money_type Always REAL_MONEY for a Self Investor portfolio. request body config > manager Always SELF_MANAGED for a Self Investor portfolio. request body config > manager_version Always 1 for a Self Investor portfolio. request body brokerage_account > bank_account_type Type of the bank account number, typically an IBAN number. request body brokerage_account > bank_account_number Account number of the account to which the user should transfer money for funding the portfolio. This can be a pooled account or an account specifically for the portfolio. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the funding screen of the InvestSuite app. request body brokerage_account > payment_reference Payment reference the user needs to add to the bank transfer for funding the portfolio. Required if the user uses InvestSuite's front-end applications for investing and the portfolio is funded through a pooled account. Displayed in the funding screen of the InvestSuite app. request body For the detailed specification of our endpoints, go to InvestSuite API specification . Create Robo Advisor Portfolio \u00b6 Under construction Scenario 2: In-App Onboarding \u00b6 Create User \u00b6 Under construction Create Self Investor Portfolio \u00b6 Under construction Create Robo Advisor Portfolio \u00b6 Under construction","title":"Onboarding"},{"location":"common_scenarios/onboarding/#context","text":"An Onboarding process varies wildly from client to client, but typically involves the following steps in any order: Strong identifity verification (eg. through a national ID provider) Capture additional information (Anti Money-Laundering (AML) checks, tax information, ...) Setting a withdrawal IBAN Suitability test MiFID Checks Signing a contract Creation of a User in InvestSuite Creation of a Portfolio in InvestSuite, with the User as owner Broadly speaking, the Onboarding process happens either outside the InvestSuite application (Scenario 1, also referred to as 'API Onboarding') or inside InvestSuite (Scenario 2, also referred to as 'In-App Onboarding'). The former is the preferred scenario as it requires less integration work and provides a smoother experience for your existing users.","title":"Context"},{"location":"common_scenarios/onboarding/#scenario-1-api-onboarding","text":"","title":"Scenario 1: API Onboarding"},{"location":"common_scenarios/onboarding/#create-user","text":"Use Case The User onboards outside of InvestSuite / via your application. This means KYC checks, AML checks and contract signing are done through your application. Only after this, the user is created at InvestSuite. How-To The below table shows the minimum required data you provide as an input when creating a user through the InvestSuite API. Field Description How to provide create_idp_user Set to TRUE if InvestSuite creates the user at the identity provider. query parameter external_id Your identifier for the user. request body first_name The first name of the user. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the app. request body last_name The last name of the user. Required if InvestSuite creates the user at the identity provider. request body email The email address of the user. Required if InvestSuite creates the user at the identity provider. request body phone The mobile phone number of the user. Required if InvestSuite creates the user at the identity provider, only if 2-factor authentication is foreseen. request body language The preferred communication language of the user. request body counter_account > bank_account_number_type Type of the bank account number, typically an IBAN number. Required if the user uses InvestSuite's front-end applications for investing. request body counter_account > bank_account_number Account number of the user to which money withdrawn from the user's portfolio will be settled. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the withdrawal screen of the InvestSuite app. request body status The status of the user. Always ACTIVE for this onboarding scenario. request body For the detailed specification of our endpoints, go to InvestSuite API specification .","title":"Create User"},{"location":"common_scenarios/onboarding/#create-self-investor-portfolio","text":"Use Case You create a Self Investor portfolio for a fully onboarded user. The user is already created in InvestSuite. How-To The below table shows the minimum required data you provide as an input when creating a portfolio through the InvestSuite API. Field Description How to provide external_id Your identifier for the portfolio. request body name The portfolio name. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the InvestSuite app. request body owned_by_user_id The portfolio owner's user id. request body base_currency The base currency of the portfolio. request body money_type Always REAL_MONEY for a Self Investor portfolio. request body config > manager Always SELF_MANAGED for a Self Investor portfolio. request body config > manager_version Always 1 for a Self Investor portfolio. request body brokerage_account > bank_account_type Type of the bank account number, typically an IBAN number. request body brokerage_account > bank_account_number Account number of the account to which the user should transfer money for funding the portfolio. This can be a pooled account or an account specifically for the portfolio. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the funding screen of the InvestSuite app. request body brokerage_account > payment_reference Payment reference the user needs to add to the bank transfer for funding the portfolio. Required if the user uses InvestSuite's front-end applications for investing and the portfolio is funded through a pooled account. Displayed in the funding screen of the InvestSuite app. request body For the detailed specification of our endpoints, go to InvestSuite API specification .","title":"Create Self Investor Portfolio"},{"location":"common_scenarios/onboarding/#create-robo-advisor-portfolio","text":"Under construction","title":"Create Robo Advisor Portfolio"},{"location":"common_scenarios/onboarding/#scenario-2-in-app-onboarding","text":"","title":"Scenario 2: In-App Onboarding"},{"location":"common_scenarios/onboarding/#create-user_1","text":"Under construction","title":"Create User"},{"location":"common_scenarios/onboarding/#create-self-investor-portfolio_1","text":"Under construction","title":"Create Self Investor Portfolio"},{"location":"common_scenarios/onboarding/#create-robo-advisor-portfolio_1","text":"Under construction","title":"Create Robo Advisor Portfolio"},{"location":"common_scenarios/portfolios/","text":"A portfolio holds one or more investment products for instance stocks, ETFs or cryptocurrency. The composition of a portfolio depends on the investor\u2019s goals, budget, risk appetite and the holding period. An investor can without advise decide what instruments a portfolio is made of. In this case it is a \u201cself managed\u201d portfolio. A portfolio can equally be composed by an algorithm such as the InvestSuite\u2019s iVar algorithm. In that case the portfolio is managed by a Robo Advisor. Once you have created a portfolio you can create a portfolio and assign the portfolio as owner. Create a portfolio \u00b6 Request Response (body) POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_settings\" :{ \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" }, \"manager_version\" : 1 }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"portfolio\" :{ \"$USD\" : 10000 }, } { \"external_id\" : \"your-bank-portfolio-1\"\"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"active\" : true } }, \"brokerage_account\" : null , \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Get a portfolio \u00b6 Add the InvestSuite ID to the path to retrieve a portfolio object. Request Response (body) GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Search \u00b6 You can query each entity through a general endpoint e.g. GET /portfolios/?query=\u2026 . Learn more in the Handling collection responses section. Request Response (body) GET /portfolios/ ?query=external_id+eq+'your-bank-portfolio-1' HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Change (\"patch\") fields \u00b6 Given the right permissions you can update any object by issuing a PATCH request. Apart from the manager and money_type fields all portfolio fields can be updated. The manager field defines the type of portfolio management: self directed, under an advisory mandate, under a discretionary mandate. Once that is set it is not supposed to change. Same for the money_type. That field states if the portfolio manages real money or paper money. It\u2019s obvious that this field cannot be switched at will. Objects in the InvestSuite system are immutable. Every change leads to a new version so that a log exists of who performed which change at which moment. The version number is returned alongside other metadata fields. Use the Admin Console to access this log and to view diffs between versions. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"config\" : { \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Delete a portfolio \u00b6 Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : true , \"status\" : \"WAITING_FOR_FUNDS\" } Block a portfolio \u00b6 Both for Self Investor portfolios as well as for Robo Advisor portfolios access can be blocked. In the case of Self Investor this means the customer can no longer trade, the account is blocked as it were. For Robo Advisor when the portfolio is blocked, the Robo Advisor will no longer compute optimisations to provide rebalancing recommendations. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { ac t ive : false } } } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \"config\": { \"manager_settings\": { active: false } } } }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Manager Description Data type Example Required Self Investor The active field for Self Investor is used to block users from placing orders, and potentially of access to any other features. boolean (default: false) false no Robo Advisor Whether the optimizer service is active for this portfolio. When this field is set to true, the Robo Advisor will compute optimizations once a day and provide rebalancing recommendations. boolean (default: false) false no","title":"Manage Portfolios"},{"location":"common_scenarios/portfolios/#create-a-portfolio","text":"Request Response (body) POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_settings\" :{ \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" }, \"manager_version\" : 1 }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"portfolio\" :{ \"$USD\" : 10000 }, } { \"external_id\" : \"your-bank-portfolio-1\"\"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"active\" : true } }, \"brokerage_account\" : null , \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" }","title":"Create a portfolio"},{"location":"common_scenarios/portfolios/#get-a-portfolio","text":"Add the InvestSuite ID to the path to retrieve a portfolio object. Request Response (body) GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" }","title":"Get a portfolio"},{"location":"common_scenarios/portfolios/#search","text":"You can query each entity through a general endpoint e.g. GET /portfolios/?query=\u2026 . Learn more in the Handling collection responses section. Request Response (body) GET /portfolios/ ?query=external_id+eq+'your-bank-portfolio-1' HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" }","title":"Search"},{"location":"common_scenarios/portfolios/#change-patch-fields","text":"Given the right permissions you can update any object by issuing a PATCH request. Apart from the manager and money_type fields all portfolio fields can be updated. The manager field defines the type of portfolio management: self directed, under an advisory mandate, under a discretionary mandate. Once that is set it is not supposed to change. Same for the money_type. That field states if the portfolio manages real money or paper money. It\u2019s obvious that this field cannot be switched at will. Objects in the InvestSuite system are immutable. Every change leads to a new version so that a log exists of who performed which change at which moment. The version number is returned alongside other metadata fields. Use the Admin Console to access this log and to view diffs between versions. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"config\" : { \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" }","title":"Change (\"patch\") fields"},{"location":"common_scenarios/portfolios/#delete-a-portfolio","text":"Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : true , \"status\" : \"WAITING_FOR_FUNDS\" }","title":"Delete a portfolio"},{"location":"common_scenarios/portfolios/#block-a-portfolio","text":"Both for Self Investor portfolios as well as for Robo Advisor portfolios access can be blocked. In the case of Self Investor this means the customer can no longer trade, the account is blocked as it were. For Robo Advisor when the portfolio is blocked, the Robo Advisor will no longer compute optimisations to provide rebalancing recommendations. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { ac t ive : false } } } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \"config\": { \"manager_settings\": { active: false } } } }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Manager Description Data type Example Required Self Investor The active field for Self Investor is used to block users from placing orders, and potentially of access to any other features. boolean (default: false) false no Robo Advisor Whether the optimizer service is active for this portfolio. When this field is set to true, the Robo Advisor will compute optimizations once a day and provide rebalancing recommendations. boolean (default: false) false no","title":"Block a portfolio"},{"location":"common_scenarios/suitability_profiler/","text":"Context \u00b6 The suitability profiler captures the information needed to create a suitable portfolio for someone. Part of this is creating a risk profile, other information can include preferences on sustainable investing or specific investment themes. Through one or more assessments in a suitability profile, this information can be gathered and translated into characteristics of a suitable portfolio. Risk profiler \u00b6 One application of the suitability profiler is assessing the willingness to take risk. InvestSuite has conducted research in close collaboration with several universities to create a risk profiler that evaluates in an engaging and human way someone's willingness and ability to take risk. InvestSuite risk profile questionnaires can be MiFID 2-compliant, have dynamic pathways and logic jumps, and have questions based on real numbers specific to the user. For each financial institution subscribed to the service, InvestSuite creates and stores one or more custom questionnaires, that the institution can use to assess their users' risk profile. Definitions \u00b6 Assessment - An assessment contains the questions to be asked, and the answers that the user provides. An assessment follows the questions of a questionnaire, and holds the progress of the user. As can be seen in the image below, after an assessment is completed, it generates an output based on a pre-defined formula. Profile - A profile holds the information necessary to create a suitable portfolio. It contains one or more assessments, each assessing a certain aspect of a suitability profile, and so-called property values. These hold additional settings that together with the assessments serve as input to the profiler. Profiler - A profiler is essentially a template for a portfolio-specific suitability profile. A profiler, as well as the questionnaires, properties and formula in the profiler, is designed and configured together with InvestSuite. Questionnaire - A questionnaire determines the structure of an assessment. This concerns the logic that is used to fill out parameters, the content of questions that will be asked, the (dynamic) pathway of questions, and a formula that converts the captured information into an output. Profile properties - Profile properties determine settings that influence the policy but are not captured in assessments. Each property in a profiler has a default value that it should be set to upon the creation of a portfolio-specific profile. Profile property values - Profile property values capture profile settings that determine the policy of a profile and are not part of an assessment. These property values are all set to a default initial value, that is determined by the profile properties in the corresponding profiler. Policy - A policy is an investment strategy. Policies can exist for customer segments or can exist for individual portfolios. The policy will instruct the InvestSuite Optimizer on how to construct a portfolio. A policy for instance holds the applicable instrument universe and the preferred asset allocation. For more information about policies, please have a look at our API specification . How it works \u00b6 To come to guidelines for a suitable portfolio, the user must go through one or more assessments in their suitability profile to capture the necessary information. Once you designed and configured a profiler together with InvestSuite, it is possible to generate a profile. For each portfolio, a profile can be created based on a profiler. This profiler acts as a template for a specific profile. It determines which assessments will be asked, which profile properties will be set, and how the gathered information is translated into policy guidelines. All assessments in the profile object should be completed by the user in order to determine a suitable policy. Outputs \u00b6 At the end of an assessment, the InvestSuite API returns an output. The client can use the outputs in the profile to determine the right investing strategy for the user. The formula on how to calculate the output is determined by the client in each questionnaire, which means that there are no customisation constraints. The same is true for the profiler formula that calculates the final result based on the assessment and property values outputs. Questions in an assessment do not all have to contribute to the eventual output. For example, in the case of a risk profile assessment, the birth date of the user is a required parameter in order to determine whether the user is old enough to open an investment account, but it does not influence the risk score. Assessment flow \u00b6 Because there can be logic jumps in the question order of an assessment (and the next question can depend on the previous answers), only the next question to be asked and previously answered questions are given in each assessment response. After an answer is submitted, Investsuite immediately stores it in the suitability profile. This way, a user can close the application at any time without losing their progress, and can resume the assessment later. Property values \u00b6 The profile property values are initialized to a default value upon creation of the profile. This means that when all assessments in the profile are completed, but the user did not yet check the settings of the property values, a policy can already be determined. Create profile \u00b6 When a user is created, it is possible to create a profile with the user ID. To create a profile for a user, a user ID and profiler ID are required. The user ID is the ID that is used by InvestSuite to uniquely identify the user. You can find the user ID by querying the User collection GET /users/?query=\u2026 , see the Search users section for more information. The profiler ID identifies the profiler that will be used as template for the profile. This profiler is specific to the customer and is designed and configured together with InvestSuite. This profiler ID will be given to the customer after configuration. Let's try it out and create a profile for a specific user_id and profiler_id . HTTP curl POST /suitability-profiler/profiles/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"profiler_id\" : \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"profiler_id\": \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\", \"user_id\": \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\", }' Field Description Data type Example Required profiler_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^X[0-9A-HJKMNP-TV-Z]{26}\\Z X01ARZ3NDEKTSV4RRFFQ69G5FAV yes user_id The user ID of the person that this profile is for. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body \"N01ARZ3NDEKTSV4RRFFQ69G5FAV\" The response contains the plain profile ID. This profile_id should be used in the url path of further requests. Conduct an assessment \u00b6 When a profile is created for a user, we can start conducting the assessments in order to complete the profile. Each assessment is linked to a questionnaire, that determines what the assessment looks like. This questionnaire's external_id in combination with the ID of the created profile uniquely determine an assessment. These questionnaire IDs will be given to the customer after configuration. Let us give an example of how to retrieve an assessment. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile that this assessment is for. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes questionnaire_external_id The external ID of the questionnaire that this assessment is based on. string ^.{1,64}$ DUMMY-External-ID yes Response body { \"description\" : { \"en-US\" : \"Balancing risk and reward\" }, \"sections\" : [ { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Investment Goals\" , }, \"question_count\" : 10 , }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, \"title\" : { \"en-US\" : \"Risk profiling\" } } Now that we have retrieved the assessment, the assessing can begin. Conducting an assessment is done by asking a question to the user, submitting the answer to InvestSuite, receiving the next question to ask from InvestSuite, asking that question to the user, and so on until the assessment is completed. An assessment will have a status COMPLETED and show a result when all questions are answered. When there are still questions to be answered, the assessment has a status IN_PROGRESS and contains a next question to ask. After receiving an answer from the user, the answer is submitted to InvestSuite in order to get the next question. InvestSuite saves the answer immediately and determines the next question. This way, InvestSuite keeps track of and saves the progress of the assessment, so the user can close the application any time and resume the assessment where they left off later. The assessment response will contain the questionnaire's description, title, sections and a status. When the status' type is IN_PROGRESS , it will also contain question , which represents the next question to be asked to the end-user. This is a dummy response of a call to GET /suitability-profiler/profiles/{profile_id}/assessments/{questionnaire_external_id} and the PUT /profiles/{profile_id}/questionnaires/{questionnaire_external_id}/assessment/questions/{question_id}/answer for submitting an answer. Note: id will always be unique, but for this example placeholders are used. Response body { \"sections\" : [ { \"answered_questions\" : [ { \"form\" : { \"input\" : { \"default_value\" : true , \"type\" : \"BOOLEAN\" }, \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01RRZ3NDDKTSK4RRFFQ69G5FAV\" , } ], \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"title\" : { \"en-us\" : \"Investment Goals\" , } }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"More information\" }, \"body\" : { \"en-US\" : \"Robo Advisor invests in Exchange Traded Funds (ETFs), which are made from underlying instruments like stocks or bonds, and follows an index.\" }, \"index\" : \"1\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, } Get a profile property value \u00b6 When a profile is created for a user, profile property values are initially set to a default value. The user can later on see these properties and change them if they like. For example, if the robo advisor offers the option to only invest in sharia compliant companies, a property value sharia_compliant can initially be set to false. If the user decides that they want to invest in only sharia compliant companies, this property can be set to true. Let's retrieve the property values together. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body { \"ShariaCompliant\" : { \"type\" : \"BOOLEAN\" , \"value\" : false } } Change a property value \u00b6 The user can adjust its profile property values to make their portfolio more suitable to them. For example, if a user only wants to invest in Sharia compliant instruments, and the tenant supports this option, the profile property value corresponding to this option can be adjusted. Let's look at the below example. HTTP curl PUT /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"type\" : \"BOOLEAN\" , \"value\" : true , } curl --location --request PUT 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"type\": \"BOOLEAN\", \"value\": true, }' Field Description Data type Example Required profile_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes property_key The key of a property in the profile that you want to change. string ShariaCompliant yes type The type of the property ID value string BOOLEAN yes value The value of the property ID Any true yes Note: The type and value are part of the post-data, while the profile_id and property_key are part of the URL When a successful response (status code: 200 OK) comes back, the property was successfully changed in the profile.","title":"Suitability profiler"},{"location":"common_scenarios/suitability_profiler/#context","text":"The suitability profiler captures the information needed to create a suitable portfolio for someone. Part of this is creating a risk profile, other information can include preferences on sustainable investing or specific investment themes. Through one or more assessments in a suitability profile, this information can be gathered and translated into characteristics of a suitable portfolio.","title":"Context"},{"location":"common_scenarios/suitability_profiler/#risk-profiler","text":"One application of the suitability profiler is assessing the willingness to take risk. InvestSuite has conducted research in close collaboration with several universities to create a risk profiler that evaluates in an engaging and human way someone's willingness and ability to take risk. InvestSuite risk profile questionnaires can be MiFID 2-compliant, have dynamic pathways and logic jumps, and have questions based on real numbers specific to the user. For each financial institution subscribed to the service, InvestSuite creates and stores one or more custom questionnaires, that the institution can use to assess their users' risk profile.","title":"Risk profiler"},{"location":"common_scenarios/suitability_profiler/#definitions","text":"Assessment - An assessment contains the questions to be asked, and the answers that the user provides. An assessment follows the questions of a questionnaire, and holds the progress of the user. As can be seen in the image below, after an assessment is completed, it generates an output based on a pre-defined formula. Profile - A profile holds the information necessary to create a suitable portfolio. It contains one or more assessments, each assessing a certain aspect of a suitability profile, and so-called property values. These hold additional settings that together with the assessments serve as input to the profiler. Profiler - A profiler is essentially a template for a portfolio-specific suitability profile. A profiler, as well as the questionnaires, properties and formula in the profiler, is designed and configured together with InvestSuite. Questionnaire - A questionnaire determines the structure of an assessment. This concerns the logic that is used to fill out parameters, the content of questions that will be asked, the (dynamic) pathway of questions, and a formula that converts the captured information into an output. Profile properties - Profile properties determine settings that influence the policy but are not captured in assessments. Each property in a profiler has a default value that it should be set to upon the creation of a portfolio-specific profile. Profile property values - Profile property values capture profile settings that determine the policy of a profile and are not part of an assessment. These property values are all set to a default initial value, that is determined by the profile properties in the corresponding profiler. Policy - A policy is an investment strategy. Policies can exist for customer segments or can exist for individual portfolios. The policy will instruct the InvestSuite Optimizer on how to construct a portfolio. A policy for instance holds the applicable instrument universe and the preferred asset allocation. For more information about policies, please have a look at our API specification .","title":"Definitions"},{"location":"common_scenarios/suitability_profiler/#how-it-works","text":"To come to guidelines for a suitable portfolio, the user must go through one or more assessments in their suitability profile to capture the necessary information. Once you designed and configured a profiler together with InvestSuite, it is possible to generate a profile. For each portfolio, a profile can be created based on a profiler. This profiler acts as a template for a specific profile. It determines which assessments will be asked, which profile properties will be set, and how the gathered information is translated into policy guidelines. All assessments in the profile object should be completed by the user in order to determine a suitable policy.","title":"How it works"},{"location":"common_scenarios/suitability_profiler/#outputs","text":"At the end of an assessment, the InvestSuite API returns an output. The client can use the outputs in the profile to determine the right investing strategy for the user. The formula on how to calculate the output is determined by the client in each questionnaire, which means that there are no customisation constraints. The same is true for the profiler formula that calculates the final result based on the assessment and property values outputs. Questions in an assessment do not all have to contribute to the eventual output. For example, in the case of a risk profile assessment, the birth date of the user is a required parameter in order to determine whether the user is old enough to open an investment account, but it does not influence the risk score.","title":"Outputs"},{"location":"common_scenarios/suitability_profiler/#assessment-flow","text":"Because there can be logic jumps in the question order of an assessment (and the next question can depend on the previous answers), only the next question to be asked and previously answered questions are given in each assessment response. After an answer is submitted, Investsuite immediately stores it in the suitability profile. This way, a user can close the application at any time without losing their progress, and can resume the assessment later.","title":"Assessment flow"},{"location":"common_scenarios/suitability_profiler/#property-values","text":"The profile property values are initialized to a default value upon creation of the profile. This means that when all assessments in the profile are completed, but the user did not yet check the settings of the property values, a policy can already be determined.","title":"Property values"},{"location":"common_scenarios/suitability_profiler/#create-profile","text":"When a user is created, it is possible to create a profile with the user ID. To create a profile for a user, a user ID and profiler ID are required. The user ID is the ID that is used by InvestSuite to uniquely identify the user. You can find the user ID by querying the User collection GET /users/?query=\u2026 , see the Search users section for more information. The profiler ID identifies the profiler that will be used as template for the profile. This profiler is specific to the customer and is designed and configured together with InvestSuite. This profiler ID will be given to the customer after configuration. Let's try it out and create a profile for a specific user_id and profiler_id . HTTP curl POST /suitability-profiler/profiles/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"profiler_id\" : \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"profiler_id\": \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\", \"user_id\": \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\", }' Field Description Data type Example Required profiler_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^X[0-9A-HJKMNP-TV-Z]{26}\\Z X01ARZ3NDEKTSV4RRFFQ69G5FAV yes user_id The user ID of the person that this profile is for. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body \"N01ARZ3NDEKTSV4RRFFQ69G5FAV\" The response contains the plain profile ID. This profile_id should be used in the url path of further requests.","title":"Create profile"},{"location":"common_scenarios/suitability_profiler/#conduct-an-assessment","text":"When a profile is created for a user, we can start conducting the assessments in order to complete the profile. Each assessment is linked to a questionnaire, that determines what the assessment looks like. This questionnaire's external_id in combination with the ID of the created profile uniquely determine an assessment. These questionnaire IDs will be given to the customer after configuration. Let us give an example of how to retrieve an assessment. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile that this assessment is for. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes questionnaire_external_id The external ID of the questionnaire that this assessment is based on. string ^.{1,64}$ DUMMY-External-ID yes Response body { \"description\" : { \"en-US\" : \"Balancing risk and reward\" }, \"sections\" : [ { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Investment Goals\" , }, \"question_count\" : 10 , }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, \"title\" : { \"en-US\" : \"Risk profiling\" } } Now that we have retrieved the assessment, the assessing can begin. Conducting an assessment is done by asking a question to the user, submitting the answer to InvestSuite, receiving the next question to ask from InvestSuite, asking that question to the user, and so on until the assessment is completed. An assessment will have a status COMPLETED and show a result when all questions are answered. When there are still questions to be answered, the assessment has a status IN_PROGRESS and contains a next question to ask. After receiving an answer from the user, the answer is submitted to InvestSuite in order to get the next question. InvestSuite saves the answer immediately and determines the next question. This way, InvestSuite keeps track of and saves the progress of the assessment, so the user can close the application any time and resume the assessment where they left off later. The assessment response will contain the questionnaire's description, title, sections and a status. When the status' type is IN_PROGRESS , it will also contain question , which represents the next question to be asked to the end-user. This is a dummy response of a call to GET /suitability-profiler/profiles/{profile_id}/assessments/{questionnaire_external_id} and the PUT /profiles/{profile_id}/questionnaires/{questionnaire_external_id}/assessment/questions/{question_id}/answer for submitting an answer. Note: id will always be unique, but for this example placeholders are used. Response body { \"sections\" : [ { \"answered_questions\" : [ { \"form\" : { \"input\" : { \"default_value\" : true , \"type\" : \"BOOLEAN\" }, \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01RRZ3NDDKTSK4RRFFQ69G5FAV\" , } ], \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"title\" : { \"en-us\" : \"Investment Goals\" , } }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"More information\" }, \"body\" : { \"en-US\" : \"Robo Advisor invests in Exchange Traded Funds (ETFs), which are made from underlying instruments like stocks or bonds, and follows an index.\" }, \"index\" : \"1\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, }","title":"Conduct an assessment"},{"location":"common_scenarios/suitability_profiler/#get-a-profile-property-value","text":"When a profile is created for a user, profile property values are initially set to a default value. The user can later on see these properties and change them if they like. For example, if the robo advisor offers the option to only invest in sharia compliant companies, a property value sharia_compliant can initially be set to false. If the user decides that they want to invest in only sharia compliant companies, this property can be set to true. Let's retrieve the property values together. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body { \"ShariaCompliant\" : { \"type\" : \"BOOLEAN\" , \"value\" : false } }","title":"Get a profile property value"},{"location":"common_scenarios/suitability_profiler/#change-a-property-value","text":"The user can adjust its profile property values to make their portfolio more suitable to them. For example, if a user only wants to invest in Sharia compliant instruments, and the tenant supports this option, the profile property value corresponding to this option can be adjusted. Let's look at the below example. HTTP curl PUT /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"type\" : \"BOOLEAN\" , \"value\" : true , } curl --location --request PUT 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"type\": \"BOOLEAN\", \"value\": true, }' Field Description Data type Example Required profile_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes property_key The key of a property in the profile that you want to change. string ShariaCompliant yes type The type of the property ID value string BOOLEAN yes value The value of the property ID Any true yes Note: The type and value are part of the post-data, while the profile_id and property_key are part of the URL When a successful response (status code: 200 OK) comes back, the property was successfully changed in the profile.","title":"Change a property value"},{"location":"common_scenarios/synchronize_portfolios/","text":"Context \u00b6 Synchronizing a portfolio involves taking the holdings and the transactions for a portfolio from your brokerage and custody system and passing them to InvestSuite. As an API client you are responsible for keeping the holdings and transactions in sync between the broker / custody system and the InvestSuite platform. The master data source for both the positions and the transactions is that of the broker / custody provider. For Robo Advisor you copy the holdings and transactions into the InvestSuite system on a recurring bases, for instance once a day. For Self Investor this synchronization should run in near real time. Transactions definition \u00b6 Transactions are a combination of movements that describe an exchange or trade. In the context of investing these transactions relate to funds and securities transferred into, and from an account. A bank or other licensed entity engages in transactions on behalf of invididuals or organizations. The bank therefore uses some sort of an exchange. Each transaction is recorded in a ledger. Transactions can be investment transactions as well as cash transactions. Investment transactions relate to the purchase and sale of securities. Cash transactions mainly describe a deposit of cash in the portfolio, or a divestment. Other forms of cash transactions are those with respect to fees and taxes. A third important of set of transactions consider corporate action such as for instance a stock split or distribution of dividends. Holdings definition \u00b6 Holdings are positions in a portfolio. Holdings are the assets out of which a portfolo is composed. Holdings can be either investment products or cash holdings. Cash holdings are expressed in their currency. Example: { \"$USD\" : 12000 , \"US92189F1066\" : 127 , \"US3160923039\" : 57 , \"US3160928731\" : 398 } Send transaction \u00b6 Transactions are synchronized to calculate the performance and return of a portfolio, to report to the customer, and to monitor the status of some transactions for instance to exchange if a BUY transaction is pending , executed or settled . For Robo Advisor it is usually sufficient to synchronize transactions on a daily bases. For Self Investor synchronization it is required to notify InvestSuite in realtime. To facilitate this, as an alternative to using the InvestSuite API REST interfaces you can send commands to a (Kafka) message broker. Reach out if you wish to discuss this setup. The specification for the Transaction entity is more extensive than described below. For the full specification please refer to the API specifications documentation . Field Description Data type Example Required external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in the client's system to identify this entity. This field is not checked for uniqueness. string <= 64 characters your-object-id no order_type Defines for orders if it is a market or a limit order. Enum(\"MARKET\",\"LIMIT\") MARKET no movements A list of movements that constitute this transaction. A transaction always consists of at least 1 movement. Typical movements include: cash deposit or withdrawal (1 cash movement), equity order purchase (1 cash movement, 1 share movement, and optionally a third movement for execution costs), period fee payment (1 cash movement). object yes movements->type Type of the movement. This enumerator includes all supported movement types that can occur in a transaction. Enum(\"CASH_DEPOSIT\", \"CASH_DIVIDEND\", \"CASH_WITHDRAWAL\", \"COUPON\", \"BUY\", \"SELL\", \"CORPORATE_ACTION_IN\", \"CORPORATE_ACTION_OUT\", \"REVERSE_STOCK_SPLIT\", \"STOCK_DIVIDEND\", \"STOCK_SPLIT\", \"TRANSFER_IN\", \"TRANSFER_OUT\", \"CUSTODY_FEE\", \"INSTRUMENT_ENTRY_EXIT_FEE\", \"MANAGEMENT_FEE\", \"OTHER_FEE\", \"OTHER_TAX\", \"SERVICE_ENTRY_EXIT_FEE\", \"TRANSACTION_FEE\", \"WITHHOLDING_TAX\") BUY yes movements->trade_type Indicate if a movement is cancelled or rebook, particularly applicable to cash movements for dividends. enum(\"CANCEL\", \"REBOOK\", \"INSTRUMENT_CHANGE\", \"CORRECTION\") REBOOK no movements->status The status of the movement. Movement are in final state e.g. EXECUTED, or in progress e.g. PLANNED, SETTLED, NOT_EXECUTED... Enum(\"PLANNED\", \"PENDING\", \"PLACED\", \"EXECUTED\", \"SETTLED\", \"NOT_EXECUTED\", \"EXPIRED\", \"CANCELLED\") SETTLED yes movements->datetime The date and time on which the movement was registered. date-time 2025-06-04T15:23:15.328252+00:00 yes movements->instrument_id Identifier of the instrument involved in this movement. \u2018$\u2019 prefix in case of a cash movement where the instrumentId is a currency. ISIN in case of a securities movement where the instrumentId refers to an actual instrument. String ^(\\$[A-Z]{3}|[A-Z]{2}[A-Z0-9]{9}[0-9]|[A-Z]{1 US4642865251 yes movements->quantity_type The type in which the quantity is expressed. Amongst others currency and funds quantities are expressed as AMOUNT . Equity and other sorts of securities as SHARES . Enum(\"SHARES\", \"AMOUNT\") SHARES yes movements->quantity Quantity of the movement expressed in units of the instrument. If the instrument_id is a cash type such as $USD, the quantity indicates a cash amount. If the instrument_id is an investible product such as IE0031442068, the quantity indicates a share amount. Fractional amounts are supported for instruments such as ETFs.Quantity is positive when adding a quantity of an instrument to the portfolio and negative when removing a quantity of an instrument from a portfolio. number 5 yes movements->unit_price The instrument's price per unit expressed in the instrument's currency in case the instrument is a security. For the cash movement of a cash dividend to store the dividend value. number 1000 no movement->description An optional description for this movement. This string can contain any additional details of the movement type and can be set by the client. string STAMP_DUTY no movement->reference_instrument_id Optional instrument ID of the portfolio position that this movement relates to. For example, if this Movement represents a cash dividend, this field may refer to the instrument in the portfolio that generated that dividend. string US4642865251 no Some common transactions to pass to InvestSuite are: Buy transactions Sell transactions Cash movements Costs and charges Dividend payments 1. Buy transactions \u00b6 A buy transaction describes the properties of a buy order. It consists of three movements: - one describing the instrument to be purchased at the time of placement, - a second describing the instrument purchased at the time of settlemet, - a third the amount that was transferred from the cash account to buy the instrument. Request Response (body) POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : 1 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : 1 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } 2. Sell transactions \u00b6 A sell transaction describes the properties a sell order. It is the reverse of a buy transaction It consists of three movements: - one describing the instrument to be disposed as planned, - a second when the sell instruction was settled, - the third the amount to be transferred when the instrument is traded. Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } 3. Cash movements \u00b6 Transactions that hold cash movements respresent to InvestSuite movements on the investment account. That account is usually different from the current account, which is the account that the client holds with the bank. We expect in other words transactions on your brokerage system, not from your core banking platform. Below is an example for a cash deposit. For a cash withdrawal use \"type\": \"CASH_WITHDRAWAL\" and \"quantity\": -500 . Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 500.0 , } ] } { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 500.0 , } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } 4. Costs and charges \u00b6 Costs and charges come in various forms. There are items in the type Enum that define the sort of charge. For instance for management fees, custody fees, and transaction fees. For other types use \"type\": \"OTHER_FEE\" and \"description\": \"{string}\" . Same goes for taxes. For withholding tax paid to the governement use \"type\": \"WITHHOLDING_TAX\" . For other sorts of taxes charged use \"type\": \"OTHER_TAX\" and \"description\": \"{string}\" . Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"14031738752\" , \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : -0.1035719 , } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Example WITHHOLDING_TAX : Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"14031738752\" , \"type\" : \"WITHHOLDING_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : -0.1035719 , } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"type\" : \"WITHHOLDING_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } 5. Corporate actions \u00b6 Corporate actions are changes invoked by a company that affect its stakeholders in particular share and bond holders. They come in various forms and shapes: dividends, stock splits, reverse stock splits ... and are usually approved by a board of directors. Sometimes even by the shareholders who can voluntarily submit a vote. Corporate actions are registered as transactions as they will lead to movements such as issuing dividends. Note the use of reference_instrument_id to reference the portfolio position the corporate action refers to. Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ] } { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ], \"id\" : \"T01FGZK41MJ4NJXKZ27VJC0HGS9\" , \"creation_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update transaction status \u00b6 After a transaction is posted in its initial state, in subsequent phases the status of the transaction changes. Most (common) transactions go from PLANNED to PENDING to PLACED to EXECUTED to SETTLED . In case an error occurs or a stakeholder intervenes transactions can end up in a NOT_EXECUTED , EXPIRED or CANCELLED state. To change the status of a transaction you issue a PATCH request. Request Response (body) PATCH /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/T01FGZK41MJ4NJXKZ27VJC0HGS9/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ] } { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ], \"id\" : \"T01FGZK41MJ4NJXKZ27VJC0HGS9\" , \"creation_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Cancel a placed order \u00b6 To turn a PLACED into a cancelled one, you patch the movements of the transactions with the current PLACED movement to a new movement with status CANCELLED . Given a current status with a PLACED order: { \"id\" : \"T01G53YQW6E5RH7CAOBFUSCATED\" , \"external_id\" : \"my-transaction-1\" , \"portfolio_id\" : \"P01G511AYA61Z3Q14OBFUSCATED\" , \"portfolio_currency\" : \"USD\" , \"type\" : \"ORDER\" , \"order_type\" : \"LIMIT\" , \"primary_movement\" : { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, \"movements\" : [ { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } To register a cancellation you add one movement to the current list of movements. Nothing else should be updated, so the payload is as follows. Note that you have to send the existing movements in this list as well , because they would be lost otherwise: Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Info Notice that the PLACED and CANCELLED movements are identical, apart from their status and their datetime. The datetime is the time the order was PLACED and CANCELLED respectively. Update portfolio holdings \u00b6 To update the holdings you patch the portfolio. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '\"portfolo\": { \\ \"$USD\": 208.086729, \\ \"US78464A6644\": 18.78, \\ \"US4642886612\": 9.2243, \\ \"US46137V2410\": 9, \\ \"US3160923039\": 3, \\ \"US3160928731\": 10, \\ \"US97717W5215\": 6, \\ \"US4642861458\": 4, \\ \"US46429B2676\": 45.146, \\ \"US46434V7617\": 9, \\ \"US4642865251\": 7.6828, \\ \"US46434V4234\": 3 \\ }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" }","title":"Synchronize portfolios"},{"location":"common_scenarios/synchronize_portfolios/#context","text":"Synchronizing a portfolio involves taking the holdings and the transactions for a portfolio from your brokerage and custody system and passing them to InvestSuite. As an API client you are responsible for keeping the holdings and transactions in sync between the broker / custody system and the InvestSuite platform. The master data source for both the positions and the transactions is that of the broker / custody provider. For Robo Advisor you copy the holdings and transactions into the InvestSuite system on a recurring bases, for instance once a day. For Self Investor this synchronization should run in near real time.","title":"Context"},{"location":"common_scenarios/synchronize_portfolios/#transactions-definition","text":"Transactions are a combination of movements that describe an exchange or trade. In the context of investing these transactions relate to funds and securities transferred into, and from an account. A bank or other licensed entity engages in transactions on behalf of invididuals or organizations. The bank therefore uses some sort of an exchange. Each transaction is recorded in a ledger. Transactions can be investment transactions as well as cash transactions. Investment transactions relate to the purchase and sale of securities. Cash transactions mainly describe a deposit of cash in the portfolio, or a divestment. Other forms of cash transactions are those with respect to fees and taxes. A third important of set of transactions consider corporate action such as for instance a stock split or distribution of dividends.","title":"Transactions definition"},{"location":"common_scenarios/synchronize_portfolios/#holdings-definition","text":"Holdings are positions in a portfolio. Holdings are the assets out of which a portfolo is composed. Holdings can be either investment products or cash holdings. Cash holdings are expressed in their currency. Example: { \"$USD\" : 12000 , \"US92189F1066\" : 127 , \"US3160923039\" : 57 , \"US3160928731\" : 398 }","title":"Holdings definition"},{"location":"common_scenarios/synchronize_portfolios/#send-transaction","text":"Transactions are synchronized to calculate the performance and return of a portfolio, to report to the customer, and to monitor the status of some transactions for instance to exchange if a BUY transaction is pending , executed or settled . For Robo Advisor it is usually sufficient to synchronize transactions on a daily bases. For Self Investor synchronization it is required to notify InvestSuite in realtime. To facilitate this, as an alternative to using the InvestSuite API REST interfaces you can send commands to a (Kafka) message broker. Reach out if you wish to discuss this setup. The specification for the Transaction entity is more extensive than described below. For the full specification please refer to the API specifications documentation . Field Description Data type Example Required external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in the client's system to identify this entity. This field is not checked for uniqueness. string <= 64 characters your-object-id no order_type Defines for orders if it is a market or a limit order. Enum(\"MARKET\",\"LIMIT\") MARKET no movements A list of movements that constitute this transaction. A transaction always consists of at least 1 movement. Typical movements include: cash deposit or withdrawal (1 cash movement), equity order purchase (1 cash movement, 1 share movement, and optionally a third movement for execution costs), period fee payment (1 cash movement). object yes movements->type Type of the movement. This enumerator includes all supported movement types that can occur in a transaction. Enum(\"CASH_DEPOSIT\", \"CASH_DIVIDEND\", \"CASH_WITHDRAWAL\", \"COUPON\", \"BUY\", \"SELL\", \"CORPORATE_ACTION_IN\", \"CORPORATE_ACTION_OUT\", \"REVERSE_STOCK_SPLIT\", \"STOCK_DIVIDEND\", \"STOCK_SPLIT\", \"TRANSFER_IN\", \"TRANSFER_OUT\", \"CUSTODY_FEE\", \"INSTRUMENT_ENTRY_EXIT_FEE\", \"MANAGEMENT_FEE\", \"OTHER_FEE\", \"OTHER_TAX\", \"SERVICE_ENTRY_EXIT_FEE\", \"TRANSACTION_FEE\", \"WITHHOLDING_TAX\") BUY yes movements->trade_type Indicate if a movement is cancelled or rebook, particularly applicable to cash movements for dividends. enum(\"CANCEL\", \"REBOOK\", \"INSTRUMENT_CHANGE\", \"CORRECTION\") REBOOK no movements->status The status of the movement. Movement are in final state e.g. EXECUTED, or in progress e.g. PLANNED, SETTLED, NOT_EXECUTED... Enum(\"PLANNED\", \"PENDING\", \"PLACED\", \"EXECUTED\", \"SETTLED\", \"NOT_EXECUTED\", \"EXPIRED\", \"CANCELLED\") SETTLED yes movements->datetime The date and time on which the movement was registered. date-time 2025-06-04T15:23:15.328252+00:00 yes movements->instrument_id Identifier of the instrument involved in this movement. \u2018$\u2019 prefix in case of a cash movement where the instrumentId is a currency. ISIN in case of a securities movement where the instrumentId refers to an actual instrument. String ^(\\$[A-Z]{3}|[A-Z]{2}[A-Z0-9]{9}[0-9]|[A-Z]{1 US4642865251 yes movements->quantity_type The type in which the quantity is expressed. Amongst others currency and funds quantities are expressed as AMOUNT . Equity and other sorts of securities as SHARES . Enum(\"SHARES\", \"AMOUNT\") SHARES yes movements->quantity Quantity of the movement expressed in units of the instrument. If the instrument_id is a cash type such as $USD, the quantity indicates a cash amount. If the instrument_id is an investible product such as IE0031442068, the quantity indicates a share amount. Fractional amounts are supported for instruments such as ETFs.Quantity is positive when adding a quantity of an instrument to the portfolio and negative when removing a quantity of an instrument from a portfolio. number 5 yes movements->unit_price The instrument's price per unit expressed in the instrument's currency in case the instrument is a security. For the cash movement of a cash dividend to store the dividend value. number 1000 no movement->description An optional description for this movement. This string can contain any additional details of the movement type and can be set by the client. string STAMP_DUTY no movement->reference_instrument_id Optional instrument ID of the portfolio position that this movement relates to. For example, if this Movement represents a cash dividend, this field may refer to the instrument in the portfolio that generated that dividend. string US4642865251 no Some common transactions to pass to InvestSuite are: Buy transactions Sell transactions Cash movements Costs and charges Dividend payments","title":"Send transaction"},{"location":"common_scenarios/synchronize_portfolios/#1-buy-transactions","text":"A buy transaction describes the properties of a buy order. It consists of three movements: - one describing the instrument to be purchased at the time of placement, - a second describing the instrument purchased at the time of settlemet, - a third the amount that was transferred from the cash account to buy the instrument. Request Response (body) POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : 1 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : 1 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"1. Buy transactions"},{"location":"common_scenarios/synchronize_portfolios/#2-sell-transactions","text":"A sell transaction describes the properties a sell order. It is the reverse of a buy transaction It consists of three movements: - one describing the instrument to be disposed as planned, - a second when the sell instruction was settled, - the third the amount to be transferred when the instrument is traded. Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"US78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:49:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"2. Sell transactions"},{"location":"common_scenarios/synchronize_portfolios/#3-cash-movements","text":"Transactions that hold cash movements respresent to InvestSuite movements on the investment account. That account is usually different from the current account, which is the account that the client holds with the bank. We expect in other words transactions on your brokerage system, not from your core banking platform. Below is an example for a cash deposit. For a cash withdrawal use \"type\": \"CASH_WITHDRAWAL\" and \"quantity\": -500 . Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 500.0 , } ] } { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 500.0 , } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"3. Cash movements"},{"location":"common_scenarios/synchronize_portfolios/#4-costs-and-charges","text":"Costs and charges come in various forms. There are items in the type Enum that define the sort of charge. For instance for management fees, custody fees, and transaction fees. For other types use \"type\": \"OTHER_FEE\" and \"description\": \"{string}\" . Same goes for taxes. For withholding tax paid to the governement use \"type\": \"WITHHOLDING_TAX\" . For other sorts of taxes charged use \"type\": \"OTHER_TAX\" and \"description\": \"{string}\" . Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"14031738752\" , \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : -0.1035719 , } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Example WITHHOLDING_TAX : Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"14031738752\" , \"type\" : \"WITHHOLDING_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity_type\" : \"AMOUNT\" , \"quantity\" : -0.1035719 , } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"type\" : \"WITHHOLDING_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"4. Costs and charges"},{"location":"common_scenarios/synchronize_portfolios/#5-corporate-actions","text":"Corporate actions are changes invoked by a company that affect its stakeholders in particular share and bond holders. They come in various forms and shapes: dividends, stock splits, reverse stock splits ... and are usually approved by a board of directors. Sometimes even by the shareholders who can voluntarily submit a vote. Corporate actions are registered as transactions as they will lead to movements such as issuing dividends. Note the use of reference_instrument_id to reference the portfolio position the corporate action refers to. Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ] } { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ], \"id\" : \"T01FGZK41MJ4NJXKZ27VJC0HGS9\" , \"creation_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"5. Corporate actions"},{"location":"common_scenarios/synchronize_portfolios/#update-transaction-status","text":"After a transaction is posted in its initial state, in subsequent phases the status of the transaction changes. Most (common) transactions go from PLANNED to PENDING to PLACED to EXECUTED to SETTLED . In case an error occurs or a stakeholder intervenes transactions can end up in a NOT_EXECUTED , EXPIRED or CANCELLED state. To change the status of a transaction you issue a PATCH request. Request Response (body) PATCH /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/T01FGZK41MJ4NJXKZ27VJC0HGS9/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ] } { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"US78464A6727\" , } ], \"id\" : \"T01FGZK41MJ4NJXKZ27VJC0HGS9\" , \"creation_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"Update transaction status"},{"location":"common_scenarios/synchronize_portfolios/#cancel-a-placed-order","text":"To turn a PLACED into a cancelled one, you patch the movements of the transactions with the current PLACED movement to a new movement with status CANCELLED . Given a current status with a PLACED order: { \"id\" : \"T01G53YQW6E5RH7CAOBFUSCATED\" , \"external_id\" : \"my-transaction-1\" , \"portfolio_id\" : \"P01G511AYA61Z3Q14OBFUSCATED\" , \"portfolio_currency\" : \"USD\" , \"type\" : \"ORDER\" , \"order_type\" : \"LIMIT\" , \"primary_movement\" : { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, \"movements\" : [ { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } To register a cancellation you add one movement to the current list of movements. Nothing else should be updated, so the payload is as follows. Note that you have to send the existing movements in this list as well , because they would be lost otherwise: Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"US2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Info Notice that the PLACED and CANCELLED movements are identical, apart from their status and their datetime. The datetime is the time the order was PLACED and CANCELLED respectively.","title":"Cancel a placed order"},{"location":"common_scenarios/synchronize_portfolios/#update-portfolio-holdings","text":"To update the holdings you patch the portfolio. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '\"portfolo\": { \\ \"$USD\": 208.086729, \\ \"US78464A6644\": 18.78, \\ \"US4642886612\": 9.2243, \\ \"US46137V2410\": 9, \\ \"US3160923039\": 3, \\ \"US3160928731\": 10, \\ \"US97717W5215\": 6, \\ \"US4642861458\": 4, \\ \"US46429B2676\": 45.146, \\ \"US46434V7617\": 9, \\ \"US4642865251\": 7.6828, \\ \"US46434V4234\": 3 \\ }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" }","title":"Update portfolio holdings"},{"location":"common_scenarios/users/","text":"Create a user \u00b6 Request Response (body) POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { ba n k_accou nt _ nu mber : \"BE01234567891234\" , ba n k_accou nt _ t ype : \"IBAN\" , ba n k_id : \"IDQMIE2D\" }, \"language\" : \"en-US\" } { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Get a user \u00b6 Add the InvestSuite ID to the path to retrieve a user object. Request Response (body) GET /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"readable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"modifiable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"_embedded\" : {}, \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"brokerage_user_id\" : \"12345678\" , \"idp_user_id\" : \"user_idp_identity\" , \"language\" : \"en-US\" } Change (\"patch\") fields \u00b6 Given the right permissions you can update any object issuing a PATCH request. Info Objects in the InvestSuite system are immutable. Every change leads to a new version so that a log exists of who performed which change at which moment. The version number is returned alongside other metadata fields. Use the Admin Console to access this log and to view diffs between versions. Screenshot Admin Console Request Response (body) PATCH /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"language\" : \"be-NL\" } { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Warning You cannot update any user field. The phone and email fields can only be set once. You can update these fields: external_id , first_name , last_name , counter_account , language Search \u00b6 You can query each entity collection with the query parameter e.g. GET /users/?query=\u2026 . Learn more in the Handling collection responses section. Request Response (body) GET /users ?query=email+eq+'jane*' HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Delete a user \u00b6 Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : true , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"Manage Users"},{"location":"common_scenarios/users/#create-a-user","text":"Request Response (body) POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { ba n k_accou nt _ nu mber : \"BE01234567891234\" , ba n k_accou nt _ t ype : \"IBAN\" , ba n k_id : \"IDQMIE2D\" }, \"language\" : \"en-US\" } { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"Create a user"},{"location":"common_scenarios/users/#get-a-user","text":"Add the InvestSuite ID to the path to retrieve a user object. Request Response (body) GET /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"readable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"modifiable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"_embedded\" : {}, \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"brokerage_user_id\" : \"12345678\" , \"idp_user_id\" : \"user_idp_identity\" , \"language\" : \"en-US\" }","title":"Get a user"},{"location":"common_scenarios/users/#change-patch-fields","text":"Given the right permissions you can update any object issuing a PATCH request. Info Objects in the InvestSuite system are immutable. Every change leads to a new version so that a log exists of who performed which change at which moment. The version number is returned alongside other metadata fields. Use the Admin Console to access this log and to view diffs between versions. Screenshot Admin Console Request Response (body) PATCH /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"language\" : \"be-NL\" } { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Warning You cannot update any user field. The phone and email fields can only be set once. You can update these fields: external_id , first_name , last_name , counter_account , language","title":"Change (\"patch\") fields"},{"location":"common_scenarios/users/#search","text":"You can query each entity collection with the query parameter e.g. GET /users/?query=\u2026 . Learn more in the Handling collection responses section. Request Response (body) GET /users ?query=email+eq+'jane*' HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"Search"},{"location":"common_scenarios/users/#delete-a-user","text":"Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : true , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"Delete a user"},{"location":"getting_started/glossary/","text":"Client \u00b6 You, the bank, the customer of InvestSuite. Customer \u00b6 The customer and the user are synonymous for your (the bank's) customer, the end-user. This is mostly used in functional/business contexts. User \u00b6 The User is synonymous for Customer, but is typically used in technical contexts. The User is the owner of one or more Portfolios Access to InvestSuite products is controlled on a User level within the InvestSuite console Refer to Creating a User . Account (of a User) \u00b6 A counter account that is funded in case of a withdrawal instruction. An Account is owned by a User. Refer to Account Initiation . Portfolio (of a User) \u00b6 An (investment) portfolio is a collection of financial assets grouped with the aim of earning a profit. These assets are referred to as holdings . Holdings are positions in a portfolio. Holdings are the assets out of which a portfolio is composed. Holdings can either be investment products or cash holdings . Cash holdings are expressed in their currency . Alongside holdings, portfolio objects contain general info (eg. portfolio name like 'My Retirement Portfolio', for displaying to the user), and configuration settings to manage the portfolio (eg. a boolean to indicate that trading is allowed, the risk profile the customer had set for the portfolio). A Portfolio is owned by a User. Refer to Create a Portfolio . Accounts (of a Portfolio) \u00b6 Refers to Brokerage Account (Counter) Bank Account Risk Profile (of a Portfolio) \u00b6 See Suitability Profile Suitability Profile (of a Portfolio) \u00b6 We refer to a Suitablity Profile (linked to a Portfolio) as either the result of an Appropriateness Test, for Self Investor the result of a Suitability Test (for an advisory or discretionary mandate), for Robo Advisor Refer to Suitability Profiler . Transaction (of a Portfolio) \u00b6 We define the following types of transactions: Order transaction: one or more trades (= securities movements) Corporate Action transaction, eg. stock split or distribution of dividends, can but does not need to include one or more trades (= securities movements) Cash Transfer transaction: a deposit of cash in the portfolio, a divestment, fees and taxes Security Transfer transaction: at least 1 trade (= securities movement) Administrative transaction Order (of a Portfolio) \u00b6 An order sent to the market, resulting in one or more (investment) transactions Optimization (of a Portfolio) \u00b6 The result of an Optimizer run Refer to Optimize a portfolio .","title":"Glossary"},{"location":"getting_started/glossary/#client","text":"You, the bank, the customer of InvestSuite.","title":"Client"},{"location":"getting_started/glossary/#customer","text":"The customer and the user are synonymous for your (the bank's) customer, the end-user. This is mostly used in functional/business contexts.","title":"Customer"},{"location":"getting_started/glossary/#user","text":"The User is synonymous for Customer, but is typically used in technical contexts. The User is the owner of one or more Portfolios Access to InvestSuite products is controlled on a User level within the InvestSuite console Refer to Creating a User .","title":"User"},{"location":"getting_started/glossary/#account-of-a-user","text":"A counter account that is funded in case of a withdrawal instruction. An Account is owned by a User. Refer to Account Initiation .","title":"Account (of a User)"},{"location":"getting_started/glossary/#portfolio-of-a-user","text":"An (investment) portfolio is a collection of financial assets grouped with the aim of earning a profit. These assets are referred to as holdings . Holdings are positions in a portfolio. Holdings are the assets out of which a portfolio is composed. Holdings can either be investment products or cash holdings . Cash holdings are expressed in their currency . Alongside holdings, portfolio objects contain general info (eg. portfolio name like 'My Retirement Portfolio', for displaying to the user), and configuration settings to manage the portfolio (eg. a boolean to indicate that trading is allowed, the risk profile the customer had set for the portfolio). A Portfolio is owned by a User. Refer to Create a Portfolio .","title":"Portfolio (of a User)"},{"location":"getting_started/glossary/#accounts-of-a-portfolio","text":"Refers to Brokerage Account (Counter) Bank Account","title":"Accounts (of a Portfolio)"},{"location":"getting_started/glossary/#risk-profile-of-a-portfolio","text":"See Suitability Profile","title":"Risk Profile (of a Portfolio)"},{"location":"getting_started/glossary/#suitability-profile-of-a-portfolio","text":"We refer to a Suitablity Profile (linked to a Portfolio) as either the result of an Appropriateness Test, for Self Investor the result of a Suitability Test (for an advisory or discretionary mandate), for Robo Advisor Refer to Suitability Profiler .","title":"Suitability Profile (of a Portfolio)"},{"location":"getting_started/glossary/#transaction-of-a-portfolio","text":"We define the following types of transactions: Order transaction: one or more trades (= securities movements) Corporate Action transaction, eg. stock split or distribution of dividends, can but does not need to include one or more trades (= securities movements) Cash Transfer transaction: a deposit of cash in the portfolio, a divestment, fees and taxes Security Transfer transaction: at least 1 trade (= securities movement) Administrative transaction","title":"Transaction (of a Portfolio)"},{"location":"getting_started/glossary/#order-of-a-portfolio","text":"An order sent to the market, resulting in one or more (investment) transactions","title":"Order (of a Portfolio)"},{"location":"getting_started/glossary/#optimization-of-a-portfolio","text":"The result of an Optimizer run Refer to Optimize a portfolio .","title":"Optimization (of a Portfolio)"},{"location":"getting_started/product_range/","text":"","title":"Product Range"},{"location":"getting_started/solution.architecture/","text":"","title":"Architecture"},{"location":"robo/introduction/","text":"This section handles topics that are specific to Robo Advisor.","title":"Introduction"},{"location":"robo/quick_start/","text":"Get acquainted with the InvestSuite API. This quick start takes you through the typical steps to integrate with InvestSuite's Optimizer and Robo Advisor products. Below sequence diagram describes these basic steps. As a quick start, we will perform these steps interactively. Hint This exercise demonstrates the flow for Robo Advisor. The flow for Self Investor is the same. The only difference is that for Self Investor you do not get to call the optimizer for order recommendations. Integration flow \u00b6 Let's now get familiar with the API by simulating what is documented in the sequence diagram. These will be the steps: Create a user by invoking POST /users/ . Create a portfolio by invoking POST /portfolios/ . Update the portfolio with the latest portfolio snapshot (initially only a cash holding). Get order recommendations as the result of an optimization, based on the holdings and portfolio settings. Post the transactions you get back from your broker. Repeat steps 4 - 7. Note As the sequence diagram reflects it is your role to act as the middle layer between InvestSuite and the broker (unless agreed differently during a common analyses). This means you get the orders and cash movement instructions via InvestSuite and place them with the broker. In the opposite direction, you provide to InvestSuite the holdings and the transactions from the broker. Since this is a simulation however broker integration is not relevant. Instead we create a so-called virtual portfolio . This is a portfolio funded with paper money , as opposed to real money. Steps \u00b6 1. Create a user \u00b6 Create a user for your customer so that in the next step you can define that user as owner of a portfolio. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } curl --location --request POST 'https://api.sandbox.investsuite.com/users/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"ashok-kumar-1\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\" }' Response body { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } Hint Copy the User ID from the Response Body to use in the next step. 2. Create a portfolio \u00b6 To optimize a portfolio that portfolio has to reference a policy , which is an investment strategy defined by the bank. Such strategy holds the constraints for the optimization algorithm to take into account when rendering order recommendations, for instance the minimum number of stocks within a certain sector or region. Select the id from the first policy returned by requesting GET /policies/ . HTTP curl GET /robo-advisor/policies/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/robo-advisor/policies/' \\ --H 'Authorization: Bearer {access_token_string}' Once you have obtained the policy ID you can create a portfolio. HTTP curl POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , } }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"base_currency\":\"USD\", \"config\":{ \"manager\":\"ROBO_ADVISOR_DISCRETIONARY\", \"manager_version\":1 \"manager_settings\": { \"policy_id\":\"Y01EF46X9XB437JS4678X0K529C\", } }, \"external_id\":\"your-bank-portfolio-1\", \"money_type\":\"PAPER_MONEY\", \"owned_by_user_id\":\"U01F5WYKRRXZHXT9S6FF1JZNJVZ\", }' Take a look at the request body... You create a portfolio under a discretionary mandate: config.manager=\"ROBO_ADVISOR_DISCRETIONARY\" . This sort of mandate comprehends that the portfolio is fully managed by the Robo Advisor, without the need for your customer to intervene. Making it a \u201cvirtual portfolio\u201d makes that paper money is used to simulate trades: \"money_type\": \"PAPER_MONEY\" . You assign the user you created in step 1 as owner: \"owned_by_user_id\": \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" . Selecting the applicable investment policy as management setting is required for the Robo Advisor's optimizer algorithm: config.manager_settings.policy_id=\"Y01EF46X9XB437JS4678X0K529C\" . Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Copy the Portfolio ID from the Response Body to use in the next step. 3. Fund the portfolio \u00b6 Add an initial amount for the Robo Advisor to invest the portfolio you just created. To indicate a portfolio's holding to be the cash holding use the currency abbreviation defined in the ISO international standard 4217, e.g. AUD, and prefix it with the $-sign so $AUD . The currency to use is the one defined in the portfolio field base_currency . HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000 } }' Alongside the updated holdings with the cash position, register the cash deposit transaction. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 10000.0 , } ], } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\", \"movements\": [ { \"external_id\": \"13891096285\", \"type\": \"CASH_DEPOSIT\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-27T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 10000.0, \"quantity_type\": \"AMOUNT\" } ], }' Response body { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"type\" : \"CASH_TRANSFER\" , \"order_type\" : null , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"sub_type\" : \"Cash Deposit\" , \"description\" : null , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"instrument_name\" : null , \"quantity\" : 1 } ], \"description\" : null , \"id\" : \"T01FGNG33GFJK5GCN4KZSPZYMFF\" , \"creation_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"status\" : \"COMPLETED\" } 4. Recommended orders \u00b6 Given you assigned a policy and an initial amount to the portfolio as part of the two previous steps, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , } 5. Post transactions \u00b6 Simulate buy transactions for the orders the optimizer recommended in step 4 above, see portfolio_update.orders in the response body. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} [ { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"US4642886612\" , \"quantity\" : 2 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 125 , } ] }, { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.930643+00:00\" , \"instrument_id\" : \"US4642863926\" , \"quantity\" : 3 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 350.50 , } ] } ] curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '[ { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"US4642886612\", \"quantity\": 2, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 125, } ] }, { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-24T06:15:01.930643+00:00\", \"instrument_id\": \"US4642863926\", \"quantity\": 3, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 350.50, } ] } ]' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ 6. Update holdings \u00b6 Next update the portfolio to hold the acquired positions. This will trigger the optimizer anew. In principle the portfolio is now in line with the investment policy used by the optimizer returning no recommendations. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"holdings\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '\"portfolio\": { \\ \"$USD\": 208.086729, \\ \"US78464A6644\": 18.78, \\ \"US4642886612\": 9.2243, \\ \"US46137V2410\": 9, \\ \"US3160923039\": 3, \\ \"US3160928731\": 10, \\ \"US97717W5215\": 6, \\ \"US4642861458\": 4, \\ \"US46429B2676\": 45.146, \\ \"US46434V7617\": 9, \\ \"US4642865251\": 7.6828, \\ \"US46434V4234\": 3 \\ }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Now that there is an invested portfolio you can view the performance and a Monte Carlo simulation to display future performance, see how by taking a look at the API specification. That\u2019s it. If you made it so far well done! \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f Next up, a bit more detail.","title":"Quick start"},{"location":"robo/quick_start/#integration-flow","text":"Let's now get familiar with the API by simulating what is documented in the sequence diagram. These will be the steps: Create a user by invoking POST /users/ . Create a portfolio by invoking POST /portfolios/ . Update the portfolio with the latest portfolio snapshot (initially only a cash holding). Get order recommendations as the result of an optimization, based on the holdings and portfolio settings. Post the transactions you get back from your broker. Repeat steps 4 - 7. Note As the sequence diagram reflects it is your role to act as the middle layer between InvestSuite and the broker (unless agreed differently during a common analyses). This means you get the orders and cash movement instructions via InvestSuite and place them with the broker. In the opposite direction, you provide to InvestSuite the holdings and the transactions from the broker. Since this is a simulation however broker integration is not relevant. Instead we create a so-called virtual portfolio . This is a portfolio funded with paper money , as opposed to real money.","title":"Integration flow"},{"location":"robo/quick_start/#steps","text":"","title":"Steps"},{"location":"robo/quick_start/#1-create-a-user","text":"Create a user for your customer so that in the next step you can define that user as owner of a portfolio. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } curl --location --request POST 'https://api.sandbox.investsuite.com/users/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"ashok-kumar-1\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\" }' Response body { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } Hint Copy the User ID from the Response Body to use in the next step.","title":"1. Create a user"},{"location":"robo/quick_start/#2-create-a-portfolio","text":"To optimize a portfolio that portfolio has to reference a policy , which is an investment strategy defined by the bank. Such strategy holds the constraints for the optimization algorithm to take into account when rendering order recommendations, for instance the minimum number of stocks within a certain sector or region. Select the id from the first policy returned by requesting GET /policies/ . HTTP curl GET /robo-advisor/policies/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/robo-advisor/policies/' \\ --H 'Authorization: Bearer {access_token_string}' Once you have obtained the policy ID you can create a portfolio. HTTP curl POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , } }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"base_currency\":\"USD\", \"config\":{ \"manager\":\"ROBO_ADVISOR_DISCRETIONARY\", \"manager_version\":1 \"manager_settings\": { \"policy_id\":\"Y01EF46X9XB437JS4678X0K529C\", } }, \"external_id\":\"your-bank-portfolio-1\", \"money_type\":\"PAPER_MONEY\", \"owned_by_user_id\":\"U01F5WYKRRXZHXT9S6FF1JZNJVZ\", }' Take a look at the request body... You create a portfolio under a discretionary mandate: config.manager=\"ROBO_ADVISOR_DISCRETIONARY\" . This sort of mandate comprehends that the portfolio is fully managed by the Robo Advisor, without the need for your customer to intervene. Making it a \u201cvirtual portfolio\u201d makes that paper money is used to simulate trades: \"money_type\": \"PAPER_MONEY\" . You assign the user you created in step 1 as owner: \"owned_by_user_id\": \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" . Selecting the applicable investment policy as management setting is required for the Robo Advisor's optimizer algorithm: config.manager_settings.policy_id=\"Y01EF46X9XB437JS4678X0K529C\" . Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Copy the Portfolio ID from the Response Body to use in the next step.","title":"2. Create a portfolio"},{"location":"robo/quick_start/#3-fund-the-portfolio","text":"Add an initial amount for the Robo Advisor to invest the portfolio you just created. To indicate a portfolio's holding to be the cash holding use the currency abbreviation defined in the ISO international standard 4217, e.g. AUD, and prefix it with the $-sign so $AUD . The currency to use is the one defined in the portfolio field base_currency . HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000 } }' Alongside the updated holdings with the cash position, register the cash deposit transaction. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 10000.0 , } ], } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\", \"movements\": [ { \"external_id\": \"13891096285\", \"type\": \"CASH_DEPOSIT\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-27T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 10000.0, \"quantity_type\": \"AMOUNT\" } ], }' Response body { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"type\" : \"CASH_TRANSFER\" , \"order_type\" : null , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"sub_type\" : \"Cash Deposit\" , \"description\" : null , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"instrument_name\" : null , \"quantity\" : 1 } ], \"description\" : null , \"id\" : \"T01FGNG33GFJK5GCN4KZSPZYMFF\" , \"creation_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"status\" : \"COMPLETED\" }","title":"3. Fund the portfolio"},{"location":"robo/quick_start/#4-recommended-orders","text":"Given you assigned a policy and an initial amount to the portfolio as part of the two previous steps, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , }","title":"4. Recommended orders"},{"location":"robo/quick_start/#5-post-transactions","text":"Simulate buy transactions for the orders the optimizer recommended in step 4 above, see portfolio_update.orders in the response body. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} [ { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"US4642886612\" , \"quantity\" : 2 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 125 , } ] }, { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.930643+00:00\" , \"instrument_id\" : \"US4642863926\" , \"quantity\" : 3 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 350.50 , } ] } ] curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '[ { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"US4642886612\", \"quantity\": 2, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 125, } ] }, { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-24T06:15:01.930643+00:00\", \"instrument_id\": \"US4642863926\", \"quantity\": 3, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 350.50, } ] } ]' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/","title":"5. Post transactions"},{"location":"robo/quick_start/#6-update-holdings","text":"Next update the portfolio to hold the acquired positions. This will trigger the optimizer anew. In principle the portfolio is now in line with the investment policy used by the optimizer returning no recommendations. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"holdings\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '\"portfolio\": { \\ \"$USD\": 208.086729, \\ \"US78464A6644\": 18.78, \\ \"US4642886612\": 9.2243, \\ \"US46137V2410\": 9, \\ \"US3160923039\": 3, \\ \"US3160928731\": 10, \\ \"US97717W5215\": 6, \\ \"US4642861458\": 4, \\ \"US46429B2676\": 45.146, \\ \"US46434V7617\": 9, \\ \"US4642865251\": 7.6828, \\ \"US46434V4234\": 3 \\ }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Now that there is an invested portfolio you can view the performance and a Monte Carlo simulation to display future performance, see how by taking a look at the API specification. That\u2019s it. If you made it so far well done! \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f Next up, a bit more detail.","title":"6. Update holdings"},{"location":"robo/run_optimizer/","text":"Context \u00b6 The Optimizer is an essential component of the InvestSuite Robo Advisor. It constructs out of an existing portfolio an optimal portfolio. For this, an algorithm is configured which will suggest a list of orders to be placed with the broker. These orders bring the portfolio in line with the optimal portfolio. The default algorithm underpinning the Optimizer is called iVar . InvestSuite has developed iVar as a human-centric measure of risk. It is a 4th-generation risk measure that addresses the shortcomings of traditional risk measures, with a clear and distinct focus on controlling risk - over maximising return. Next to iVaR, all contemporary risk measures such as volatility, Value-at-Risk and conditional Value-at-Risk are supported. Info What is iVaR? Traditional investment risk measures that are still used today, such as volatility, have historically been chosen because of their simple mathematical properties. They do not work well to describe the risk of real investment portfolios and are not consistent with what end investors perceive as risk. Following the above observations, we developed a new, innovative risk measure which we call InvestSuite Value at Risk (iVaR). Our basic premise is that any instrument or portfolio providing strict monotonic growth (i.e., no losses) should be risk-less, regardless of the speed or consistency of the growth. The reason for this premise is that it matches the behaviour of a savings account, which also increases monotonically in value over time, and is considered risk-less by end investors. Basic setup \u00b6 The basic setup is straightforward: From your program, or from a common mobile app, the portfolio's holdings are sent in a PATCH request. We pass that to the optimizer. You issue a GET request, at your pace, against /portfolios/{id}/optimizations/current/ . When the latest optimization is computed - takes between 5 seconds and 2 minutes - you receive order recommendations. You place the orders with your broker. (unless we agreed that InvestSuite would connect to the broker) Patch portfolio \u00b6 Portfolios managed in the InvestSuite platform are either composed by the investor, i.e. Self Execution, or by the Robo Advisor. Management by the Robo Advisor can be under two mandates: an advisory mandate or a discretionary mandate. In case of an advisory mandate the investor can intervene on the Robo Advisor's order recommendations. In case of a discretionary mandate the Robo Advisor is in full charge of the rebalancing process, and the investor enjoys a full \"auto pilot\" mode. Either way, each time a portfolio managed by the Robo Advisor is updated an optimization is triggered. In other words: to trigger the optimizer, patch the portfolio. Prerequisites: prior to patching a portfolio, make sure there is a portfolio referencing a policy, see Portfolio creation . Below example patches the portfolio by updating the holdings. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } This will now trigger an optimization. Get optimizations \u00b6 Calculation of an optimization takes between 5 seconds and a couple of minutes depending on the complexity of the referenced investment policy, and the compute resources made available to the system. When calculation is in process the server returns a 202 response. Else the server returns a 200 , and an Optimization object. Given you assigned a policy and at least a cash position to the portfolio, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body upon calculation { \"message\" : \"Optimization is not available (yet). Could not get optimization for optimization_hash.\" , \"details\" : \"Entity 'None' (version=None) not found for tenant 'None'\" , \"optimization_hash\" : \"8b22a2d4bdd142c6dca4ead3da80b4e8\" } Response body after calculation { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , } Field Description Data type Example Required id Optimization ID Unique ID for this portfolio. string ^O[0-9A-HJKMNP-TV-Z]{26}\\Z O01FCB5EJQ9RWDK0SWRA17R87EN yes {current|optimal_solution}->objective_value Objective Value describes the degree of optimality of the portfolio. Portfolio Optimizer tries to minimise the objective value. number 0.00665 yes {current|optimal_solution}->holdings The holdings in the portfolio to be optimized, or in the optimal portfolio. object {\"$USD\":10000, \"US0378331005\": 20, \"GB0005405286\": 5} yes {current|optimal_solution}->look_through The look through values of the portfolio before and after optimization. object yes {current|optimal_solution}->portfolio_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object yes {current|optimal_solution}->benchmark_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object no portfolio_update->is_recommended Whether the portfolio update is recommended. True if there are reasons and applicable thresholds are passed, false otherwise. boolean TRUE yes portfolio_update->orders->shares he number of shares to buy (if positive) or sell (if negative). number 20 yes portfolio_update->orders->expected_share_price The share price at which the order is expected to be executed, expressed in the portfolio's base currency. number 100 yes portfolio_update->orders->expected_transaction_cost The expected transaction cost for this order, expressed in the portfolio's base currency. number 2 yes portfolio_update->reasons Reasons to update a portfolio object yes portfolio_update->reasons->portfolio_update_constraint_id The portfolio update constraint that is satisfied. string max_portfolio_constraint_violation_pctpoints yes portfolio_update->reasons->portfolio_update_constraint_value The value of the portfolio update constraint. number 0.9 yes portfolio_update->reasons->portfolio_constraint_id The id of the corresponding portfolio constraint. string holdings.cash yes creation_datetime The date and time the first version of the entity was created. date-time 2025-06-04T15:23:15.328252+00:0 yes Portfolio is OK \u00b6 A PS...Given you have gotten this far you could now do a little test. You could update the portfolio again with the positions from the optimal_solution.portfolio object. To do this patch the portfolio again, just like you did above. The result should be that portfolio_update no longer holds recommended orders, or at least states that \"is_recommended\": false . This means the Portfolio is OK and does not need to be rebalanced.","title":"Optimize a portfolio"},{"location":"robo/run_optimizer/#context","text":"The Optimizer is an essential component of the InvestSuite Robo Advisor. It constructs out of an existing portfolio an optimal portfolio. For this, an algorithm is configured which will suggest a list of orders to be placed with the broker. These orders bring the portfolio in line with the optimal portfolio. The default algorithm underpinning the Optimizer is called iVar . InvestSuite has developed iVar as a human-centric measure of risk. It is a 4th-generation risk measure that addresses the shortcomings of traditional risk measures, with a clear and distinct focus on controlling risk - over maximising return. Next to iVaR, all contemporary risk measures such as volatility, Value-at-Risk and conditional Value-at-Risk are supported. Info What is iVaR? Traditional investment risk measures that are still used today, such as volatility, have historically been chosen because of their simple mathematical properties. They do not work well to describe the risk of real investment portfolios and are not consistent with what end investors perceive as risk. Following the above observations, we developed a new, innovative risk measure which we call InvestSuite Value at Risk (iVaR). Our basic premise is that any instrument or portfolio providing strict monotonic growth (i.e., no losses) should be risk-less, regardless of the speed or consistency of the growth. The reason for this premise is that it matches the behaviour of a savings account, which also increases monotonically in value over time, and is considered risk-less by end investors.","title":"Context"},{"location":"robo/run_optimizer/#basic-setup","text":"The basic setup is straightforward: From your program, or from a common mobile app, the portfolio's holdings are sent in a PATCH request. We pass that to the optimizer. You issue a GET request, at your pace, against /portfolios/{id}/optimizations/current/ . When the latest optimization is computed - takes between 5 seconds and 2 minutes - you receive order recommendations. You place the orders with your broker. (unless we agreed that InvestSuite would connect to the broker)","title":"Basic setup"},{"location":"robo/run_optimizer/#patch-portfolio","text":"Portfolios managed in the InvestSuite platform are either composed by the investor, i.e. Self Execution, or by the Robo Advisor. Management by the Robo Advisor can be under two mandates: an advisory mandate or a discretionary mandate. In case of an advisory mandate the investor can intervene on the Robo Advisor's order recommendations. In case of a discretionary mandate the Robo Advisor is in full charge of the rebalancing process, and the investor enjoys a full \"auto pilot\" mode. Either way, each time a portfolio managed by the Robo Advisor is updated an optimization is triggered. In other words: to trigger the optimizer, patch the portfolio. Prerequisites: prior to patching a portfolio, make sure there is a portfolio referencing a policy, see Portfolio creation . Below example patches the portfolio by updating the holdings. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } This will now trigger an optimization.","title":"Patch portfolio"},{"location":"robo/run_optimizer/#get-optimizations","text":"Calculation of an optimization takes between 5 seconds and a couple of minutes depending on the complexity of the referenced investment policy, and the compute resources made available to the system. When calculation is in process the server returns a 202 response. Else the server returns a 200 , and an Optimization object. Given you assigned a policy and at least a cash position to the portfolio, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body upon calculation { \"message\" : \"Optimization is not available (yet). Could not get optimization for optimization_hash.\" , \"details\" : \"Entity 'None' (version=None) not found for tenant 'None'\" , \"optimization_hash\" : \"8b22a2d4bdd142c6dca4ead3da80b4e8\" } Response body after calculation { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , } Field Description Data type Example Required id Optimization ID Unique ID for this portfolio. string ^O[0-9A-HJKMNP-TV-Z]{26}\\Z O01FCB5EJQ9RWDK0SWRA17R87EN yes {current|optimal_solution}->objective_value Objective Value describes the degree of optimality of the portfolio. Portfolio Optimizer tries to minimise the objective value. number 0.00665 yes {current|optimal_solution}->holdings The holdings in the portfolio to be optimized, or in the optimal portfolio. object {\"$USD\":10000, \"US0378331005\": 20, \"GB0005405286\": 5} yes {current|optimal_solution}->look_through The look through values of the portfolio before and after optimization. object yes {current|optimal_solution}->portfolio_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object yes {current|optimal_solution}->benchmark_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object no portfolio_update->is_recommended Whether the portfolio update is recommended. True if there are reasons and applicable thresholds are passed, false otherwise. boolean TRUE yes portfolio_update->orders->shares he number of shares to buy (if positive) or sell (if negative). number 20 yes portfolio_update->orders->expected_share_price The share price at which the order is expected to be executed, expressed in the portfolio's base currency. number 100 yes portfolio_update->orders->expected_transaction_cost The expected transaction cost for this order, expressed in the portfolio's base currency. number 2 yes portfolio_update->reasons Reasons to update a portfolio object yes portfolio_update->reasons->portfolio_update_constraint_id The portfolio update constraint that is satisfied. string max_portfolio_constraint_violation_pctpoints yes portfolio_update->reasons->portfolio_update_constraint_value The value of the portfolio update constraint. number 0.9 yes portfolio_update->reasons->portfolio_constraint_id The id of the corresponding portfolio constraint. string holdings.cash yes creation_datetime The date and time the first version of the entity was created. date-time 2025-06-04T15:23:15.328252+00:0 yes","title":"Get optimizations"},{"location":"robo/run_optimizer/#portfolio-is-ok","text":"A PS...Given you have gotten this far you could now do a little test. You could update the portfolio again with the positions from the optimal_solution.portfolio object. To do this patch the portfolio again, just like you did above. The result should be that portfolio_update no longer holds recommended orders, or at least states that \"is_recommended\": false . This means the Portfolio is OK and does not need to be rebalanced.","title":"Portfolio is OK"},{"location":"self/introduction/","text":"Under construction","title":"Introduction"},{"location":"value-added-apis/authentication_usage/","text":"Authentication \u00b6 To authenticate you need a tenant-user identifier and a secret key. Authenticate in the request header with your tenant-user identifier in the X-TENANT-ID header field and your secret key in the X-Api-Key header field. Reach out to your InvestSuite representative or send a mail to api@investsuite.com and we will set you up in no time. Example requests with authentication headers: Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET / HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Warning Requests should not be directly sent from your app or website, as your authentication data may be exposed in transit. All requests are required to be made via an HTTPS connection; requests made over plain HTTP will fail. API Docsite Usage \u00b6 Auto-generated documentation showing REST OpenAPI data models and response descriptions at the redoc path: https://api.data.uat.investsuite.com/redoc You can navigate the data models and schemata by clicking the drop-down buttons for the relevant field. Webinterface Usage \u00b6 An interactive Swagger UI interface is available for testing at the /docs path: https://api.data.uat.investsuite.com/docs \u26a0\ufe0f /docs Interactive Swagger UI caching issues : Browsers will sometimes cache request-responses returning stale/previous responses. This is due to our caching header parameters. Please clear your browser cache ( Ctrl + Shift + Delete in most browser) to resolve these issues.","title":"Authentication & Usage"},{"location":"value-added-apis/authentication_usage/#authentication","text":"To authenticate you need a tenant-user identifier and a secret key. Authenticate in the request header with your tenant-user identifier in the X-TENANT-ID header field and your secret key in the X-Api-Key header field. Reach out to your InvestSuite representative or send a mail to api@investsuite.com and we will set you up in no time. Example requests with authentication headers: Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET / HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Warning Requests should not be directly sent from your app or website, as your authentication data may be exposed in transit. All requests are required to be made via an HTTPS connection; requests made over plain HTTP will fail.","title":"Authentication"},{"location":"value-added-apis/authentication_usage/#api-docsite-usage","text":"Auto-generated documentation showing REST OpenAPI data models and response descriptions at the redoc path: https://api.data.uat.investsuite.com/redoc You can navigate the data models and schemata by clicking the drop-down buttons for the relevant field.","title":"API Docsite Usage"},{"location":"value-added-apis/authentication_usage/#webinterface-usage","text":"An interactive Swagger UI interface is available for testing at the /docs path: https://api.data.uat.investsuite.com/docs \u26a0\ufe0f /docs Interactive Swagger UI caching issues : Browsers will sometimes cache request-responses returning stale/previous responses. This is due to our caching header parameters. Please clear your browser cache ( Ctrl + Shift + Delete in most browser) to resolve these issues.","title":"Webinterface Usage"},{"location":"value-added-apis/custom_data/","text":"Service Description \u00b6 InvestSuite offers a range of products, all using financial data. Each product has access a few to market data providers. Sometimes the necessary data is not available with these providers, or a client may want to upload their own data to guarantee exactly the same numbers in the InvestSuite products as they report themselves. In that case, the client will upload the custom data to InvestSuite via the API endpoints as described on this page. This then takes precedence on the data from the provider. The Financial Data API accepts custom data via several endpoints, each accepting a specific type of data: Custom Reference Model Docs Custom Reference CSV Model Docs Custom Timeseries Model Docs Custom Composition Model Docs Custom Composition Timeseries Model Docs Custom Attribution Model Docs The client will most likely use a combination of these endpoints. Below, we elaborate further on how to use these endpoints in practice. Custom Reference POST \u00b6 Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments. The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"reference_data\": { \"country\": \"US\", \"name\": \"APPLE\", \"roundlot_size\": 1 } }, { \"instrument_id\": \"US2546871060\", \"reference_data\": { \"country\": \"US\", \"name\": \"WALT DISNEY\", \"roundlot_size\": 1 } } ] }' POST /data/custom/reference/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"APPLE\" , \"roundlot_size\" : 1 } }, { \"instrument_id\" : \"US2546871060\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"WALT DISNEY\" , \"roundlot_size\" : 1 } } ] } Field Description Data type Example Required data A list that holds a reference data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. string \"US2546871060\" yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . object yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten. Custom Reference CSV POST \u00b6 Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments as Comma Separated Values (.CSV) file . The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. For now, it is not possible to delete old values, only overwrite them. Example CSV File instrument_id,country,name,roundlot_size US0378331005,US,APPLE,1 Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/csv/\" \\ -H \"accept: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -H \"Content-Type: multipart/form-data\" \\ -F \"file=@reference-data.csv;type=text/csv\" POST /data/custom/reference/csv/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : multipart/form-data; filename=\"reference-data.csv\" X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required file A CSV file that holds reference data with the first line containing header column instrument_id , subsequent columns are the field names of reference data. list cf. example above yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. csv column cf. example above yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . csv column cf. example above yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 1 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten. Custom Timeseries POST \u00b6 Timeseries data consist of instrument-level data for which data changes frequently (usually daily) and for which historical values are relevant. Examples of timeseries data are NAV, adjusted price, yield, and interest rate. Using this endpoint, a client can upload timeseries data for specific instruments, and for a specific type. The endpoint accepts a batch of instruments at once, for the a particular type of timeseries data. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"values\": { \"2022-03-07\": 158834, \"2022-03-08\": 156979.4, \"2022-03-09\": 162473.3 } }, { \"instrument_id\": \"US2546871060\", \"values\": { \"2022-03-07\": 9615.215, \"2022-03-08\": 9489.172, \"2022-03-09\": 9626.016 } } ], \"timeseries_type\": \"ADJUSTED_PRICE\" }' POST /data/custom/timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"values\" : { \"2022-03-07\" : 158834 , \"2022-03-08\" : 156979.4 , \"2022-03-09\" : 162473.3 } }, { \"instrument_id\" : \"US2546871060\" , \"values\" : { \"2022-03-07\" : 9615.215 , \"2022-03-08\" : 9489.172 , \"2022-03-09\" : 9626.016 } } ], \"timeseries_type\" : \"ADJUSTED_PRICE\" } Field Description Data type Example Required data A list that holds a timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes values An object holding the timeseries data for the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] {\"2022-03-07\": 9615.215, \"1656337622\": 9489.172} yes timeseries_type The type of timeseries data that is provided. Available types can be seen in the API documentation of this endpoint After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_date_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments for which the client has provided custom timeseries data. integer 2 yes cache_date_count The number of different dates for which the client has provided timeseries data, over all instruments. integer 3 yes To overwrite a certain type of timeseries data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again. Custom Composition POST \u00b6 Composition data of an instrument provides a look-through of the underlying instruments according to certain composition types. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments. If you require composition data over different points in time (timeseries) use Custom Composition Timeseries Data . Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument-level (i.e., the entire composition for a given type and instrument gets overwritten). For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [{ \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"asset_class\": { \"equity\": 1 }, \"currency\": { \"gbp\": 1 }, \"equity_region\": { \"emerging\": 0.1, \"europe_developed\": 0.2, \"north_america\": 0.7 } } }, { \"instrument_id\": \"IE00BWT41R00\", \"composition_data\": { \"equity_sector\": { \"real_estate\": 0.3, \"technology\": 0.3, \"utilities\": 0.2 }, \"fixed_income_type\": { \"government\": 1 } } } ] }' POST /data/custom/composition/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [{ \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"asset_class\" : { \"equity\" : 1 }, \"currency\" : { \"gbp\" : 1 }, \"equity_region\" : { \"emerging\" : 0.1 , \"europe_developed\" : 0.2 , \"north_america\" : 0.7 } } }, { \"instrument_id\" : \"IE00BWT41R00\" , \"composition_data\" : { \"equity_sector\" : { \"real_estate\" : 0.3 , \"technology\" : 0.3 , \"utilities\" : 0.2 }, \"fixed_income_type\" : { \"government\" : 1 } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. Values for composition should be float. object yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 5 , \"cache_composition_type_count\" : 8 }, \"meta\" : null } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 5 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 8 yes To overwrite a certain type of composition data for one or more instruments, simply provide the data for these instruments and types on the dates to overwrite again. Custom Composition Timeseries POST \u00b6 Composition timeseries data of an instrument provides a look-through of the underlying instruments according to certain composition types at certain dates. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument/date level (i.e., the entire composition for a given type and instrument on a give day gets overwritten). For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"ASSET_CLASS\": { \"2022-01-31\": { \"equity\": 0.5, \"money_market\": 0.5 }, \"2022-02-28\": { \"equity\": 0.6, \"money_market\": 0.4 } }, \"EQUITY_REGION\": { \"2022-01-31\": { \"europe\": 0.3, \"north_america\": 0.6, \"emerging_markets\": 0.1 }, \"2022-02-28\": { \"europe\": 0.35, \"north_america\": 0.65 } } } } ] }' POST /data/custom/composition-timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"ASSET_CLASS\" : { \"2022-01-31\" : { \"equity\" : 0.5 , \"money_market\" : 0.5 }, \"2022-02-28\" : { \"equity\" : 0.6 , \"money_market\" : 0.4 } }, \"EQUITY_REGION\" : { \"2022-01-31\" : { \"europe\" : 0.3 , \"north_america\" : 0.6 , \"emerging_markets\" : 0.1 }, \"2022-02-28\" : { \"europe\" : 0.35 , \"north_america\" : 0.65 } } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding timeseries composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. A datestamp should be a string with format YYYY-MM-DD or string Unix timestamp. object[CompositionType, TimestampedCompositionObject] yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_composition_type_count\" : 2 , \"cache_date_count\" : 6 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 1 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 2 yes cache_date_count The number of different dates that the client has provided timeseries data for, over all instruments. integer 6 yes To overwrite a certain type of composition data for one or more instruments on specific dates, simply provide the data for these instruments and types on the dates to overwrite again. Custom Attribution POST \u00b6 Attribution data of an instrument provides an overview of how much the underlying instruments attributed to the overall return of the instrument. For example how much each instrument in a fund has attributed to the fund's profit. Using this endpoint, a client can upload attribution data, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the day/fund-level (i.e., the entire day/fund gets overwritten with the uploaded data). For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{\"data\": [ { \"fund_id\": \"US78462F1030\", \"attribution_data\": { \"2022-03-08\": { \"US0378331005\": -0.005838, \"US88160R1014\": 0.012317 }, \"2022-03-09\": { \"US0378331005\": 0.017499, \"US88160R1014\": 0.020967 }, \"2022-03-10\": { \"US0378331005\": -0.013593, \"US88160R1014\": -0.012032 } } } ] }' POST /data/custom/attribution/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"fund_id\" : \"US78462F1030\" , \"attribution_data\" : { \"2022-03-08\" : { \"US0378331005\" : -0.005838 , \"US88160R1014\" : 0.012317 }, \"2022-03-09\" : { \"US0378331005\" : 0.017499 , \"US88160R1014\" : 0.020967 }, \"2022-03-10\" : { \"US0378331005\" : -0.013593 , \"US88160R1014\" : -0.012032 } } } ] } Field Description Data type Example Required data A list that holds an attribution timeseries data object for each provided instrument. list yes fund_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US78462F1030\" yes attribution_data An object holding timeseries attribution data of the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] \"2022-03-09\": {\"US0378331005\": 0.017499} yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_fund_count\" : 1 , \"cache_date_count\" : 3 , } } Field Description Data type Example Required data Holds information about the current database. object yes cache_fund_count The number of fund instruments that the client has provided custom attribution data for. integer 2 yes cache_date_count The number of dates that the client has provided attribution data for. integer 3 yes To overwrite a certain type of attribution data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again.","title":"Custom Data API"},{"location":"value-added-apis/custom_data/#service-description","text":"InvestSuite offers a range of products, all using financial data. Each product has access a few to market data providers. Sometimes the necessary data is not available with these providers, or a client may want to upload their own data to guarantee exactly the same numbers in the InvestSuite products as they report themselves. In that case, the client will upload the custom data to InvestSuite via the API endpoints as described on this page. This then takes precedence on the data from the provider. The Financial Data API accepts custom data via several endpoints, each accepting a specific type of data: Custom Reference Model Docs Custom Reference CSV Model Docs Custom Timeseries Model Docs Custom Composition Model Docs Custom Composition Timeseries Model Docs Custom Attribution Model Docs The client will most likely use a combination of these endpoints. Below, we elaborate further on how to use these endpoints in practice.","title":"Service Description"},{"location":"value-added-apis/custom_data/#custom-reference-post","text":"Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments. The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"reference_data\": { \"country\": \"US\", \"name\": \"APPLE\", \"roundlot_size\": 1 } }, { \"instrument_id\": \"US2546871060\", \"reference_data\": { \"country\": \"US\", \"name\": \"WALT DISNEY\", \"roundlot_size\": 1 } } ] }' POST /data/custom/reference/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"APPLE\" , \"roundlot_size\" : 1 } }, { \"instrument_id\" : \"US2546871060\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"WALT DISNEY\" , \"roundlot_size\" : 1 } } ] } Field Description Data type Example Required data A list that holds a reference data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. string \"US2546871060\" yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . object yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten.","title":"Custom Reference POST"},{"location":"value-added-apis/custom_data/#custom-reference-csv-post","text":"Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments as Comma Separated Values (.CSV) file . The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. For now, it is not possible to delete old values, only overwrite them. Example CSV File instrument_id,country,name,roundlot_size US0378331005,US,APPLE,1 Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/csv/\" \\ -H \"accept: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -H \"Content-Type: multipart/form-data\" \\ -F \"file=@reference-data.csv;type=text/csv\" POST /data/custom/reference/csv/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : multipart/form-data; filename=\"reference-data.csv\" X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required file A CSV file that holds reference data with the first line containing header column instrument_id , subsequent columns are the field names of reference data. list cf. example above yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. csv column cf. example above yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . csv column cf. example above yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 1 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten.","title":"Custom Reference CSV POST"},{"location":"value-added-apis/custom_data/#custom-timeseries-post","text":"Timeseries data consist of instrument-level data for which data changes frequently (usually daily) and for which historical values are relevant. Examples of timeseries data are NAV, adjusted price, yield, and interest rate. Using this endpoint, a client can upload timeseries data for specific instruments, and for a specific type. The endpoint accepts a batch of instruments at once, for the a particular type of timeseries data. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"values\": { \"2022-03-07\": 158834, \"2022-03-08\": 156979.4, \"2022-03-09\": 162473.3 } }, { \"instrument_id\": \"US2546871060\", \"values\": { \"2022-03-07\": 9615.215, \"2022-03-08\": 9489.172, \"2022-03-09\": 9626.016 } } ], \"timeseries_type\": \"ADJUSTED_PRICE\" }' POST /data/custom/timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"values\" : { \"2022-03-07\" : 158834 , \"2022-03-08\" : 156979.4 , \"2022-03-09\" : 162473.3 } }, { \"instrument_id\" : \"US2546871060\" , \"values\" : { \"2022-03-07\" : 9615.215 , \"2022-03-08\" : 9489.172 , \"2022-03-09\" : 9626.016 } } ], \"timeseries_type\" : \"ADJUSTED_PRICE\" } Field Description Data type Example Required data A list that holds a timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes values An object holding the timeseries data for the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] {\"2022-03-07\": 9615.215, \"1656337622\": 9489.172} yes timeseries_type The type of timeseries data that is provided. Available types can be seen in the API documentation of this endpoint After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_date_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments for which the client has provided custom timeseries data. integer 2 yes cache_date_count The number of different dates for which the client has provided timeseries data, over all instruments. integer 3 yes To overwrite a certain type of timeseries data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again.","title":"Custom Timeseries POST"},{"location":"value-added-apis/custom_data/#custom-composition-post","text":"Composition data of an instrument provides a look-through of the underlying instruments according to certain composition types. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments. If you require composition data over different points in time (timeseries) use Custom Composition Timeseries Data . Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument-level (i.e., the entire composition for a given type and instrument gets overwritten). For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [{ \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"asset_class\": { \"equity\": 1 }, \"currency\": { \"gbp\": 1 }, \"equity_region\": { \"emerging\": 0.1, \"europe_developed\": 0.2, \"north_america\": 0.7 } } }, { \"instrument_id\": \"IE00BWT41R00\", \"composition_data\": { \"equity_sector\": { \"real_estate\": 0.3, \"technology\": 0.3, \"utilities\": 0.2 }, \"fixed_income_type\": { \"government\": 1 } } } ] }' POST /data/custom/composition/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [{ \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"asset_class\" : { \"equity\" : 1 }, \"currency\" : { \"gbp\" : 1 }, \"equity_region\" : { \"emerging\" : 0.1 , \"europe_developed\" : 0.2 , \"north_america\" : 0.7 } } }, { \"instrument_id\" : \"IE00BWT41R00\" , \"composition_data\" : { \"equity_sector\" : { \"real_estate\" : 0.3 , \"technology\" : 0.3 , \"utilities\" : 0.2 }, \"fixed_income_type\" : { \"government\" : 1 } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. Values for composition should be float. object yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 5 , \"cache_composition_type_count\" : 8 }, \"meta\" : null } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 5 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 8 yes To overwrite a certain type of composition data for one or more instruments, simply provide the data for these instruments and types on the dates to overwrite again.","title":"Custom Composition POST"},{"location":"value-added-apis/custom_data/#custom-composition-timeseries-post","text":"Composition timeseries data of an instrument provides a look-through of the underlying instruments according to certain composition types at certain dates. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument/date level (i.e., the entire composition for a given type and instrument on a give day gets overwritten). For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"ASSET_CLASS\": { \"2022-01-31\": { \"equity\": 0.5, \"money_market\": 0.5 }, \"2022-02-28\": { \"equity\": 0.6, \"money_market\": 0.4 } }, \"EQUITY_REGION\": { \"2022-01-31\": { \"europe\": 0.3, \"north_america\": 0.6, \"emerging_markets\": 0.1 }, \"2022-02-28\": { \"europe\": 0.35, \"north_america\": 0.65 } } } } ] }' POST /data/custom/composition-timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"ASSET_CLASS\" : { \"2022-01-31\" : { \"equity\" : 0.5 , \"money_market\" : 0.5 }, \"2022-02-28\" : { \"equity\" : 0.6 , \"money_market\" : 0.4 } }, \"EQUITY_REGION\" : { \"2022-01-31\" : { \"europe\" : 0.3 , \"north_america\" : 0.6 , \"emerging_markets\" : 0.1 }, \"2022-02-28\" : { \"europe\" : 0.35 , \"north_america\" : 0.65 } } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding timeseries composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. A datestamp should be a string with format YYYY-MM-DD or string Unix timestamp. object[CompositionType, TimestampedCompositionObject] yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_composition_type_count\" : 2 , \"cache_date_count\" : 6 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 1 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 2 yes cache_date_count The number of different dates that the client has provided timeseries data for, over all instruments. integer 6 yes To overwrite a certain type of composition data for one or more instruments on specific dates, simply provide the data for these instruments and types on the dates to overwrite again.","title":"Custom Composition Timeseries POST"},{"location":"value-added-apis/custom_data/#custom-attribution-post","text":"Attribution data of an instrument provides an overview of how much the underlying instruments attributed to the overall return of the instrument. For example how much each instrument in a fund has attributed to the fund's profit. Using this endpoint, a client can upload attribution data, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the day/fund-level (i.e., the entire day/fund gets overwritten with the uploaded data). For now, it is not possible to delete old values, only overwrite them. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{\"data\": [ { \"fund_id\": \"US78462F1030\", \"attribution_data\": { \"2022-03-08\": { \"US0378331005\": -0.005838, \"US88160R1014\": 0.012317 }, \"2022-03-09\": { \"US0378331005\": 0.017499, \"US88160R1014\": 0.020967 }, \"2022-03-10\": { \"US0378331005\": -0.013593, \"US88160R1014\": -0.012032 } } } ] }' POST /data/custom/attribution/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"fund_id\" : \"US78462F1030\" , \"attribution_data\" : { \"2022-03-08\" : { \"US0378331005\" : -0.005838 , \"US88160R1014\" : 0.012317 }, \"2022-03-09\" : { \"US0378331005\" : 0.017499 , \"US88160R1014\" : 0.020967 }, \"2022-03-10\" : { \"US0378331005\" : -0.013593 , \"US88160R1014\" : -0.012032 } } } ] } Field Description Data type Example Required data A list that holds an attribution timeseries data object for each provided instrument. list yes fund_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US78462F1030\" yes attribution_data An object holding timeseries attribution data of the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] \"2022-03-09\": {\"US0378331005\": 0.017499} yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_fund_count\" : 1 , \"cache_date_count\" : 3 , } } Field Description Data type Example Required data Holds information about the current database. object yes cache_fund_count The number of fund instruments that the client has provided custom attribution data for. integer 2 yes cache_date_count The number of dates that the client has provided attribution data for. integer 3 yes To overwrite a certain type of attribution data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again.","title":"Custom Attribution POST"},{"location":"value-added-apis/inspiration/","text":"Service Description \u00b6 The Inspiration API provides groupings of instruments by automated curation without the manual work of your analyst/content team. For instance, it maintains stocks with top-scores on valuation, growth, and financial health, or analyst favourites and dividend stars. The Inspiration instrument groupings rely on InvestSuite's XRay analyses implemented by our Quant Team. To retrieve Inspiration and up-to-date instruments within them perform a GET request against the /inspiration/ endpoint. A GET request against the /inspiration/definition/ endpoint will return the metadata (identifier, description, name, query definition) available to the tenant. Inspiration API Redoc Documentation Inspiration API Swagger UI Interface Inspiration GET \u00b6 GET Inspirations for a tenant with updated instruments matching the provided Inspiration Definition at endpoint /inspiration/ . Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/?id={inspiration_identifier_1}\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" ```HTTP GET /inspiration/?id={inspiration_identifier_1} HTTP/1.1 Host: api.data.uat.investsuite.com X-TENANT-ID: $TENANT_ID X-Api-Key: $IVS_API_SECRET accept: application/json Content-Type: application/json ```` Query Parameter Field Description Data type Example Required id One or multiple id parameter queries can be passed with optional to filter on Inspirations of interest. id is optional and by default gets all available Inspirations. To obtain available identifiers in the Inspiration Definitions via a GET request the /inspiration/definition/ endpoint (cf. below). string top_financial_health No, if not given return all Inspirations After the request, we get the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme)\"\". \" cus t om \": \" bool : Cus t om t o tenant or whi tela bel ( false | true ) \"\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, \"instruments\" : [ { \"isin\" : \"ISIN identifier of instrument, e.g. ISIN1234.\" , \"name\" : \"Full extended company name, e.g., XYZ Corporation.\" } ... ] }, ... ] Inspiration Definitions GET \u00b6 GET the Inspiration Definition metadata without the instruments at the /inspiration/definition/ endpoint. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/definition/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /inspiration/definition/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json After the request, we receive the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme).\" , \"custom\" : \"bool: Custom to tenant or whitelabel (false|true)\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, }, ... ]","title":"Inspiration API"},{"location":"value-added-apis/inspiration/#service-description","text":"The Inspiration API provides groupings of instruments by automated curation without the manual work of your analyst/content team. For instance, it maintains stocks with top-scores on valuation, growth, and financial health, or analyst favourites and dividend stars. The Inspiration instrument groupings rely on InvestSuite's XRay analyses implemented by our Quant Team. To retrieve Inspiration and up-to-date instruments within them perform a GET request against the /inspiration/ endpoint. A GET request against the /inspiration/definition/ endpoint will return the metadata (identifier, description, name, query definition) available to the tenant. Inspiration API Redoc Documentation Inspiration API Swagger UI Interface","title":"Service Description"},{"location":"value-added-apis/inspiration/#inspiration-get","text":"GET Inspirations for a tenant with updated instruments matching the provided Inspiration Definition at endpoint /inspiration/ . Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/?id={inspiration_identifier_1}\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" ```HTTP GET /inspiration/?id={inspiration_identifier_1} HTTP/1.1 Host: api.data.uat.investsuite.com X-TENANT-ID: $TENANT_ID X-Api-Key: $IVS_API_SECRET accept: application/json Content-Type: application/json ```` Query Parameter Field Description Data type Example Required id One or multiple id parameter queries can be passed with optional to filter on Inspirations of interest. id is optional and by default gets all available Inspirations. To obtain available identifiers in the Inspiration Definitions via a GET request the /inspiration/definition/ endpoint (cf. below). string top_financial_health No, if not given return all Inspirations After the request, we get the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme)\"\". \" cus t om \": \" bool : Cus t om t o tenant or whi tela bel ( false | true ) \"\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, \"instruments\" : [ { \"isin\" : \"ISIN identifier of instrument, e.g. ISIN1234.\" , \"name\" : \"Full extended company name, e.g., XYZ Corporation.\" } ... ] }, ... ]","title":"Inspiration GET"},{"location":"value-added-apis/inspiration/#inspiration-definitions-get","text":"GET the Inspiration Definition metadata without the instruments at the /inspiration/definition/ endpoint. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/definition/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /inspiration/definition/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json After the request, we receive the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme).\" , \"custom\" : \"bool: Custom to tenant or whitelabel (false|true)\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, }, ... ]","title":"Inspiration Definitions GET"},{"location":"value-added-apis/introduction/","text":"This section handles topics that are specific to the Value Added APIs.","title":"Introduction"},{"location":"value-added-apis/logos/","text":"Service Description \u00b6 Get a company logo image by an instrument identifier (ISIN). Logos API Documentation Logos API Swagger UI Interface Our logo database is automatically collected with human-in-the-loop verification and periodic updates to catch out-of-date assets. Logo GET \u00b6 Request a logo for an ISIN as .png image of a certain size with 1:1 square aspect ratio. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/logo/?isin=US30303M1027&use_only_cache=true&size=128\" \\ -H \"accept: */*\" \\ -H \"Content-Type: image/png\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /logo/?isin=US30303M1027&use_only_cache=true&size=128 HTTP / 1.1 Host : api.data.uat.investsuite.com accept : */* Content-Type : image/png X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required isin The ISIN identifier of the company. str US30303M1027 Yes use_only_cache Set to false , to bypass the cache. Cached requests are recommended. bool: {true|false} true No, default true size Size in pixels from 0 up to 1000. All returned images have square aspect ratio 1:1. int No, default to original asset size. After the request, we get the following example response: Response (Body Image) The image binary in image/png format.","title":"Logos API"},{"location":"value-added-apis/logos/#service-description","text":"Get a company logo image by an instrument identifier (ISIN). Logos API Documentation Logos API Swagger UI Interface Our logo database is automatically collected with human-in-the-loop verification and periodic updates to catch out-of-date assets.","title":"Service Description"},{"location":"value-added-apis/logos/#logo-get","text":"Request a logo for an ISIN as .png image of a certain size with 1:1 square aspect ratio. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/logo/?isin=US30303M1027&use_only_cache=true&size=128\" \\ -H \"accept: */*\" \\ -H \"Content-Type: image/png\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /logo/?isin=US30303M1027&use_only_cache=true&size=128 HTTP / 1.1 Host : api.data.uat.investsuite.com accept : */* Content-Type : image/png X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required isin The ISIN identifier of the company. str US30303M1027 Yes use_only_cache Set to false , to bypass the cache. Cached requests are recommended. bool: {true|false} true No, default true size Size in pixels from 0 up to 1000. All returned images have square aspect ratio 1:1. int No, default to original asset size. After the request, we get the following example response: Response (Body Image) The image binary in image/png format.","title":"Logo GET"},{"location":"value-added-apis/monte_carlo/","text":"Service Description \u00b6 This API endpoint can be used to simulate a range of possible future returns for a portfolio, based on confidence intervals. This can be based on the historical returns of the asset classed the portfolio is exposed to, or a set of expected returns over the short and long term. When using expected returns, the short and long term estimates for the returns and volatilities of the asset classes (which InvestSuite obtains from a variety of sources) are used to calculate the simulations. A linear smoothing is applied to change the distributions over time. InvestSuite updates these expectations in a timely fashion. The Financial Data API endpoint for the Monte Carlo simulations is accessed through the following endpoint: Future Performance Below, we elaborate further on how to use this endpoints in practice. Future Data POST \u00b6 The endpoint has a range of predefined fields to query data for. Let us look at an example. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/performance/future/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"asset_classes\": { \"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2] }, \"start_date\": \"2022-01-31\", \"end_date\": \"2022-12-31\", \"currency\": \"EUR\", \"start_amount\": 1000, \"recurring_deposit_amount\": 50, \"recurring_deposit_frequency\": \"M\", \"sample_frequency\": \"M\", \"quantiles\": [0.05, 0.5, 0.95], \"use_expected_returns\": false }' POST /performance/future/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json { \"asset_classes\" : { \"EQUITY\" : [ 0.8 , 1 ], \"FIXED_INCOME\" : [ 0 , 0.2 ] }, \"start_date\" : \"2022-01-31\" , \"end_date\" : \"2022-12-31\" , \"currency\" : \"EUR\" , \"start_amount\" : 1000 , \"recurring_deposit_amount\" : 50 , \"recurring_deposit_frequency\" : \"M\" , \"sample_frequency\" : \"M\" , \"quantiles\" : [ 0.05 , 0.5 , 0.95 ], \"use_expected_returns\" : false } Field Description Data type Example Required asset_classes A dictionary mapping asset classes to portfolio upper and lower weights. dict {\"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2]} yes start_date Start date of the scenarios. date \"2022-01-31\" yes end_date End date of the scenarios. date \"2022-12-31\" yes currency The currency of the portfolio in ISO format. str \"USD\" no start_amount Start amount of the portfolio (in base currency) - i.e. amount put in at start_date. float 1000 no recurring_deposit_amount Amount assumed to be added/subtracted at the provided frequency. float 100 no recurring_deposit_frequency Frequency of the deposit amount. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no sample_frequency Frequency for which the scenarios should be generated. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no quantiles The quantiles to calculate and return (expressed in decimal form). list [0.05, 0.5, 0.95] no use_expected_returns Whether the simulations need to are based on projected returns, not historical ones. bool false no asset_class_mapping Instruments to use for the historical asset class returns. dict {\"EQUITY\": \"US0378331005\", \"FIXED_INCOME\": \"IE00B4L5Y983\"} no asset_class_st_mean_and_stdev Mean and standard deviation for the short term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.25, \"stdev\": 0.35}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no asset_class_lt_mean_and_stdev Mean and standard deviation for the long term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.15, \"stdev\": 0.25}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no short_to_long_term_transition_cut_off Cut-off between the short and long term distributions, in years. int 5 no The long term and short term distribution parameters can be provided by mapping asset classes to the following structure. Field Description Data type Example Required mean The mean of the distribution. float 0.15 yes stdev The standard deviation of the distribution. float 0.25 yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"value\" : { \"0.05\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1035.8986317433569 , ... \"2022-11-30\" : 1402.444917327639 , \"2022-12-31\" : 1450.056624826056 }, \"0.5\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1109.6624596515082 , ... \"2022-11-30\" : 1682.6038711807148 , \"2022-12-31\" : 1749.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1188.9452142854648 , ... \"2022-11-30\" : 2032.411301502351 , \"2022-12-31\" : 2127.5945389625517 } }, \"deposits\" : { \"deposits\" : { \"2022-01-31\" : 50.0 , \"2022-02-28\" : 100.0 , ... \"2022-11-30\" : 550.0 , \"2022-12-31\" : 600.0 } }, \"return\" : { \"0.05\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 935.8986317433569 , ... \"2022-11-30\" : 852.4449173276389 , \"2022-12-31\" : 850.0566248260559 }, \"0.5\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1009.6624596515082 , ... \"2022-11-30\" : 1132.6038711807148 , \"2022-12-31\" : 1149.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1088.9452142854648 , ... \"2022-11-30\" : 1482.411301502351 , \"2022-12-31\" : 1527.5945389625517 } } }, \"meta\" : null } Field Description Data type Example Required data Holds all the Monte Carlo simulation data. object yes value The simulated future value of the portfolio of the requested quantiles. dict yes deposits The cumulative deposits over time. dict yes return The simulated future value of the portfolio of the requested quantiles, minus the deposits. dict yes","title":"Monte Carlo API"},{"location":"value-added-apis/monte_carlo/#service-description","text":"This API endpoint can be used to simulate a range of possible future returns for a portfolio, based on confidence intervals. This can be based on the historical returns of the asset classed the portfolio is exposed to, or a set of expected returns over the short and long term. When using expected returns, the short and long term estimates for the returns and volatilities of the asset classes (which InvestSuite obtains from a variety of sources) are used to calculate the simulations. A linear smoothing is applied to change the distributions over time. InvestSuite updates these expectations in a timely fashion. The Financial Data API endpoint for the Monte Carlo simulations is accessed through the following endpoint: Future Performance Below, we elaborate further on how to use this endpoints in practice.","title":"Service Description"},{"location":"value-added-apis/monte_carlo/#future-data-post","text":"The endpoint has a range of predefined fields to query data for. Let us look at an example. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/performance/future/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"asset_classes\": { \"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2] }, \"start_date\": \"2022-01-31\", \"end_date\": \"2022-12-31\", \"currency\": \"EUR\", \"start_amount\": 1000, \"recurring_deposit_amount\": 50, \"recurring_deposit_frequency\": \"M\", \"sample_frequency\": \"M\", \"quantiles\": [0.05, 0.5, 0.95], \"use_expected_returns\": false }' POST /performance/future/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json { \"asset_classes\" : { \"EQUITY\" : [ 0.8 , 1 ], \"FIXED_INCOME\" : [ 0 , 0.2 ] }, \"start_date\" : \"2022-01-31\" , \"end_date\" : \"2022-12-31\" , \"currency\" : \"EUR\" , \"start_amount\" : 1000 , \"recurring_deposit_amount\" : 50 , \"recurring_deposit_frequency\" : \"M\" , \"sample_frequency\" : \"M\" , \"quantiles\" : [ 0.05 , 0.5 , 0.95 ], \"use_expected_returns\" : false } Field Description Data type Example Required asset_classes A dictionary mapping asset classes to portfolio upper and lower weights. dict {\"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2]} yes start_date Start date of the scenarios. date \"2022-01-31\" yes end_date End date of the scenarios. date \"2022-12-31\" yes currency The currency of the portfolio in ISO format. str \"USD\" no start_amount Start amount of the portfolio (in base currency) - i.e. amount put in at start_date. float 1000 no recurring_deposit_amount Amount assumed to be added/subtracted at the provided frequency. float 100 no recurring_deposit_frequency Frequency of the deposit amount. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no sample_frequency Frequency for which the scenarios should be generated. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no quantiles The quantiles to calculate and return (expressed in decimal form). list [0.05, 0.5, 0.95] no use_expected_returns Whether the simulations need to are based on projected returns, not historical ones. bool false no asset_class_mapping Instruments to use for the historical asset class returns. dict {\"EQUITY\": \"US0378331005\", \"FIXED_INCOME\": \"IE00B4L5Y983\"} no asset_class_st_mean_and_stdev Mean and standard deviation for the short term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.25, \"stdev\": 0.35}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no asset_class_lt_mean_and_stdev Mean and standard deviation for the long term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.15, \"stdev\": 0.25}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no short_to_long_term_transition_cut_off Cut-off between the short and long term distributions, in years. int 5 no The long term and short term distribution parameters can be provided by mapping asset classes to the following structure. Field Description Data type Example Required mean The mean of the distribution. float 0.15 yes stdev The standard deviation of the distribution. float 0.25 yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"value\" : { \"0.05\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1035.8986317433569 , ... \"2022-11-30\" : 1402.444917327639 , \"2022-12-31\" : 1450.056624826056 }, \"0.5\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1109.6624596515082 , ... \"2022-11-30\" : 1682.6038711807148 , \"2022-12-31\" : 1749.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1188.9452142854648 , ... \"2022-11-30\" : 2032.411301502351 , \"2022-12-31\" : 2127.5945389625517 } }, \"deposits\" : { \"deposits\" : { \"2022-01-31\" : 50.0 , \"2022-02-28\" : 100.0 , ... \"2022-11-30\" : 550.0 , \"2022-12-31\" : 600.0 } }, \"return\" : { \"0.05\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 935.8986317433569 , ... \"2022-11-30\" : 852.4449173276389 , \"2022-12-31\" : 850.0566248260559 }, \"0.5\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1009.6624596515082 , ... \"2022-11-30\" : 1132.6038711807148 , \"2022-12-31\" : 1149.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1088.9452142854648 , ... \"2022-11-30\" : 1482.411301502351 , \"2022-12-31\" : 1527.5945389625517 } } }, \"meta\" : null } Field Description Data type Example Required data Holds all the Monte Carlo simulation data. object yes value The simulated future value of the portfolio of the requested quantiles. dict yes deposits The cumulative deposits over time. dict yes return The simulated future value of the portfolio of the requested quantiles, minus the deposits. dict yes","title":"Future Data POST"},{"location":"value-added-apis/reference/","text":"Service Description \u00b6 Query reference data fields for financial instruments such as ISIN, asset class, market cap, etc. User-defined data with custom fields can be uploaded with the Custom Reference Data endpoint . Reference Data Model Docs Reference Data UI Interface Reference Query POST \u00b6 Use this POST endpoint to query reference data fields for a list of instruments. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/reference/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [ \"US0378331005\", \"US2546871060\" ], \"fields\": [ \"ASSET_CLASS\", \"CURRENCY\" ], \"fields_extra\": [] }' POST /data/reference/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json instrument_ids Request body JSON data List of instrument identifiers for which to request data fields. list[str] cf. above Yes fields Request body JSON data List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values per instrument_id: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null } Reference Universe GET \u00b6 Use this GET endpoint to get reference data fields for the instruments in the tenant's universe. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/data/reference/universe/?fields=ASSET_CLASS&fields=CURRENCY\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /data/reference/universe/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request Header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json universe_name Request query parameter The named universe for which to return that universe instruments' reference data. Tenants have universes for different use-cases, cf. Tenant Configuration str ROBO No, default returns union set of instruments of all universes of the tenant. fields Request query parameter List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values for all instruments in the tenant universe: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, ... \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null } Custom Reference POST \u00b6 See Custom Reference Data endpoint FAQ \u00b6 Where do I find the return type of a field? TODO: Assign ReferenceData model to response output so I can link redoc model docs here.","title":"Reference API"},{"location":"value-added-apis/reference/#service-description","text":"Query reference data fields for financial instruments such as ISIN, asset class, market cap, etc. User-defined data with custom fields can be uploaded with the Custom Reference Data endpoint . Reference Data Model Docs Reference Data UI Interface","title":"Service Description"},{"location":"value-added-apis/reference/#reference-query-post","text":"Use this POST endpoint to query reference data fields for a list of instruments. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/reference/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [ \"US0378331005\", \"US2546871060\" ], \"fields\": [ \"ASSET_CLASS\", \"CURRENCY\" ], \"fields_extra\": [] }' POST /data/reference/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json instrument_ids Request body JSON data List of instrument identifiers for which to request data fields. list[str] cf. above Yes fields Request body JSON data List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values per instrument_id: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null }","title":"Reference Query POST"},{"location":"value-added-apis/reference/#reference-universe-get","text":"Use this GET endpoint to get reference data fields for the instruments in the tenant's universe. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/data/reference/universe/?fields=ASSET_CLASS&fields=CURRENCY\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /data/reference/universe/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request Header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json universe_name Request query parameter The named universe for which to return that universe instruments' reference data. Tenants have universes for different use-cases, cf. Tenant Configuration str ROBO No, default returns union set of instruments of all universes of the tenant. fields Request query parameter List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values for all instruments in the tenant universe: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, ... \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null }","title":"Reference Universe GET"},{"location":"value-added-apis/reference/#custom-reference-post","text":"See Custom Reference Data endpoint","title":"Custom Reference POST"},{"location":"value-added-apis/reference/#faq","text":"Where do I find the return type of a field? TODO: Assign ReferenceData model to response output so I can link redoc model docs here.","title":"FAQ"},{"location":"value-added-apis/template/","text":"Service Description \u00b6 Describe the service here in natural language and provide documentation and UI link: Themes API Documentation Themes API Swagger UI Interface GET example \u00b6 Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/ $ENDPOINT_NAME /? $EXAMPLE_QUERY_PARAMS \" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /$ENDPOINT_NAME/?$EXAMPLE_QUERY_PARAMS HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required {example-query-params} Description. data type: possible|values Example Yes/No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ... # trun ca te lo n g respo nses o f t he same values f or readabili t y { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ] Exceptions \u00b6","title":"Endpoint Name Title"},{"location":"value-added-apis/template/#service-description","text":"Describe the service here in natural language and provide documentation and UI link: Themes API Documentation Themes API Swagger UI Interface","title":"Service Description"},{"location":"value-added-apis/template/#get-example","text":"Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/ $ENDPOINT_NAME /? $EXAMPLE_QUERY_PARAMS \" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /$ENDPOINT_NAME/?$EXAMPLE_QUERY_PARAMS HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required {example-query-params} Description. data type: possible|values Example Yes/No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ... # trun ca te lo n g respo nses o f t he same values f or readabili t y { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ]","title":"GET example"},{"location":"value-added-apis/template/#exceptions","text":"","title":"Exceptions"},{"location":"value-added-apis/tenant_config/","text":"The tenant configuration files are not user-editable. This page is for internal documentation purposes. Tenant Configuration Usage \u00b6 The {tenant_identifier}.json files located in /tenant_config configure the following functionality: Universes under property \"UNIVERSES\" : Named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources with associated functionality. Allowed providers list under \"ALLOWED_PROVIDERS\" : Permissions the allowed data providers for the tenant. Classification mapping under \"CLASSIFICATION_MAPPING\" : Points to a mapping file per data provider from predefined categories -> instrument/data field identifiers. Data Model \u00b6 A subsection per request type and subpath in the endpoint. Example tenant_config.json { \"UNIVERSES\" : [ { \"NAME\" : \"EXAMPLE_UNIVERSE_1\" , \"DATA_SOURCES\" : { \"MORNINGSTAR\" : [ \"REFERENCE\" , \"COMPOSITION\" ], \"DATASTREAM\" : [ \"REFERENCE\" , \"TIMESERIES\" , \"FUNDAMENTAL\" ] }, \"INSTRUMENTS\" : [ \"INSTRUMENT_ID_1\" \"INSTRUMENT_ID_2\" ], \"INDICES\" : [ \"INDEX_ID_1\" , \"INDEX_ID_2\" ] } ], \"ALLOWED_PROVIDERS\" : [ \"MORNINGSTAR\" , \"DATASTREAM\" ], \"CLASSIFICATION_MAPPING\" : \"demo.com\" } Field Description Data type Example Required \"UNIVERSES\" A list of universe definition objects. Defines named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources for associated DataTypes. list[object] cf. above Yes \u251c \"NAME\" The name of the universe. Can be used in endpoints under the universe_name optional query parameter, by default this is not passed and these endpoints return the set of all instrument universes after lookup. str EXAMPLE_UNIVERSE_1 Yes \u251c \"DATA_SOURCES\" Configures the allowed data provider source by name key and a list of datatypes. \u2022 Available data sources: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] . \u2022 Available DataTypes: [\"REFERENCE\", \"TIMESERIES\", \"ESG\", \"ESG_TIMESERIES\", \"COMPOSITION\", \"COMPOSITION_TIMESERIES\", \"FUNDAMENTAL\"] object[str, list[DataType]] {\"MORNINGSTAR\": [\"REFERENCE\", \"COMPOSITION\"], \"DATASTREAM\": [\"REFERENCE\", \"TIMESERIES\", \"FUNDAMENTAL\"]} No, can be empty {} \u251c \"INSTRUMENTS\" A list of instrument identifiers. list[str] [\"INSTRUMENT_ID_1\", \"INSTRUMENT_ID_2\"] No \u2514 \"INDICES\" A list of indices/composition-of-instruments identifiers. str [\"INDEX_ID_1\", \"INDEX_ID_2\"] No \"ALLOWED_PROVIDERS\" A list of allowed data provider names. Permissions the allowed data providers for the tenant. \u2022 Available providers: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] list[str] cf. above Yes \"CLASSIFICATION_MAPPING\" Points to the filename of a json map in the /classification_mapping/ folder. This configures the mappings per data provider of from predefined categories -> instrument/data field identifiers (e.g., [\"REBRP-EquityRegionEuropeexeuro\", \"REBRP-EquityRegionEurozone\", \"REBRP-EquityRegionUnitedKingdomLongRescaled\"] are data field lookup keys for the EUROPE_DEVELOPED subcategory for EQUITY_REGION category for MORNINGSTAR data provider). list[str] cf. above Yes","title":"Tenant Configuration"},{"location":"value-added-apis/tenant_config/#tenant-configuration-usage","text":"The {tenant_identifier}.json files located in /tenant_config configure the following functionality: Universes under property \"UNIVERSES\" : Named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources with associated functionality. Allowed providers list under \"ALLOWED_PROVIDERS\" : Permissions the allowed data providers for the tenant. Classification mapping under \"CLASSIFICATION_MAPPING\" : Points to a mapping file per data provider from predefined categories -> instrument/data field identifiers.","title":"Tenant Configuration Usage"},{"location":"value-added-apis/tenant_config/#data-model","text":"A subsection per request type and subpath in the endpoint. Example tenant_config.json { \"UNIVERSES\" : [ { \"NAME\" : \"EXAMPLE_UNIVERSE_1\" , \"DATA_SOURCES\" : { \"MORNINGSTAR\" : [ \"REFERENCE\" , \"COMPOSITION\" ], \"DATASTREAM\" : [ \"REFERENCE\" , \"TIMESERIES\" , \"FUNDAMENTAL\" ] }, \"INSTRUMENTS\" : [ \"INSTRUMENT_ID_1\" \"INSTRUMENT_ID_2\" ], \"INDICES\" : [ \"INDEX_ID_1\" , \"INDEX_ID_2\" ] } ], \"ALLOWED_PROVIDERS\" : [ \"MORNINGSTAR\" , \"DATASTREAM\" ], \"CLASSIFICATION_MAPPING\" : \"demo.com\" } Field Description Data type Example Required \"UNIVERSES\" A list of universe definition objects. Defines named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources for associated DataTypes. list[object] cf. above Yes \u251c \"NAME\" The name of the universe. Can be used in endpoints under the universe_name optional query parameter, by default this is not passed and these endpoints return the set of all instrument universes after lookup. str EXAMPLE_UNIVERSE_1 Yes \u251c \"DATA_SOURCES\" Configures the allowed data provider source by name key and a list of datatypes. \u2022 Available data sources: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] . \u2022 Available DataTypes: [\"REFERENCE\", \"TIMESERIES\", \"ESG\", \"ESG_TIMESERIES\", \"COMPOSITION\", \"COMPOSITION_TIMESERIES\", \"FUNDAMENTAL\"] object[str, list[DataType]] {\"MORNINGSTAR\": [\"REFERENCE\", \"COMPOSITION\"], \"DATASTREAM\": [\"REFERENCE\", \"TIMESERIES\", \"FUNDAMENTAL\"]} No, can be empty {} \u251c \"INSTRUMENTS\" A list of instrument identifiers. list[str] [\"INSTRUMENT_ID_1\", \"INSTRUMENT_ID_2\"] No \u2514 \"INDICES\" A list of indices/composition-of-instruments identifiers. str [\"INDEX_ID_1\", \"INDEX_ID_2\"] No \"ALLOWED_PROVIDERS\" A list of allowed data provider names. Permissions the allowed data providers for the tenant. \u2022 Available providers: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] list[str] cf. above Yes \"CLASSIFICATION_MAPPING\" Points to the filename of a json map in the /classification_mapping/ folder. This configures the mappings per data provider of from predefined categories -> instrument/data field identifiers (e.g., [\"REBRP-EquityRegionEuropeexeuro\", \"REBRP-EquityRegionEurozone\", \"REBRP-EquityRegionUnitedKingdomLongRescaled\"] are data field lookup keys for the EUROPE_DEVELOPED subcategory for EQUITY_REGION category for MORNINGSTAR data provider). list[str] cf. above Yes","title":"Data Model"},{"location":"value-added-apis/themes/","text":"Service Description \u00b6 The InvestSuite quant team composes and actively manages a list of Themes or thematic instrument groups such as Healthcare, Clean & Green Economy, Social Trends each holding an applicable list of financial instruments. The aim of the Themes Value-Added-API service is to offer a means to filter the instrument universe to their personal preference and view. To retrieve Themes and selected instruments within them perform a GET request against the /themes/ endpoint: Themes API Redoc Documentation Themes API Swagger UI Interface Themes can be grouped into Metathemes. A Metatheme consists of multiple themes and will combine their instruments with its own. Themes GET \u00b6 Request Themes and Metathemes instruments and metadata by passing your tenant identifier. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/themes/?include_children=false\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /themes/?include_children=false HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Query Parameter Field Description Data type Example Required include_children By default Metathemes that consist of multiple child Themes will not include child instruments. Setting include_children to true will include the instruments of child Themes into the Metathemes data. boolean: true | false No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"name\" : \"theme1\" , \"description\" : \"Description of theme1.\" , \"type\" : \"theme\" , \"children\" : [], \"instruments\" : [ { \"isin\" : \"ISIN1234\" , \"name\" : \"CompanyXYZ Inc.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" }, ... { \"name\" : \"metatheme1\" , \"description\" : \"Description of metatheme2.\" , \"type\" : \"metatheme\" , \"children\" : [ \"theme1\" ], \"instruments\" : [ { \"isin\" : \"ISIN5678\" , \"name\" : \"Enterprise Corp.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" } ] InvestSuite Theme Screening Methodology \u00b6 The screening process consists of two-phases each of which is based on a automated process using human-in-the-loop artificial intelligence. Theme identification: Themes and Thematic Investments are manually identified based on social trends or based on popular investment products (Thematic ETFs). A description and criteria for screening are drafted. Instrument screening: We automatically check the main activities of the instrument companies and their descriptions. The automated screening is then followed by extensive manual screening by humans and serves as a guide. Currently, the majority of the screening work is done by humans with automated suggestions.","title":"Themes API"},{"location":"value-added-apis/themes/#service-description","text":"The InvestSuite quant team composes and actively manages a list of Themes or thematic instrument groups such as Healthcare, Clean & Green Economy, Social Trends each holding an applicable list of financial instruments. The aim of the Themes Value-Added-API service is to offer a means to filter the instrument universe to their personal preference and view. To retrieve Themes and selected instruments within them perform a GET request against the /themes/ endpoint: Themes API Redoc Documentation Themes API Swagger UI Interface Themes can be grouped into Metathemes. A Metatheme consists of multiple themes and will combine their instruments with its own.","title":"Service Description"},{"location":"value-added-apis/themes/#themes-get","text":"Request Themes and Metathemes instruments and metadata by passing your tenant identifier. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/themes/?include_children=false\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /themes/?include_children=false HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Query Parameter Field Description Data type Example Required include_children By default Metathemes that consist of multiple child Themes will not include child instruments. Setting include_children to true will include the instruments of child Themes into the Metathemes data. boolean: true | false No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"name\" : \"theme1\" , \"description\" : \"Description of theme1.\" , \"type\" : \"theme\" , \"children\" : [], \"instruments\" : [ { \"isin\" : \"ISIN1234\" , \"name\" : \"CompanyXYZ Inc.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" }, ... { \"name\" : \"metatheme1\" , \"description\" : \"Description of metatheme2.\" , \"type\" : \"metatheme\" , \"children\" : [ \"theme1\" ], \"instruments\" : [ { \"isin\" : \"ISIN5678\" , \"name\" : \"Enterprise Corp.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" } ]","title":"Themes GET"},{"location":"value-added-apis/themes/#investsuite-theme-screening-methodology","text":"The screening process consists of two-phases each of which is based on a automated process using human-in-the-loop artificial intelligence. Theme identification: Themes and Thematic Investments are manually identified based on social trends or based on popular investment products (Thematic ETFs). A description and criteria for screening are drafted. Instrument screening: We automatically check the main activities of the instrument companies and their descriptions. The automated screening is then followed by extensive manual screening by humans and serves as a guide. Currently, the majority of the screening work is done by humans with automated suggestions.","title":"InvestSuite Theme Screening Methodology"}]}