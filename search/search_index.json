{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the InvestSuite Integration API developer documentation. Glad you're integrating with InvestSuite! Before going further let's make sure you've come to the right place. These pages provide technical documentation to assist developers in working with our APIs. We assume you've determined with our specialists the type of integration you\u2019d like to set up and are ready to dive right in. If not and instead you would like to know more about our products, please get in touch with a team member or find out more on investsuite.com. And if you run in trouble or anything, just drop us a mail at api@investsuite.com and we will very quickly respond. About this API \u00b6 The InvestSuite API is an Open API 3.0 compliant API for developers to integrate with InvestSuite products and services. It is a REST API specifically designed for backend-to-backend integrations . Common use cases for the InvestSuite API are: Initiate accounts in the InvestSuite system Update portfolio holdings and transactions Retrieve portfolio statistics Info You are looking at version 1.9 of the InvestSuite API. As renewed insights arise it will be necessary to change and adjust some parts of the API. Still it is the intention of InvestSuite to not introduce breaking changes so that version upgrades will not affect your integrations. Instead of changes to existing endpoints and models, in future versions endpoints may be added and models extended. The InvestSuite API is in constant progress to give you a good developer experience and make integration as effortless as can be. If you have any ideas or comments please send them to api@investsuite.com . So\u2026 let\u2019s dive in. About InvestSuite \u00b6 InvestSuite provides wealthtech solutions to banks, brokers, wealth managers and other financial institutions in Europe, the Middle East, Asia and the Americas. Our suite of products consists of Portfolio Optimizer, StoryTeller, Robo Advisor and Self Investor, all world class digital investment solutions to serve your clients better. For more information, please visit www.investsuite.com .","title":"Introduction"},{"location":"#about-this-api","text":"The InvestSuite API is an Open API 3.0 compliant API for developers to integrate with InvestSuite products and services. It is a REST API specifically designed for backend-to-backend integrations . Common use cases for the InvestSuite API are: Initiate accounts in the InvestSuite system Update portfolio holdings and transactions Retrieve portfolio statistics Info You are looking at version 1.9 of the InvestSuite API. As renewed insights arise it will be necessary to change and adjust some parts of the API. Still it is the intention of InvestSuite to not introduce breaking changes so that version upgrades will not affect your integrations. Instead of changes to existing endpoints and models, in future versions endpoints may be added and models extended. The InvestSuite API is in constant progress to give you a good developer experience and make integration as effortless as can be. If you have any ideas or comments please send them to api@investsuite.com . So\u2026 let\u2019s dive in.","title":"About this API"},{"location":"#about-investsuite","text":"InvestSuite provides wealthtech solutions to banks, brokers, wealth managers and other financial institutions in Europe, the Middle East, Asia and the Americas. Our suite of products consists of Portfolio Optimizer, StoryTeller, Robo Advisor and Self Investor, all world class digital investment solutions to serve your clients better. For more information, please visit www.investsuite.com .","title":"About InvestSuite"},{"location":"changelog/","text":"Maintenance team \u00b6 The current and past members of the InvestSuite team. @lsorber @gidven @Lotte-Verheyden-IVS @LukV @woutervanranst @MelanieHoubrechts v9 (2022-06-13) \u00b6 Added how to register the cancellation of an order v8 (2022-02-21) \u00b6 Fixed technical issues 1/ with pymdownx.tabbed being broken and 2/ custom domain name being lost on every deploy v7 (2022-01-14) \u00b6 Add detailed instructions on Portfolio Optimizer v6 (2021-11-19) \u00b6 Add portfolio funding and cash withdrawal v6 (2021-11-19) \u00b6 Add Financial Data Service API documentation v5 (2021-10-19) \u00b6 Add draft Risk Profiler documentation Add cash transactions documentation Created mailbox api@investsuite.com Updated error codes v4 (2021-10-12) \u00b6 For InvestSuite API v1.9 Add Common scenarios: Portfolio synchronization v3 (2021-09-28) \u00b6 For InvestSuite API v1.8 Add Quick start section Add Common scenarios: Account initiation v2 (2021-06-24) \u00b6 For InvestSuite API v0.1.0 Add Introduction page Add Get started: authentication Add Release notes (this) v1 (2021-04-08) \u00b6 For InvestSuite API v0.1.0 Scaffolding InvestSuite API documentation Add \"Embedding\" article","title":"Release notes"},{"location":"changelog/#maintenance-team","text":"The current and past members of the InvestSuite team. @lsorber @gidven @Lotte-Verheyden-IVS @LukV @woutervanranst @MelanieHoubrechts","title":"Maintenance team"},{"location":"changelog/#v9-2022-06-13","text":"Added how to register the cancellation of an order","title":"v9 (2022-06-13)"},{"location":"changelog/#v8-2022-02-21","text":"Fixed technical issues 1/ with pymdownx.tabbed being broken and 2/ custom domain name being lost on every deploy","title":"v8 (2022-02-21)"},{"location":"changelog/#v7-2022-01-14","text":"Add detailed instructions on Portfolio Optimizer","title":"v7 (2022-01-14)"},{"location":"changelog/#v6-2021-11-19","text":"Add portfolio funding and cash withdrawal","title":"v6 (2021-11-19)"},{"location":"changelog/#v6-2021-11-19_1","text":"Add Financial Data Service API documentation","title":"v6 (2021-11-19)"},{"location":"changelog/#v5-2021-10-19","text":"Add draft Risk Profiler documentation Add cash transactions documentation Created mailbox api@investsuite.com Updated error codes","title":"v5 (2021-10-19)"},{"location":"changelog/#v4-2021-10-12","text":"For InvestSuite API v1.9 Add Common scenarios: Portfolio synchronization","title":"v4 (2021-10-12)"},{"location":"changelog/#v3-2021-09-28","text":"For InvestSuite API v1.8 Add Quick start section Add Common scenarios: Account initiation","title":"v3 (2021-09-28)"},{"location":"changelog/#v2-2021-06-24","text":"For InvestSuite API v0.1.0 Add Introduction page Add Get started: authentication Add Release notes (this)","title":"v2 (2021-06-24)"},{"location":"changelog/#v1-2021-04-08","text":"For InvestSuite API v0.1.0 Scaffolding InvestSuite API documentation Add \"Embedding\" article","title":"v1 (2021-04-08)"},{"location":"concepts/authentication/","text":"Authenticate against the API to receive a JSON Web Token (JWT). Learn more about JWT at jwt.io . To authenticate you need an access key and a secret. Reach out to your InvestSuite representative or send a mail to api@investsuite.com and we will set you up in no time. Warning Requests should not be directly sent from your app or website, as your authentication data may be exposed in transit. All requests are required to be made via an HTTPS connection; requests made over plain HTTP will fail. When you successfully authenticate you receive an access_token and a refresh_token . Add the access_token to the HTTP headers in all subsequent requests. This is required to authenticate against the API service. You cannot access any endpoint without a valid JWT. The access_token has a limited lifetime. The duration is added to the response body in the expires_at field, e.g expires_at: 300 . Within the lifetime of the access_token you can refresh the token by issuing the /auth/refresh-token endpoint. We will try this out below where we will perform following three steps: Login: Authenticate with access_key_id and secret_access_key to retrieve an access token. Refresh token: Refresh the access token. Add token: Issue a GET request with the access token. Login \u00b6 HTTP curl POST /auth/login/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"access_key_id\" : \"{access_key}\" , \"secret_access_key\" : \"{secret}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/login/' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"access_key_id\":\"{access_key}\", \"secret_access_key\":\"{secret}\" }' Response: { \"access_token\" : \"{access_token_string}\" , \"token_type\" : \"Bearer\" , \"expires_in\" : \"300\" , \"refresh_token\" : \"{refresh_token_string}\" } Refresh token \u00b6 Use the /auth/refresh-token/ endpoint to silently prolong the session. This endpoint will return the same response as /auth/login does. HTTP curl POST /auth/refresh-token/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"refresh_token\" : \"{refresh_token_string}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/refresh-token/' \\ --header 'Content-Type: application/json' \\ --data-raw '{\"refresh_token\": \"{refresh_token_string}\"}' Add token to requests \u00b6 You are obliged to use the JWT Web Token in all subsequent requests. This is the token that is returned in the access_token property. API requests without authentication will fail and return a 403 Access Forbidden . JSON Web Tokens must be specified via an authorization header as a Bearer token, eg: Authorization: Bearer 4eC39HqLyjWDarjtT1zdp7dc . To try, replace {string} in the curl request below with the access_token you obtained above, and launch the command from your terminal. HTTP curl GET /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/users/' \\ --H 'Authorization: Bearer {access_token_string}'","title":"Authentication"},{"location":"concepts/authentication/#login","text":"HTTP curl POST /auth/login/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"access_key_id\" : \"{access_key}\" , \"secret_access_key\" : \"{secret}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/login/' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"access_key_id\":\"{access_key}\", \"secret_access_key\":\"{secret}\" }' Response: { \"access_token\" : \"{access_token_string}\" , \"token_type\" : \"Bearer\" , \"expires_in\" : \"300\" , \"refresh_token\" : \"{refresh_token_string}\" }","title":"Login"},{"location":"concepts/authentication/#refresh-token","text":"Use the /auth/refresh-token/ endpoint to silently prolong the session. This endpoint will return the same response as /auth/login does. HTTP curl POST /auth/refresh-token/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json { \"refresh_token\" : \"{refresh_token_string}\" } curl --location --request POST 'https://api.sandbox.investsuite.com/auth/refresh-token/' \\ --header 'Content-Type: application/json' \\ --data-raw '{\"refresh_token\": \"{refresh_token_string}\"}'","title":"Refresh token"},{"location":"concepts/authentication/#add-token-to-requests","text":"You are obliged to use the JWT Web Token in all subsequent requests. This is the token that is returned in the access_token property. API requests without authentication will fail and return a 403 Access Forbidden . JSON Web Tokens must be specified via an authorization header as a Bearer token, eg: Authorization: Bearer 4eC39HqLyjWDarjtT1zdp7dc . To try, replace {string} in the curl request below with the access_token you obtained above, and launch the command from your terminal. HTTP curl GET /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/users/' \\ --H 'Authorization: Bearer {access_token_string}'","title":"Add token to requests"},{"location":"concepts/embedding/","text":"Introduction \u00b6 The InvestSuite API supports optional embedding of entities by EntityID , a feature which is modeled after 1 Zalando's RESTful API Performance Guideline #158 . Embedding enables API clients to merge referenced entities directly into a single response, which reduces the amount of (sequential) round trips required to fetch data from InvestSuite's backend. This feature is particularly convenient in use cases where data from multiple entities is joined together, a common operation when preparing data for reporting purposes or in specific front end views. In order to embed certain field(s), the ?embed= query string parameter needs to be provided in GET requests. This parameter can be set to one or more field names that are available in the response object (and are references to other entities). The response will be extended with a populated _embedded key at the root level, which contains a full rendition of the referenced entities. This provides a useful level of flexibility in API responses, allowing clients to directly retrieve related data with a single request. Hint Embedding works for any response field value that is an (array of) EntityID s, which can be recognized by the globally-unique identifier that follows below regex (such as a UserID like U01234567890123456789012345 ). This regex translates to a single alphabet letter identifying the type of entity, followed by a 26-character ULID based on the Crockford base32 character set. ^[A-Z][0-9A-HJKMNP-TV-Z]{26}$ Single embedded entity \u00b6 Suppose an API client requires both data for a specific portfolio ( P01234567890123456789012345 ) and data for the user that owns this particular portfolio. Without embedding, this would be a sequential two-step process, where the client first retrieves the portfolio in question: Request Response (body) GET /portfolios/P01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... } And then uses the owned_by_user_id field value ( U01234567890123456789012345 ) in the response to query data for the owner, who turns out the be John Doe : Request Response (body) GET /users/U01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } Note In this example, unless the client already knows the UserID of the owner for this portfolio, the requests will by definition always be sequential because the required path parameter for the requests to /users/ is not known until the first response is received. With embedding, both requests can be rolled into a single operation , which adds the referenced entities to the _embedded key at the root of the response (see below). Note that this object contains a dictionary where the keys are the referenced EntityID s and the value is the data for that entity (in this case a User object). The client can now directly parse the information for the UserID appearing in the owned_by_used_id field from the _embedded object without having to perform a subsequent request to /users/ . Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Info The amount of 'work' required to retrieve data can be significantly reduced on both sides if embedding is used cleverly. In the above example, the number of requests required from the client is cut in half, which speeds up the interaction considerably. At the same time, API resources are used efficiently, as per-request overhead can be avoided. Multiple embedded entities \u00b6 For the next example, assume that the client requires a portfolio, the owner of the portfolio, and the user that updated the portfolio most recently. This can be achieved by adding multiple response fields to the embed= param, separated by commas: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id,version_authored_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"version_authored_by_user_id\" : \"U01234567890123456789012345\" , \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Note In this case, the referenced entity comes up twice: both as the owner of the portfolio and as the author of the most recent version. As a result, the _embedded object only contains a single object (no repeated keys). This helps to further reduce repeated queries and unnecessary overhead. Embedding with collections \u00b6 Similar to single-entity responses, collections support embedding as well. If embedding is requested, the _embedded object will contain referenced entities for all objects returned in the collection . For instance, a client can request a list of 10 portfolios and directly embed the owners of all these portfolios. This is particularly useful when creating front-end views or collecting data for reporting purposes where multiple entities need to be joined together in bulk. This process also reduces overhead on the server side: 1 query to retrieve portfolios, and 1 query to filter for the list of users is a lot more efficient than requesting these entities sequentially from the client side. Request Response (body) GET /portfolios/?embed=owned_by_user_id&limit=10 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"next\" : \"http://api.investsuite.com/portfolios/?embed=owned_by_user_id&limit=10&offset=P01234567890123456789012345\" , \"offset\" : \"P01234567890123456789012345\" , \"results\" : [ { \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"id\" : \"P01234567890123456789012345\" , ... }, { \"owned_by_user_id\" : \"U98765432109876543210987654\" , \"id\" : \"P98765432109876543210987654\" , ... }, ... ], \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... }, ... } } Embedding a reference to a list of entities \u00b6 Finally, it is also possible to embed not just a single referenced entity, but an array pointing at multiple entity IDs. The readable_by and modifiable_by arrays in the standard entity response are a good example, as these can contain references to multiple (different) entities, such as users and user groups. Suppose the requirement is to retrieve all users that have read access to a certain portfolio, which again can be achieved with a single request. In the below response, user Jane has view-only permissions to the portfolio of John , who is the owner and has both read and write permissions: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=readable_by HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , \"U98765432109876543210987654\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... } } } FAQ \u00b6 What common errors can be encountered when working with embedding? The API will throw helpful error messages when the requested embedding could not be completed successfully, indicating the location of the error ( loc , pointing at query , parameter: embed ), and a human-readable error message with a reference to the received value. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"query\" , \"embed\" ], \"msg\" : \"field 'not_an_existing_field' not found in this entity\" , \"type\" : \"value_error.exception\" } ], \"status\" : 400 } In case a field is requested that that cannot be embedded (i.e. a field that is not a reference to another entity), the error message will be: \"msg\" : \"field 'first_name' cannot be embedded\" What happens if the requesting user does not have access to the embedded entity? Read and write permissions are controlled by the readable_by and modifiable_by arrays on each entity respectively. If the requesting user does not have the right permissions (in this case, its ID is not in the readable_by list on the referenced entity), a standard 403 Forbidden . Note that the error references the embedded entity , which is another user in the below example. This could be slightly confusing when the original request was for a different entity such as a portfolio, but the error indicates lack of read access to a user. { \"title\" : \"Access forbidden\" , \"detail\" : \"User U01234567890123456789012345 does not have READ access on U98765432109876543210987654 (version=latest)\" , \"status\" : 403 } What happens if a reference to a deleted entity is embedded? Similar to the permission error above, when a reference to an entity is requested for embedding, but that entity is no longer available, a standard 404 Not Found response is returned. Again, bear in mind that this error is specific to the embedded entity . It might for instance be possible to retrieve a portfolio instance, but if an embedded reference to the owner of that portfolio is a deleted object, the error will indicate this: { \"title\" : \"Resource not found\" , \"detail\" : \"Entity 'U01234567890123456789012345' (version=0) not found for tenant 'example.com'\" , \"status\" : 404 , } The Zalando guidelines include an example of embedding a sub-resource into the response. The InvestSuite API supports embedding of any referenced entity (which does not necessarily have to be a sub-resource of the requested entity). In addition, it is also possible to embed a list of referenced entities instead of a just single instance. \u21a9","title":"Embedding"},{"location":"concepts/embedding/#introduction","text":"The InvestSuite API supports optional embedding of entities by EntityID , a feature which is modeled after 1 Zalando's RESTful API Performance Guideline #158 . Embedding enables API clients to merge referenced entities directly into a single response, which reduces the amount of (sequential) round trips required to fetch data from InvestSuite's backend. This feature is particularly convenient in use cases where data from multiple entities is joined together, a common operation when preparing data for reporting purposes or in specific front end views. In order to embed certain field(s), the ?embed= query string parameter needs to be provided in GET requests. This parameter can be set to one or more field names that are available in the response object (and are references to other entities). The response will be extended with a populated _embedded key at the root level, which contains a full rendition of the referenced entities. This provides a useful level of flexibility in API responses, allowing clients to directly retrieve related data with a single request. Hint Embedding works for any response field value that is an (array of) EntityID s, which can be recognized by the globally-unique identifier that follows below regex (such as a UserID like U01234567890123456789012345 ). This regex translates to a single alphabet letter identifying the type of entity, followed by a 26-character ULID based on the Crockford base32 character set. ^[A-Z][0-9A-HJKMNP-TV-Z]{26}$","title":"Introduction"},{"location":"concepts/embedding/#single-embedded-entity","text":"Suppose an API client requires both data for a specific portfolio ( P01234567890123456789012345 ) and data for the user that owns this particular portfolio. Without embedding, this would be a sequential two-step process, where the client first retrieves the portfolio in question: Request Response (body) GET /portfolios/P01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... } And then uses the owned_by_user_id field value ( U01234567890123456789012345 ) in the response to query data for the owner, who turns out the be John Doe : Request Response (body) GET /users/U01234567890123456789012345 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } Note In this example, unless the client already knows the UserID of the owner for this portfolio, the requests will by definition always be sequential because the required path parameter for the requests to /users/ is not known until the first response is received. With embedding, both requests can be rolled into a single operation , which adds the referenced entities to the _embedded key at the root of the response (see below). Note that this object contains a dictionary where the keys are the referenced EntityID s and the value is the data for that entity (in this case a User object). The client can now directly parse the information for the UserID appearing in the owned_by_used_id field from the _embedded object without having to perform a subsequent request to /users/ . Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Info The amount of 'work' required to retrieve data can be significantly reduced on both sides if embedding is used cleverly. In the above example, the number of requests required from the client is cut in half, which speeds up the interaction considerably. At the same time, API resources are used efficiently, as per-request overhead can be avoided.","title":"Single embedded entity"},{"location":"concepts/embedding/#multiple-embedded-entities","text":"For the next example, assume that the client requires a portfolio, the owner of the portfolio, and the user that updated the portfolio most recently. This can be achieved by adding multiple response fields to the embed= param, separated by commas: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=owned_by_user_id,version_authored_by_user_id HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, ... \"id\" : \"P01234567890123456789012345\" , ... \"version_authored_by_user_id\" : \"U01234567890123456789012345\" , \"_embedded\" : { \"U01234567890123456789012345\" : { \"readable_by\" : [ \"U01234567890123456789012345\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" , ], \"external_id\" : \"my_external_user_id\" , \"first_name\" : \"John\" , \"last_name\" : \"Doe\" , \"email\" : \"john_doe@example.com\" , ... \"id\" : \"U01234567890123456789012345\" , ... } } } Note In this case, the referenced entity comes up twice: both as the owner of the portfolio and as the author of the most recent version. As a result, the _embedded object only contains a single object (no repeated keys). This helps to further reduce repeated queries and unnecessary overhead.","title":"Multiple embedded entities"},{"location":"concepts/embedding/#embedding-with-collections","text":"Similar to single-entity responses, collections support embedding as well. If embedding is requested, the _embedded object will contain referenced entities for all objects returned in the collection . For instance, a client can request a list of 10 portfolios and directly embed the owners of all these portfolios. This is particularly useful when creating front-end views or collecting data for reporting purposes where multiple entities need to be joined together in bulk. This process also reduces overhead on the server side: 1 query to retrieve portfolios, and 1 query to filter for the list of users is a lot more efficient than requesting these entities sequentially from the client side. Request Response (body) GET /portfolios/?embed=owned_by_user_id&limit=10 HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"next\" : \"http://api.investsuite.com/portfolios/?embed=owned_by_user_id&limit=10&offset=P01234567890123456789012345\" , \"offset\" : \"P01234567890123456789012345\" , \"results\" : [ { \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"id\" : \"P01234567890123456789012345\" , ... }, { \"owned_by_user_id\" : \"U98765432109876543210987654\" , \"id\" : \"P98765432109876543210987654\" , ... }, ... ], \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... }, ... } }","title":"Embedding with collections"},{"location":"concepts/embedding/#embedding-a-reference-to-a-list-of-entities","text":"Finally, it is also possible to embed not just a single referenced entity, but an array pointing at multiple entity IDs. The readable_by and modifiable_by arrays in the standard entity response are a good example, as these can contain references to multiple (different) entities, such as users and user groups. Suppose the requirement is to retrieve all users that have read access to a certain portfolio, which again can be achieved with a single request. In the below response, user Jane has view-only permissions to the portfolio of John , who is the owner and has both read and write permissions: Request Response (body) GET /portfolios/P01234567890123456789012345?embed=readable_by HTTP / 1.1 Host : api.investsuite.com Accept : application/json Accept-Encoding : gzip, deflate Connection : Keep-Alive { \"readable_by\" : [ \"U01234567890123456789012345\" , \"U98765432109876543210987654\" , ], \"modifiable_by\" : [ \"U01234567890123456789012345\" ], \"external_id\" : \"my_external_portfolio_id\" , \"name\" : \"Example Portfolio\" , \"owned_by_user_id\" : \"U01234567890123456789012345\" , \"portfolio\" : { ... }, \"id\" : \"P01234567890123456789012345\" , ... \"_embedded\" : { \"U01234567890123456789012345\" : { \"first_name\" : \"John\" , ... }, \"U98765432109876543210987654\" : { \"first_name\" : \"Jane\" , ... } } }","title":"Embedding a reference to a list of entities"},{"location":"concepts/embedding/#faq","text":"What common errors can be encountered when working with embedding? The API will throw helpful error messages when the requested embedding could not be completed successfully, indicating the location of the error ( loc , pointing at query , parameter: embed ), and a human-readable error message with a reference to the received value. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"query\" , \"embed\" ], \"msg\" : \"field 'not_an_existing_field' not found in this entity\" , \"type\" : \"value_error.exception\" } ], \"status\" : 400 } In case a field is requested that that cannot be embedded (i.e. a field that is not a reference to another entity), the error message will be: \"msg\" : \"field 'first_name' cannot be embedded\" What happens if the requesting user does not have access to the embedded entity? Read and write permissions are controlled by the readable_by and modifiable_by arrays on each entity respectively. If the requesting user does not have the right permissions (in this case, its ID is not in the readable_by list on the referenced entity), a standard 403 Forbidden . Note that the error references the embedded entity , which is another user in the below example. This could be slightly confusing when the original request was for a different entity such as a portfolio, but the error indicates lack of read access to a user. { \"title\" : \"Access forbidden\" , \"detail\" : \"User U01234567890123456789012345 does not have READ access on U98765432109876543210987654 (version=latest)\" , \"status\" : 403 } What happens if a reference to a deleted entity is embedded? Similar to the permission error above, when a reference to an entity is requested for embedding, but that entity is no longer available, a standard 404 Not Found response is returned. Again, bear in mind that this error is specific to the embedded entity . It might for instance be possible to retrieve a portfolio instance, but if an embedded reference to the owner of that portfolio is a deleted object, the error will indicate this: { \"title\" : \"Resource not found\" , \"detail\" : \"Entity 'U01234567890123456789012345' (version=0) not found for tenant 'example.com'\" , \"status\" : 404 , } The Zalando guidelines include an example of embedding a sub-resource into the response. The InvestSuite API supports embedding of any referenced entity (which does not necessarily have to be a sub-resource of the requested entity). In addition, it is also possible to embed a list of referenced entities instead of a just single instance. \u21a9","title":"FAQ"},{"location":"concepts/entities/","text":"Introduction \u00b6 This page describes the business objects used by InvestSuite, and the interactions that are possible on them. The business objects are also referred to as (a collection of) entities. Concepts \u00b6 Internal ID The first letter of the internal ID of an entity is defined by its type, eg. the ID of a Portfolio will always start with a P . External ID Middleware The external_id typically maps to the id in the Client middleware. Entities have an external_id field. The field is not required, but if it is provided, it must be unique. Immutability Objects in the InvestSuite system are immutable. Every change leads to a new version so that a log exists of who performed which change at which moment. The version number is returned alongside other metadata fields. Use the Admin Console to access this log and to view diffs between versions. Querying business objects \u00b6 To query a specific business object, send a GET request to the entity root path e.g. GET /users , GET /portfolios , GET /instrument_groups . Collection endpoints accept the following parameters: Parameter Description limit Example: limit=50 . Allows you to pass in the number of items to be returned in the results array of the response. The default collection response size is 20 items . The maximum size is 100. offset Example offset=50 . To be used in combination with the limit parameter, the offset defines the number of records that need to be skipped. embed Example: embed=field_name_1,field_name_2 . Optional comma-separated list of field names for which the referenced entity is to be included in the _embedded object of the response. See Embedding . query Example: query=email+eq+'jane.doe@example.com . See below. Request Response (body) GET /portfolios/ ?embed=owned_by_user_id &limit=2 HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"next\" : \"http://api.sandbox.investsuite.com/portfolios/?embed=owned_by_user_id&limit=2\" , \"count\" : 204 , \"offset\" : \"10\" , \"results\" :[ { \"external_id\" : \"AE820230000000000001918\" , \"readable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"modifiable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"name\" : \"Child's education\" , \"owned_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01F5G34T4FE6T1EH798FA0M170\" , \"goal_id\" : \"L01EF46X3JH1QDFPD270BKSDTTX\" , \"horizon_id\" : \"H01EF46X564YMWFR8GTNBED16CN\" , \"risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"divest_amount\" : null , \"start_amount\" : 600.0 , \"recurring_deposit_amount\" : 500.0 , \"end_datetime\" : null , \"active\" : true , \"proposed_risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"tags\" :[ ], \"risk_profile_score\" : 3 , \"background_image\" : \"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1200&q=82\" , \"background_color\" : null } }, \"brokerage_account\" :{ \"brokerage_portfolio_id\" : \"BrokerAccountKey\" , \"brokerage_user_id\" : \"BrokerAccountId\" , \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"AE820230000000000001918\" , \"bank_id\" : null }, \"owned_by_user_ids\" :[ ], \"portfolio\" :{ }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F7KDVY6H718JNV91840DE5V4\" , \"creation_datetime\" : \"2021-06-07T00:00:00+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-07T14:26:21.231855+00:00\" , \"version_authored_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"deleted\" : false , \"_embedded\" :{ }, \"status\" : \"WAITING_FOR_FUNDS\" } ], \"_embedded\" :{ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" :{ \"external_id\" : null , \"readable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"modifiable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"id\" : \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"creation_datetime\" : \"2021-05-17T00:00:00+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-05-17T15:43:23.427412+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"_embedded\" :{ }, \"first_name\" : \"Laurent\" , \"last_name\" : \"Sorber\" , \"email\" : \"laurent.sorber@gmail.com\" , \"phone\" : null , \"brokerage_user_id\" : null , \"idp_user_id\" : \"a8c8b808-bad9-4acb-babf-aae52488e468\" , \"language\" : \"en-US\" , \"products\" :[ ] } } } Query syntax \u00b6 The API provides a structural search and filtering mechanism for all entities. We already opted to work with a query string parameter query=email+eq+'jane.doe@example.com instead of a POST body for more efficient client-side caching and ease of use for testing. The query syntax is a mix of both OData and Apache Lucene Query Parser Syntax . Request GET /portfolios ?query=lastmodified+in+['20200101'+to+'20240101'] HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} Info Every entity type can be queried by issuing a GET request e.g. GET users/?query=email+eq+'jane*' . The query string must be URL encoded. This implies that spaces would be transformed to %20 , but for improved legibility we recommend using + instead Operators \u00b6 Operator type Operator Example Number operator Exact match age eq 1 Number operator Less than age lt 18 Number operator Less than or equal age le 18 Number operator Greater than age gt 18 Number operator Greater than or equal age ge 18 String operator Exact match email eq 'jane.doe@example.com' String operator Prefix search email eq john* String operator Postfix search email eq '*gmail.com' String operator LIKE matching email eq '*gmail*' Date operator Exact match last_modified eq '2020-09-11T09:03:53.721588+00:00' Date operator Is in range for dates without time lastmodified in ['20200101' to '20210101'] Date operator Is in range for dates with time lastmodified in ['2020-09-11T09:03:53.721588' to '2020-11-11T09:03:53.721588'] Date operator Is in range for dates with timeezonr lastmodified in ['2020-09-11T09:03:53.721588+00:00' to '2020-11-11T09:03:53.721588+00:00'] Boolean operator Boolean queries archived eq true List operator IN (element of) field in ['value1', 'value2', 'value3'] Logical operator AND , OR email eq kristof and age gt 18 Hint You can combine operators in all possible compositions e.g. query=email+eq+'*tom*'+and+firstname+in+[\u2019tom',+\u2018thomas\u2019] . Sorting \u00b6 The sorting operator always comes as the last term, except when there is a selection term which is always at the very last: orderby {attribute_name}, orderby {attribute_name} asc e.g. orderby+age is always ascending, so the same as orderby+age+asc Order descending: orderby {attribute_name} desc e.g. orderby+age+desc Multiple attributes: orderby {attribute_name} desc, {attribute_name2} asc e.g. orderby+age+desc,+firstname Attributes names can be nested e.g. orderby+manager.bank_account . List of business objects \u00b6 Common: Users Portfolio Transaction Robo Advisor only: Optimization","title":"Business objects"},{"location":"concepts/entities/#introduction","text":"This page describes the business objects used by InvestSuite, and the interactions that are possible on them. The business objects are also referred to as (a collection of) entities.","title":"Introduction"},{"location":"concepts/entities/#concepts","text":"Internal ID The first letter of the internal ID of an entity is defined by its type, eg. the ID of a Portfolio will always start with a P . External ID Middleware The external_id typically maps to the id in the Client middleware. Entities have an external_id field. The field is not required, but if it is provided, it must be unique. Immutability Objects in the InvestSuite system are immutable. Every change leads to a new version so that a log exists of who performed which change at which moment. The version number is returned alongside other metadata fields. Use the Admin Console to access this log and to view diffs between versions.","title":"Concepts"},{"location":"concepts/entities/#querying-business-objects","text":"To query a specific business object, send a GET request to the entity root path e.g. GET /users , GET /portfolios , GET /instrument_groups . Collection endpoints accept the following parameters: Parameter Description limit Example: limit=50 . Allows you to pass in the number of items to be returned in the results array of the response. The default collection response size is 20 items . The maximum size is 100. offset Example offset=50 . To be used in combination with the limit parameter, the offset defines the number of records that need to be skipped. embed Example: embed=field_name_1,field_name_2 . Optional comma-separated list of field names for which the referenced entity is to be included in the _embedded object of the response. See Embedding . query Example: query=email+eq+'jane.doe@example.com . See below. Request Response (body) GET /portfolios/ ?embed=owned_by_user_id &limit=2 HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"next\" : \"http://api.sandbox.investsuite.com/portfolios/?embed=owned_by_user_id&limit=2\" , \"count\" : 204 , \"offset\" : \"10\" , \"results\" :[ { \"external_id\" : \"AE820230000000000001918\" , \"readable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"modifiable_by\" :[ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" ], \"name\" : \"Child's education\" , \"owned_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01F5G34T4FE6T1EH798FA0M170\" , \"goal_id\" : \"L01EF46X3JH1QDFPD270BKSDTTX\" , \"horizon_id\" : \"H01EF46X564YMWFR8GTNBED16CN\" , \"risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"divest_amount\" : null , \"start_amount\" : 600.0 , \"recurring_deposit_amount\" : 500.0 , \"end_datetime\" : null , \"active\" : true , \"proposed_risk_profile_id\" : \"K01EF46X76V5VB4E92FC1D01856\" , \"tags\" :[ ], \"risk_profile_score\" : 3 , \"background_image\" : \"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1200&q=82\" , \"background_color\" : null } }, \"brokerage_account\" :{ \"brokerage_portfolio_id\" : \"BrokerAccountKey\" , \"brokerage_user_id\" : \"BrokerAccountId\" , \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"AE820230000000000001918\" , \"bank_id\" : null }, \"owned_by_user_ids\" :[ ], \"portfolio\" :{ }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F7KDVY6H718JNV91840DE5V4\" , \"creation_datetime\" : \"2021-06-07T00:00:00+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-07T14:26:21.231855+00:00\" , \"version_authored_by_user_id\" : \"U01ERYVVSZTKKYEEVX3Y6JECE83\" , \"deleted\" : false , \"_embedded\" :{ }, \"status\" : \"WAITING_FOR_FUNDS\" } ], \"_embedded\" :{ \"U01ERYVVSZTKKYEEVX3Y6JECE83\" :{ \"external_id\" : null , \"readable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"modifiable_by\" :[ \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" ], \"id\" : \"U01F5XFY0S38KJYVHX0X3GJ4KWM\" , \"creation_datetime\" : \"2021-05-17T00:00:00+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-05-17T15:43:23.427412+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"_embedded\" :{ }, \"first_name\" : \"Laurent\" , \"last_name\" : \"Sorber\" , \"email\" : \"laurent.sorber@gmail.com\" , \"phone\" : null , \"brokerage_user_id\" : null , \"idp_user_id\" : \"a8c8b808-bad9-4acb-babf-aae52488e468\" , \"language\" : \"en-US\" , \"products\" :[ ] } } }","title":"Querying business objects"},{"location":"concepts/entities/#query-syntax","text":"The API provides a structural search and filtering mechanism for all entities. We already opted to work with a query string parameter query=email+eq+'jane.doe@example.com instead of a POST body for more efficient client-side caching and ease of use for testing. The query syntax is a mix of both OData and Apache Lucene Query Parser Syntax . Request GET /portfolios ?query=lastmodified+in+['20200101'+to+'20240101'] HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} Info Every entity type can be queried by issuing a GET request e.g. GET users/?query=email+eq+'jane*' . The query string must be URL encoded. This implies that spaces would be transformed to %20 , but for improved legibility we recommend using + instead","title":"Query syntax"},{"location":"concepts/entities/#operators","text":"Operator type Operator Example Number operator Exact match age eq 1 Number operator Less than age lt 18 Number operator Less than or equal age le 18 Number operator Greater than age gt 18 Number operator Greater than or equal age ge 18 String operator Exact match email eq 'jane.doe@example.com' String operator Prefix search email eq john* String operator Postfix search email eq '*gmail.com' String operator LIKE matching email eq '*gmail*' Date operator Exact match last_modified eq '2020-09-11T09:03:53.721588+00:00' Date operator Is in range for dates without time lastmodified in ['20200101' to '20210101'] Date operator Is in range for dates with time lastmodified in ['2020-09-11T09:03:53.721588' to '2020-11-11T09:03:53.721588'] Date operator Is in range for dates with timeezonr lastmodified in ['2020-09-11T09:03:53.721588+00:00' to '2020-11-11T09:03:53.721588+00:00'] Boolean operator Boolean queries archived eq true List operator IN (element of) field in ['value1', 'value2', 'value3'] Logical operator AND , OR email eq kristof and age gt 18 Hint You can combine operators in all possible compositions e.g. query=email+eq+'*tom*'+and+firstname+in+[\u2019tom',+\u2018thomas\u2019] .","title":"Operators"},{"location":"concepts/entities/#sorting","text":"The sorting operator always comes as the last term, except when there is a selection term which is always at the very last: orderby {attribute_name}, orderby {attribute_name} asc e.g. orderby+age is always ascending, so the same as orderby+age+asc Order descending: orderby {attribute_name} desc e.g. orderby+age+desc Multiple attributes: orderby {attribute_name} desc, {attribute_name2} asc e.g. orderby+age+desc,+firstname Attributes names can be nested e.g. orderby+manager.bank_account .","title":"Sorting"},{"location":"concepts/entities/#list-of-business-objects","text":"Common: Users Portfolio Transaction Robo Advisor only: Optimization","title":"List of business objects"},{"location":"concepts/errors/","text":"Errors happen. If that is the case the API returns a 4** error if it assumes that the error is caused by your application, or a 5** in case of a server error. If there is no error anticipated the API returns a 2** code. In general, 4** errors are not retryable. 5** errors should be escalated to InvestSuite. Error codes \u00b6 Code Status Description 200 Successful response The request was successfully completed. 201 Created A new resource was successfully created. 400 Bad Request The request was invalid. 401 Unauthorized The request did not include an authentication token or the authentication token was expired. 403 Forbidden The client did not have permission to access the requested resource. 404 Not Found The requested resource was not found. 409 Business Logic Error There is a conflict in the request, or the request would create a conflict with the resource 422 Validation error The request was understood but a validation error prevented the server to process the request. If this is the case the API adds context to the response body (see example below). 500 Internal Server Error The request was not completed due to an internal error on the server side. Example of a 400 Bad Request \u00b6 When a validation error occurs the reason and the location are documented in the response body. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"body\" , \"rik_profile_id\" ], \"msg\" : \"extra fields not permitted\" , \"type\" : \"value_error.extra\" } ], \"status\" : 400 , \"body\" : { \"rik_profile_id\" : \"K01FJCEA3TBBXNPP6GYZ2688EE3\" } } Example of a 401 Unauthorised response \u00b6 { \"title\" : \"Unauthorized\" , \"description\" : \"JWT invalid\" , \"request_id\" : \"8d3cc569-00e1-9cdf-96b3-ed394f402fd3\" , \"timestamp\" : \"2021-10-19T15:06:19.855057+00:00\" }","title":"API errors"},{"location":"concepts/errors/#error-codes","text":"Code Status Description 200 Successful response The request was successfully completed. 201 Created A new resource was successfully created. 400 Bad Request The request was invalid. 401 Unauthorized The request did not include an authentication token or the authentication token was expired. 403 Forbidden The client did not have permission to access the requested resource. 404 Not Found The requested resource was not found. 409 Business Logic Error There is a conflict in the request, or the request would create a conflict with the resource 422 Validation error The request was understood but a validation error prevented the server to process the request. If this is the case the API adds context to the response body (see example below). 500 Internal Server Error The request was not completed due to an internal error on the server side.","title":"Error codes"},{"location":"concepts/errors/#example-of-a-400-bad-request","text":"When a validation error occurs the reason and the location are documented in the response body. { \"title\" : \"Bad request\" , \"detail\" : [ { \"loc\" : [ \"body\" , \"rik_profile_id\" ], \"msg\" : \"extra fields not permitted\" , \"type\" : \"value_error.extra\" } ], \"status\" : 400 , \"body\" : { \"rik_profile_id\" : \"K01FJCEA3TBBXNPP6GYZ2688EE3\" } }","title":"Example of a 400 Bad Request"},{"location":"concepts/errors/#example-of-a-401-unauthorised-response","text":"{ \"title\" : \"Unauthorized\" , \"description\" : \"JWT invalid\" , \"request_id\" : \"8d3cc569-00e1-9cdf-96b3-ed394f402fd3\" , \"timestamp\" : \"2021-10-19T15:06:19.855057+00:00\" }","title":"Example of a 401 Unauthorised response"},{"location":"concepts/events/","text":"Asynchronous interactions between InvestSuite and the Client Middleware can happen in multiple ways, depending on the direction. The below table summarizes the capabilities: Inbound InvestSuite Outbound InvestSuite Event Driven Not supported The Client Middleware responds to an event that is sent by the InvestSuite system REST /events/ Endpoint The Client Middleware notifies InvestSuite of an event through the POST /events/ endpoint Under development The Client Middleware regularly polls the GET /events/ endpoint Event Driven \u00b6 Outbound \u00b6 Architectural concept \u00b6 InvestSuite posts events on one single topic of the client's event queue Any AMQP/MQTT compatible message bus is supported, eg. Kafka, RabbitMQ, Azure Service Bus... Principles \u00b6 The strategy is to signal that an event has happened, not to include all information that the middleware may possibly require (as these requirements may vary wildly and may introduce breaking changes). Therefore, an additional REST API call may be required to get additional data. All events will use this envelope, with the actual information in data . Event body { \"id\" : s tr i n g , \"created\" : t imes ta mp , \"version\" : s tr i n g , \"subject\" : s tr i n g , \"action\" : s tr i n g , \"data\" : dic t } Field Type Content id string An ID uniquely identifying the event created timestamp The timestamp of the creation of the event version string The version of the event object. For now, this will always be \"1.0.0\" subject string A string representing a subject, always referring to an entity (see Entities Overview ) action string The action on the topic entity that triggers the event, for example 'creation' data dict A dictionary that contains specific fields, depending on the type, see below for the exhaustive list. Note We are deliberately using \u2018subject\u2019 i.o. \u2018topic\u2019, since 1/ the integration pattern with 3rd parties is that we will post all messages on 1 topic (so this will be confusing) and 2/ this field can, potentially in the future, be broader than only entities Portfolios \u00b6 Creation \u00b6 Info Applies to: Robo Advisor, Self Investor Fully qualified name: portfolios.creation When IVS supplies the the front-end application to the b2b client they should be notified by IVS when a (real money) portfolio is created. That way, the client can store the IVS portfolio_id at their side and (optionally) link it to the user in their database. It is up to the b2b client to check if the portfolio is \u201cpaper_money\u201d or \u201creal_money\u201d based on this event. This to decide if they need to proceed with setup at their side. Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"portfolios\" , \"action\" : \"creation\" , \"data\" : { \"id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"owned_by_user_id\" : \"a-user-id\" } Status update \u00b6 Info Applies to: Robo Advisor, Self Investor Fully qualified name: portfolios.status-update Every time a status of a portfolio gets updated an event will be sent to the b2b client. Possible values for the status field: WAITING_FOR_ACCOUNT: brokerage accounts are to be added by the b2b client WAITING_FOR_POLICY: user is still going through the risk profiling, so a policy was not yet determined. WAITING_FOR_FUNDS: waiting for incoming funds to arrive. This can be a trigger for the b2b client to push the client to make a transfer if this status isn\u2019t updated within a certain timeframe. ACTIVE: portfolio is in use INACTIVE Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"portfolios\" , \"action\" : \"status-update\" , \"data\" : { \"id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"value\" : \"INACTIVE\" } } Possible values for the value field: WAITING_FOR_POLICY WAITING_FOR_ACCOUNT WAITING_FOR_FUNDS ACTIVE INACTIVE Withdrawal request \u00b6 Info Applies to: Robo Advisor Fully qualified name: portfolios.withdrawal Whenever a user wants to withdraw money, IVS will update the divest amount on the portfolio object. Every update to this amount will trigger an event towards the b2b client. Divest amount: 1e100 \u2192 full withdrawal. a specific amount \u2192 partial withdrawal Note: value is the total amount that is requested for withdrawal, not the incremental value (eg. in case of two quickly subsequent withdrawal requests, where the first is not yet settled) Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"portfolios\" , \"action\" : \"divest-amount-update\" , \"data\" : { \"id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"divest_amount\" : 1.234 , \"currency\" : \"a-currency-code\" } } Optimisations \u00b6 Status update \u00b6 Info Applies to: Robo Advisor Fully qualified name: optimisations.status-update When an optimisation is ready we will notify the b2b client when the optimisation was successfully created. Fields: is_recommended: only when this is \u201cTrue\u201d the optimisation will be executed (discretionary) or will be proposed to the clientfor acceptance (advisory). Possible values for the status field: PENDING, SUCCESS, FAILURE, INFEASIBLE, NOT_OPTIMIZED Info In v1.0.0 (aug 2022) only status \u201cSUCCESS\u201d is used. Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"optimizations\" , \"action\" : \"status-update\" , \"data\" : { \"id\" : \"an-optimization-id\" , \"portfolio_id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"is_recommended\" : true , \"value\" : \"SUCCESS\" } Owner choice update \u00b6 Fully qualified name: optimisations.owner-choice-update This event is specifically useful for b2b clients who implemented an advisory flow (advisory mandate). In this case an optimisation may only be executed when the owner choice has been updated to \u201cACCEPT\u201d The id can be used to fetch the optimisation. Possible values for the status field are ACCEPT , REJECT , REOPTIMIZE , IGNORED Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"optimizations\" , \"action\" : \"owner-choice-update\" , \"data\" : { \"id\" : \"an-optimization-id\" , \"portfolio_id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"value\" : \"ACCEPT\" } } REST /events/ endpoint \u00b6 Inbound \u00b6 Funding (deposit) event \u00b6 HTTP POST /events/deposit/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Idempotency-Key : \"LVRYWG833Vp2FIIG\" { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } Warning In case of broker integration by InvestSuite, this event triggers the Funding flow. Therefore we strongly suggest using the idempotency-key to avoid double deposits if the middleware replays the event. We recommend using the id of the transaction generated by the core banking system. Withdrawal executed event \u00b6 Info Not to be confused with the withdrawal requested event . HTTP POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Idempotency-Key : \"LVRYWG833Vp2FIIG\" { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } Warning We strongly suggest using the idempotency-key to avoid double deposits. Outbound \u00b6 Warning This is still under development","title":"Events"},{"location":"concepts/events/#event-driven","text":"","title":"Event Driven"},{"location":"concepts/events/#outbound","text":"","title":"Outbound"},{"location":"concepts/events/#architectural-concept","text":"InvestSuite posts events on one single topic of the client's event queue Any AMQP/MQTT compatible message bus is supported, eg. Kafka, RabbitMQ, Azure Service Bus...","title":"Architectural concept"},{"location":"concepts/events/#principles","text":"The strategy is to signal that an event has happened, not to include all information that the middleware may possibly require (as these requirements may vary wildly and may introduce breaking changes). Therefore, an additional REST API call may be required to get additional data. All events will use this envelope, with the actual information in data . Event body { \"id\" : s tr i n g , \"created\" : t imes ta mp , \"version\" : s tr i n g , \"subject\" : s tr i n g , \"action\" : s tr i n g , \"data\" : dic t } Field Type Content id string An ID uniquely identifying the event created timestamp The timestamp of the creation of the event version string The version of the event object. For now, this will always be \"1.0.0\" subject string A string representing a subject, always referring to an entity (see Entities Overview ) action string The action on the topic entity that triggers the event, for example 'creation' data dict A dictionary that contains specific fields, depending on the type, see below for the exhaustive list. Note We are deliberately using \u2018subject\u2019 i.o. \u2018topic\u2019, since 1/ the integration pattern with 3rd parties is that we will post all messages on 1 topic (so this will be confusing) and 2/ this field can, potentially in the future, be broader than only entities","title":"Principles"},{"location":"concepts/events/#portfolios","text":"","title":"Portfolios"},{"location":"concepts/events/#creation","text":"Info Applies to: Robo Advisor, Self Investor Fully qualified name: portfolios.creation When IVS supplies the the front-end application to the b2b client they should be notified by IVS when a (real money) portfolio is created. That way, the client can store the IVS portfolio_id at their side and (optionally) link it to the user in their database. It is up to the b2b client to check if the portfolio is \u201cpaper_money\u201d or \u201creal_money\u201d based on this event. This to decide if they need to proceed with setup at their side. Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"portfolios\" , \"action\" : \"creation\" , \"data\" : { \"id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"owned_by_user_id\" : \"a-user-id\" }","title":"Creation"},{"location":"concepts/events/#status-update","text":"Info Applies to: Robo Advisor, Self Investor Fully qualified name: portfolios.status-update Every time a status of a portfolio gets updated an event will be sent to the b2b client. Possible values for the status field: WAITING_FOR_ACCOUNT: brokerage accounts are to be added by the b2b client WAITING_FOR_POLICY: user is still going through the risk profiling, so a policy was not yet determined. WAITING_FOR_FUNDS: waiting for incoming funds to arrive. This can be a trigger for the b2b client to push the client to make a transfer if this status isn\u2019t updated within a certain timeframe. ACTIVE: portfolio is in use INACTIVE Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"portfolios\" , \"action\" : \"status-update\" , \"data\" : { \"id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"value\" : \"INACTIVE\" } } Possible values for the value field: WAITING_FOR_POLICY WAITING_FOR_ACCOUNT WAITING_FOR_FUNDS ACTIVE INACTIVE","title":"Status update"},{"location":"concepts/events/#withdrawal-request","text":"Info Applies to: Robo Advisor Fully qualified name: portfolios.withdrawal Whenever a user wants to withdraw money, IVS will update the divest amount on the portfolio object. Every update to this amount will trigger an event towards the b2b client. Divest amount: 1e100 \u2192 full withdrawal. a specific amount \u2192 partial withdrawal Note: value is the total amount that is requested for withdrawal, not the incremental value (eg. in case of two quickly subsequent withdrawal requests, where the first is not yet settled) Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"portfolios\" , \"action\" : \"divest-amount-update\" , \"data\" : { \"id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"divest_amount\" : 1.234 , \"currency\" : \"a-currency-code\" } }","title":"Withdrawal request"},{"location":"concepts/events/#optimisations","text":"","title":"Optimisations"},{"location":"concepts/events/#status-update_1","text":"Info Applies to: Robo Advisor Fully qualified name: optimisations.status-update When an optimisation is ready we will notify the b2b client when the optimisation was successfully created. Fields: is_recommended: only when this is \u201cTrue\u201d the optimisation will be executed (discretionary) or will be proposed to the clientfor acceptance (advisory). Possible values for the status field: PENDING, SUCCESS, FAILURE, INFEASIBLE, NOT_OPTIMIZED Info In v1.0.0 (aug 2022) only status \u201cSUCCESS\u201d is used. Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"optimizations\" , \"action\" : \"status-update\" , \"data\" : { \"id\" : \"an-optimization-id\" , \"portfolio_id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"is_recommended\" : true , \"value\" : \"SUCCESS\" }","title":"Status update"},{"location":"concepts/events/#owner-choice-update","text":"Fully qualified name: optimisations.owner-choice-update This event is specifically useful for b2b clients who implemented an advisory flow (advisory mandate). In this case an optimisation may only be executed when the owner choice has been updated to \u201cACCEPT\u201d The id can be used to fetch the optimisation. Possible values for the status field are ACCEPT , REJECT , REOPTIMIZE , IGNORED Event body { \"id\" : \"an-event-id\" , \"created\" : \"-1000000000-01-01T00:00:00Z\" , \"version\" : \"1.0.0\" , \"subject\" : \"optimizations\" , \"action\" : \"owner-choice-update\" , \"data\" : { \"id\" : \"an-optimization-id\" , \"portfolio_id\" : \"a-portfolio-id\" , \"external_id\" : \"an-external-id\" , \"value\" : \"ACCEPT\" } }","title":"Owner choice update"},{"location":"concepts/events/#rest-events-endpoint","text":"","title":"REST /events/ endpoint"},{"location":"concepts/events/#inbound","text":"","title":"Inbound"},{"location":"concepts/events/#funding-deposit-event","text":"HTTP POST /events/deposit/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Idempotency-Key : \"LVRYWG833Vp2FIIG\" { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } Warning In case of broker integration by InvestSuite, this event triggers the Funding flow. Therefore we strongly suggest using the idempotency-key to avoid double deposits if the middleware replays the event. We recommend using the id of the transaction generated by the core banking system.","title":"Funding (deposit) event"},{"location":"concepts/events/#withdrawal-executed-event","text":"Info Not to be confused with the withdrawal requested event . HTTP POST /events/withdraw/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Idempotency-Key : \"LVRYWG833Vp2FIIG\" { \"data\" : { \"amount\" : \"1000\" , \"currency\" : \"USD\" , \"portfolio\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" } } Warning We strongly suggest using the idempotency-key to avoid double deposits.","title":"Withdrawal executed event"},{"location":"concepts/events/#outbound_1","text":"Warning This is still under development","title":"Outbound"},{"location":"concepts/financial_data/","text":"Context \u00b6 The Financial Data API allows you to integrate with the InvestSuite Financial Data services. These services evolve around investment products and securities such as stocks, ETFs, funds, cryptocurrencies ... With the current API endpoints you can query which instruments are attributed to the universe used in your Robo Advisor and Self Investor setups. Instrument universe \u00b6 Financial instruments in general are assets that hold capital and can be traded in the market. Examples are shares, bonds, funds. To use StoryTeller, Optimizer, Self Investor, Robo Advisor you define an instrument universe . This is the collection of instruments that can be used to trade or report on. When you query GET /financial-data/instruments/ the return will hold all instruments in the assigned universe. Getting the instrument universe is as simple as querying the whole Instruments collection. HTTP curl GET /financial-data/instruments/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/' \\ --H 'Authorization: Bearer {access_token_string}' Getting instrument details \u00b6 To retrieve a single instrument request GET /financial-data/instruments/{instrument_id}/. This will return basic data on an instrument: its name, reference ID, type, end-of-day price and lookthrough data. HTTP curl GET /financial-data/instruments/BE0974293251/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/BE0974293251/' \\ --H 'Authorization: Bearer {access_token_string}' Response: { \"id\" : \"BE0974293251\" , \"external_id\" : \"BE0974293251\" , \"name\" : \"ANHEUSER-BUSCH INBEV\" , \"type\" : \"STOCK\" , \"price\" : 54.35 , \"look_through\" : { \"asset_classes\" : { \"alternatives\" : 0.0 , \"bonds\" : 0.0 , \"commodities\" : 0.0 , \"stocks\" : 1.0 , \"cash\" : 0.0 }, \"regions\" : { \"bonds\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 }, \"stocks\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 1.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" : { \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 1.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } } Field Description Data type Example Required id The instrument's external identifier. For instance: ISIN. string BE0974293251 yes external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in the client's system to identify this entity. This field is not checked for uniqueness. string <= 64 characters BE0974293251 yes name The instrument's name string <= 128 characters ANHEUSER-BUSCH INBEV no type The instrument's type. For instance: stock, etf. Enum(\"STOCK\", \"BOND\", \"ETF\", \"MUTUAL_FUND\", \"TOKEN\", \"INDEX\", \"CURRENCY\", \"INTEREST_RATE\") STOCK no price The instrument's last day closing price. decimal 54.35 no look_through The instrument's regional, sectoral and asset type spread. object no","title":"Financial data"},{"location":"concepts/financial_data/#context","text":"The Financial Data API allows you to integrate with the InvestSuite Financial Data services. These services evolve around investment products and securities such as stocks, ETFs, funds, cryptocurrencies ... With the current API endpoints you can query which instruments are attributed to the universe used in your Robo Advisor and Self Investor setups.","title":"Context"},{"location":"concepts/financial_data/#instrument-universe","text":"Financial instruments in general are assets that hold capital and can be traded in the market. Examples are shares, bonds, funds. To use StoryTeller, Optimizer, Self Investor, Robo Advisor you define an instrument universe . This is the collection of instruments that can be used to trade or report on. When you query GET /financial-data/instruments/ the return will hold all instruments in the assigned universe. Getting the instrument universe is as simple as querying the whole Instruments collection. HTTP curl GET /financial-data/instruments/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/' \\ --H 'Authorization: Bearer {access_token_string}'","title":"Instrument universe"},{"location":"concepts/financial_data/#getting-instrument-details","text":"To retrieve a single instrument request GET /financial-data/instruments/{instrument_id}/. This will return basic data on an instrument: its name, reference ID, type, end-of-day price and lookthrough data. HTTP curl GET /financial-data/instruments/BE0974293251/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/financial-data/instruments/BE0974293251/' \\ --H 'Authorization: Bearer {access_token_string}' Response: { \"id\" : \"BE0974293251\" , \"external_id\" : \"BE0974293251\" , \"name\" : \"ANHEUSER-BUSCH INBEV\" , \"type\" : \"STOCK\" , \"price\" : 54.35 , \"look_through\" : { \"asset_classes\" : { \"alternatives\" : 0.0 , \"bonds\" : 0.0 , \"commodities\" : 0.0 , \"stocks\" : 1.0 , \"cash\" : 0.0 }, \"regions\" : { \"bonds\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 }, \"stocks\" : { \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 1.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" : { \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 1.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } } Field Description Data type Example Required id The instrument's external identifier. For instance: ISIN. string BE0974293251 yes external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in the client's system to identify this entity. This field is not checked for uniqueness. string <= 64 characters BE0974293251 yes name The instrument's name string <= 128 characters ANHEUSER-BUSCH INBEV no type The instrument's type. For instance: stock, etf. Enum(\"STOCK\", \"BOND\", \"ETF\", \"MUTUAL_FUND\", \"TOKEN\", \"INDEX\", \"CURRENCY\", \"INTEREST_RATE\") STOCK no price The instrument's last day closing price. decimal 54.35 no look_through The instrument's regional, sectoral and asset type spread. object no","title":"Getting instrument details"},{"location":"concepts/glossary/","text":"This page defines the InvestSuite standard terminology. Client, Customer and User \u00b6 InvestSuite is a B2B4C Company. To avoid confusion between InvestSuite's client and InvestSuite client's client, the following convention is used throughout this documentation: Client : InvestSuite's customer, typically a bank or financial institution. The B2 B party. Customer : the Client's customer, the end-user, typically a person. The B2B4 C party. This is typically used in functional/business contexts. User : synonymous for Customer, but typically used in more technical contexts: The User is the owner of one or more Portfolios Access to InvestSuite products is controlled on a User level within the InvestSuite console Refer to Creating a User . Accounts \u00b6 The Counter Account of a user is the bank account that is funded in case of a withdrawal instruction. This can be at a 3rd party bank. The Broker Account of a portfolio (also known as the investor account ) is, in an individual account setup, the corresponding account at the broker. This is the account the user funds to fund the portfolio. Refer to Account Initiation . Money \u00b6 Paper Money (Robo Advisor only): Robo Advisor has a demo mode: the option of a 'virtual portfolio' that uses 'paper money'. The app is fully functional and will show how the portfolio holdings and value evolve, but this is not backed with actual money. Real Money: real, actual money (in contrast to paper money). Portfolio (of a User) \u00b6 A Portfolio is a collection of financial assets (instruments). A Portfolio also contains metadata (eg. portfolio name like 'My Retirement Portfolio', for displaying to the user), configuration settings to manage the portfolio (eg. a boolean to indicate that trading is allowed, the risk profile the customer had set for the portfolio, ...). A Portfolio is owned by a User. A Portfolio is either managed by the User (ie. through Self Investor) or managed for the user (ie. through Robo Advisor). Refer to Create a Portfolio . Holdings, Orders, Transactions and Movements (of a Portfolio) \u00b6 Holdings are positions (or assets or instruments) in a portfolio: instruments and/or cash. Cash holdings are expressed in their currency. An order is sent to the market, resulting in one or more transactions. Transactions are a combination of movements that describe an exchange or trade. A movement (or trade) is a change that impacts the holdings of a portfolio. Warning InvestSuite does not 'hold' anything. The broker/custodian holds the instruments and InvestSuite is kept up to date (through integration) on these holdings. How are transactions and holdings related? Transactions are used for performance and return calculation (eg. TWR) on a portfolio. Holdings are used to display to the user what is inside the portfolio. The two are (by design) not linked, and providing a consistent view to the user needs to be handled by the broker or middleware. Refer to Transactions . Suitability Profile, Risk Profile (of a Portfolio) \u00b6 We refer to a Suitablity Profile (linked to a Portfolio) as either the result of an Appropriateness Test, for Self Investor the result of a Suitability Test (for an advisory or discretionary mandate), for Robo Advisor Refer to Suitability Profiler . Optimization, Rebalancing (of a Portfolio) \u00b6 (Portfolio) Optimizer is an InvestSuite product which is responsible for constructing optimal Portfolios, given a set of constaints and a set of initial holdings. Optimizer is typically triggered when the Portfolio Holdings change (eg. when funding) or overnight (to check whether the Portfolio is still optimal). The output of Optimizer is an Optimization , an object which contains the orders that need to be executed to make the portfolio optimal, or in line with a model portfolio (ie. the delta between the current holdings and the optimal holdings). When an Optimization exists, it is typically followed by a rebalancing : the process of executing the orders of an Optimization with a broker. Refer to Optimize a portfolio . Refer to Rebalancing . Refer to Optimization Entities \u00b6 The business objects of InvestSuite. Refer to Business Objects . Reconciliation \u00b6 The process of ensuring the portfolio holdings and transactions are in sync between the broker/custodian and Robo Advisor. Investment Strategy, Policy \u00b6 An Investment Strategy (also known as a Policy) refers to a set of principles designed to help an individual investor achieve their financial and investment goals. This is part of the input for Optimizer to construct the Portfolio. Horizon \u00b6 The investment horizon. The total length of time that an investor expects to hold a security or a portfolio. This is part of the input for Optimizer to construct the Portfolio. Mandate \u00b6 Discretionary (Robo Advisor only): No action from the user required to execute the recommended orders. Advisory (Robo Advisor only): The user needs to approve the recommended optimization before the orders can be executed. Execution-only (Self Investor only): The user decides what orders to execute.","title":"Glossary"},{"location":"concepts/glossary/#client-customer-and-user","text":"InvestSuite is a B2B4C Company. To avoid confusion between InvestSuite's client and InvestSuite client's client, the following convention is used throughout this documentation: Client : InvestSuite's customer, typically a bank or financial institution. The B2 B party. Customer : the Client's customer, the end-user, typically a person. The B2B4 C party. This is typically used in functional/business contexts. User : synonymous for Customer, but typically used in more technical contexts: The User is the owner of one or more Portfolios Access to InvestSuite products is controlled on a User level within the InvestSuite console Refer to Creating a User .","title":"Client, Customer and User"},{"location":"concepts/glossary/#accounts","text":"The Counter Account of a user is the bank account that is funded in case of a withdrawal instruction. This can be at a 3rd party bank. The Broker Account of a portfolio (also known as the investor account ) is, in an individual account setup, the corresponding account at the broker. This is the account the user funds to fund the portfolio. Refer to Account Initiation .","title":"Accounts"},{"location":"concepts/glossary/#money","text":"Paper Money (Robo Advisor only): Robo Advisor has a demo mode: the option of a 'virtual portfolio' that uses 'paper money'. The app is fully functional and will show how the portfolio holdings and value evolve, but this is not backed with actual money. Real Money: real, actual money (in contrast to paper money).","title":"Money"},{"location":"concepts/glossary/#portfolio-of-a-user","text":"A Portfolio is a collection of financial assets (instruments). A Portfolio also contains metadata (eg. portfolio name like 'My Retirement Portfolio', for displaying to the user), configuration settings to manage the portfolio (eg. a boolean to indicate that trading is allowed, the risk profile the customer had set for the portfolio, ...). A Portfolio is owned by a User. A Portfolio is either managed by the User (ie. through Self Investor) or managed for the user (ie. through Robo Advisor). Refer to Create a Portfolio .","title":"Portfolio (of a User)"},{"location":"concepts/glossary/#holdings-orders-transactions-and-movements-of-a-portfolio","text":"Holdings are positions (or assets or instruments) in a portfolio: instruments and/or cash. Cash holdings are expressed in their currency. An order is sent to the market, resulting in one or more transactions. Transactions are a combination of movements that describe an exchange or trade. A movement (or trade) is a change that impacts the holdings of a portfolio. Warning InvestSuite does not 'hold' anything. The broker/custodian holds the instruments and InvestSuite is kept up to date (through integration) on these holdings. How are transactions and holdings related? Transactions are used for performance and return calculation (eg. TWR) on a portfolio. Holdings are used to display to the user what is inside the portfolio. The two are (by design) not linked, and providing a consistent view to the user needs to be handled by the broker or middleware. Refer to Transactions .","title":"Holdings, Orders, Transactions and Movements (of a Portfolio)"},{"location":"concepts/glossary/#suitability-profile-risk-profile-of-a-portfolio","text":"We refer to a Suitablity Profile (linked to a Portfolio) as either the result of an Appropriateness Test, for Self Investor the result of a Suitability Test (for an advisory or discretionary mandate), for Robo Advisor Refer to Suitability Profiler .","title":"Suitability Profile, Risk Profile (of a Portfolio)"},{"location":"concepts/glossary/#optimization-rebalancing-of-a-portfolio","text":"(Portfolio) Optimizer is an InvestSuite product which is responsible for constructing optimal Portfolios, given a set of constaints and a set of initial holdings. Optimizer is typically triggered when the Portfolio Holdings change (eg. when funding) or overnight (to check whether the Portfolio is still optimal). The output of Optimizer is an Optimization , an object which contains the orders that need to be executed to make the portfolio optimal, or in line with a model portfolio (ie. the delta between the current holdings and the optimal holdings). When an Optimization exists, it is typically followed by a rebalancing : the process of executing the orders of an Optimization with a broker. Refer to Optimize a portfolio . Refer to Rebalancing . Refer to Optimization","title":"Optimization, Rebalancing (of a Portfolio)"},{"location":"concepts/glossary/#entities","text":"The business objects of InvestSuite. Refer to Business Objects .","title":"Entities"},{"location":"concepts/glossary/#reconciliation","text":"The process of ensuring the portfolio holdings and transactions are in sync between the broker/custodian and Robo Advisor.","title":"Reconciliation"},{"location":"concepts/glossary/#investment-strategy-policy","text":"An Investment Strategy (also known as a Policy) refers to a set of principles designed to help an individual investor achieve their financial and investment goals. This is part of the input for Optimizer to construct the Portfolio.","title":"Investment Strategy, Policy"},{"location":"concepts/glossary/#horizon","text":"The investment horizon. The total length of time that an investor expects to hold a security or a portfolio. This is part of the input for Optimizer to construct the Portfolio.","title":"Horizon"},{"location":"concepts/glossary/#mandate","text":"Discretionary (Robo Advisor only): No action from the user required to execute the recommended orders. Advisory (Robo Advisor only): The user needs to approve the recommended optimization before the orders can be executed. Execution-only (Self Investor only): The user decides what orders to execute.","title":"Mandate"},{"location":"concepts/portfolios/","text":"Definition See the Glossary for a definition. Context \u00b6 This page lists all operations that can be performed on the Portfolio object, see See Glossary . Create portfolio \u00b6 Minimum portfolio \u00b6 Request Response (body) POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ } } } { \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"active\" : true } }, \"brokerage_account\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Field Description Data type Example Required name The display name of the portfolio set by the user. string <= 128 characters My Portfolio-1 yes owned_by_user_id The portfolio owner's user ID. This field is required firstly to get to the account of the owner for cash withdrawals, and secondly to group portfolios by owner. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes base_currency The portfolio's currency. string ^[A-Z]{3}\\Z USD yes money_type Defines whether this is a 'virtual' portfolio or not. In a virtual portfolio buying and selling decisions are simulated, rather than placed as actual orders through a broker. ! Write once enum(\"REAL_MONEY\", \"PAPER_MONEY\") REAL_MONEY yes config->manager The manager type is either: self managed, or managed by the Robo Advisor under an advisory or discretionary mandate. For Self Investor select USER_MANAGED ! Write once. enum(\"USER_MANAGED\", \"ROBO_ADVISOR_ADVISORY\", \"ROBO_ADVISOR_DISCRETIONARY\") ROBO_ADVISOR_DISCRETIONARY yes config->manager_version Which major version of the selected portfolio manager to use. integer >= 1 1 yes Warning The money_type cannot be changed: a paper money portfolio cannot be converted to a real money portfolio (by design). This has implications when portfolios are created programmatically, for example during onboarding. Special care is needed when the ID is stored in the middleware. Typical Self Investor portfolio \u00b6 Request POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"config\" :{ \"manager\" : \"USER_MANAGED\" , \"manager_version\" : 1 , \"manager_settings\" :{ } }, \"brokerage_account\" :{ \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"BE01234567891234\" \"payment_reference\" : \"32154796\" } } Warning Self Investor only supports REAL_MONEY as money_type Field Description How to provide brokerage_account > bank_account_type Type of the bank account number, typically an IBAN number. request body brokerage_account > bank_account_number Account number of the account to which the user should transfer money for funding the portfolio. This can be a pooled account or an account specifically for the portfolio. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the funding screen of the InvestSuite app. request body brokerage_account > payment_reference Payment reference the user needs to add to the bank transfer for funding the portfolio. Required if the user uses InvestSuite's front-end applications for investing and the portfolio is funded through a pooled account. Displayed in the funding screen of the InvestSuite app. request body Explore the 'User Managed Portfolio settings' in config.manager_settings in the API documentation for all available options. Typical Robo Advisor portfolio \u00b6 A typical Robo Advisor portfolio also has a Goal, Horizon and Policy defined. See the Robo Advisor section for more information on these. Request Response (body) POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_settings\" :{ \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" }, \"manager_version\" : 1 }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"portfolio\" :{ \"$USD\" : 10000 }, } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"active\" : true } }, \"brokerage_account\" : null , \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Explore the 'Robo Advisor Managed portfolio settings' in config.manager_settings in the API documentation for all available options. Get portfolio \u00b6 Add the InvestSuite ID to the path to retrieve a portfolio object. Request Response (body) GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Update portfolio \u00b6 Given the right permissions you can update any object by issuing a PATCH request. Warning The following fields cannot be updated: The manager field defines the type of portfolio management: self directed, under an advisory mandate, under a discretionary mandate. The money_type field states if the portfolio manages real money or paper money. Holdings \u00b6 To update the holdings you patch the portfolio field in the Portfolio object. Consistency Holdings are not updated when Transactions are created in the Portfolio. The middleware is responsible of keeping these consistent. This is by design to allow flexibility. Nested object As with all nested objects, include the full object (ie. all holdings) when issuing the PATCH. For example, a PATCH \"portfolio\": { \"$USD\":10000 } means a portfolio which only contains cash. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"portfolio\" : { \"$USD\" : 208.086729 , \"LU78464A6644\" : 18.78 , \"LU4642886612\" : 9.2243 , \"LU46137V2410\" : 9 , \"LU3160923039\" : 3 , \"LU46429B2676\" : 45.146 , \"LU46434V7617\" : 9 , \"LU4642865251\" : 7.6828 , \"LU46434V4234\" : 3 } { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"LU78464A6644\" : 18.78 , \"LU4642886612\" : 9.2243 , \"LU46137V2410\" : 9 , \"LU3160923039\" : 3 , \"LU46429B2676\" : 45.146 , \"LU46434V7617\" : 9 , \"LU4642865251\" : 7.6828 , \"LU46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Funded Status \u00b6 On the first funding of a Portfolio, the funded_since field should be set. It may not be changed afterwards. It contains the date and time at which the portfolio was funded with the minimal required funding amount to initialize Robo Advisor. It is used for performance (eg. TWR) calculations. Request PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"funded_since\" : \"2021-02-18T08:21:02+00:00\" } Set divest amount \u00b6 The below example sets the divest_amount to 500, signalling the Customer wants to withdraw 500 cash, which in turn will instruct Optimizer to generate a series of orders that free up this amount of cash. This is usually done by the InvestSuite application. To signal that no further cash needs to be freed up, patch the divest_amount with 0. This is usually done by the Client Middleware. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 500 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 500 } } }' Transactions \u00b6 See Transactions . Manager settings \u00b6 Below table lists the applicable portfolio manager parameters. The properties can be updated by issueing a corresponding PATCH request (see example below). See the API specification for more information. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"config\" : { \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Robo Advisor Managed Portfolio User (Self Investor) Managed Portfolio broker_provider \u25cf \u25cf active \u25cf \u25cf tags \u25cf \u25cf background_image \u25cf \u25cf background_color \u25cf \u25cf commission_profile \u25cf \u25cf policy_id \u25cf - goal_id \u25cf - horizon_id \u25cf - risk_profile_id \u25cf - proposed_risk_id \u25cf - risk_profile_score \u25cf - suitability_profile_id \u25cf - divest_amount \u25cf - start_amount \u25cf - recurring_deposit_amount \u25cf - end_datetime \u25cf - optimization_cooldown_end \u25cf - Brokerage account \u00b6 Brokerage Account: see Glossary . Request Response (body) PATCH /portfolios/P1234JSJDFJSIDDKJDI2334J3IJ/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"brokerage_account\" : { \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"BE19000000001212\" , \"bank_id\" : null , \"payment_reference\" : null } { \"external_id\" : \"your-external-id\" , \"readable_by\" : [ \"U1234JSJDFJSIDDKJDI2334J3IJ\" ], \"modifiable_by\" : [ \"U1234JSJDFJSIDDKJDI2334J3IJ\" ], \"name\" : \"Child's education\" , \"owned_by_user_id\" : \"U1234JSJDFJSIDDKJDI2334J3IJ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"portfolio\" : {}, \"config\" : { \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"broker_provider\" : null , \"policy_id\" : \"Y01ESJVZJBHJKPQWQACBD8X9M3Z\" , \"goal_id\" : \"L01ESJVTZCZBG1E9G7545N4H3TX\" , \"horizon_id\" : \"H01ESJVWTJDJPG4E2C83GSY4JHB\" , \"risk_profile_id\" : \"K01ESJVY0XE6VM1H97DZRAFCHM1\" , \"divest_amount\" : null , \"start_amount\" : 2000 , \"recurring_deposit_amount\" : 500 , \"end_datetime\" : null , \"active\" : true , \"suitability_profile_id\" : null , \"proposed_risk_profile_id\" : \"K01ESJVY0XE6VM1H97DZRAFCHM1\" , \"tags\" : [], \"risk_profile_score\" : 3 , \"background_image\" : \"image-url\" , \"background_color\" : null , \"commission_profile\" : null , \"optimization_cooldown_end\" : null } }, \"brokerage_account\" : { \"brokerage_portfolio_id\" : null , \"brokerage_user_id\" : null , \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"BE19000000001212\" , \"bank_id\" : null , \"payment_reference\" : null }, \"funded_since\" : null , \"owned_by_user_ids\" : [], \"snapshot_datetime\" : \"2022-08-18T05:14:31.904742+00:00\" , \"archived\" : false , \"start_datetime\" : \"2022-07-26T14:31:06.976215+00:00\" , \"id\" : \"P1234JSJDFJSIDDKJDI2334J3IJ\" , \"creation_datetime\" : \"2022-07-26T14:31:06.976215+00:00\" , \"version\" : 15 , \"version_datetime\" : \"2022-08-18T05:14:31.926372+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" , } Field Description Data type Example Required brokerage_account Account information associated with this portfolio Object no brokerage_account->bank_account_number Account number of the portfolio owner's bank account associated with this portfolio for payment instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes brokerage_account->bank_account_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes brokerage_account->bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no payment_reference Needed when all customers need to wire money to the same bank account string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") no Block portfolio \u00b6 Portfolio access can be blocked: Blocked Self Investor portfolios can no longer trade. Blocked Robo Advisor portfolios will no longer be optimized (ie. positions remain as-is and are not rebalanced). HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { ac t ive : false } } } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \"config\": { \"manager_settings\": { active: false } } } }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Delete portfolio \u00b6 Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : true , \"status\" : \"WAITING_FOR_FUNDS\" } Query portfolios \u00b6 You can query each entity through a general endpoint e.g. GET /portfolios/?query=\u2026 . Learn more in the Handling collection responses section. Get portfolios with external_id \u00b6 Request Response (body) GET /portfolios/?query=external_id+eq+'your-bank-portfolio-1' HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Get portfolios with pending withdrawals \u00b6 Get the Portfolios where the divest_amount > 0 Request GET /portfolios/query=config.manager_settings.divest_amount+lt+0 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string}","title":"Portfolio (object)"},{"location":"concepts/portfolios/#context","text":"This page lists all operations that can be performed on the Portfolio object, see See Glossary .","title":"Context"},{"location":"concepts/portfolios/#create-portfolio","text":"","title":"Create portfolio"},{"location":"concepts/portfolios/#minimum-portfolio","text":"Request Response (body) POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ } } } { \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"active\" : true } }, \"brokerage_account\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Field Description Data type Example Required name The display name of the portfolio set by the user. string <= 128 characters My Portfolio-1 yes owned_by_user_id The portfolio owner's user ID. This field is required firstly to get to the account of the owner for cash withdrawals, and secondly to group portfolios by owner. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes base_currency The portfolio's currency. string ^[A-Z]{3}\\Z USD yes money_type Defines whether this is a 'virtual' portfolio or not. In a virtual portfolio buying and selling decisions are simulated, rather than placed as actual orders through a broker. ! Write once enum(\"REAL_MONEY\", \"PAPER_MONEY\") REAL_MONEY yes config->manager The manager type is either: self managed, or managed by the Robo Advisor under an advisory or discretionary mandate. For Self Investor select USER_MANAGED ! Write once. enum(\"USER_MANAGED\", \"ROBO_ADVISOR_ADVISORY\", \"ROBO_ADVISOR_DISCRETIONARY\") ROBO_ADVISOR_DISCRETIONARY yes config->manager_version Which major version of the selected portfolio manager to use. integer >= 1 1 yes Warning The money_type cannot be changed: a paper money portfolio cannot be converted to a real money portfolio (by design). This has implications when portfolios are created programmatically, for example during onboarding. Special care is needed when the ID is stored in the middleware.","title":"Minimum portfolio"},{"location":"concepts/portfolios/#typical-self-investor-portfolio","text":"Request POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"config\" :{ \"manager\" : \"USER_MANAGED\" , \"manager_version\" : 1 , \"manager_settings\" :{ } }, \"brokerage_account\" :{ \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"BE01234567891234\" \"payment_reference\" : \"32154796\" } } Warning Self Investor only supports REAL_MONEY as money_type Field Description How to provide brokerage_account > bank_account_type Type of the bank account number, typically an IBAN number. request body brokerage_account > bank_account_number Account number of the account to which the user should transfer money for funding the portfolio. This can be a pooled account or an account specifically for the portfolio. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the funding screen of the InvestSuite app. request body brokerage_account > payment_reference Payment reference the user needs to add to the bank transfer for funding the portfolio. Required if the user uses InvestSuite's front-end applications for investing and the portfolio is funded through a pooled account. Displayed in the funding screen of the InvestSuite app. request body Explore the 'User Managed Portfolio settings' in config.manager_settings in the API documentation for all available options.","title":"Typical Self Investor portfolio"},{"location":"concepts/portfolios/#typical-robo-advisor-portfolio","text":"A typical Robo Advisor portfolio also has a Goal, Horizon and Policy defined. See the Robo Advisor section for more information on these. Request Response (body) POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_settings\" :{ \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" }, \"manager_version\" : 1 }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"name\" : \"General investing\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"portfolio\" :{ \"$USD\" : 10000 }, } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , \"active\" : true } }, \"brokerage_account\" : null , \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Explore the 'Robo Advisor Managed portfolio settings' in config.manager_settings in the API documentation for all available options.","title":"Typical Robo Advisor portfolio"},{"location":"concepts/portfolios/#get-portfolio","text":"Add the InvestSuite ID to the path to retrieve a portfolio object. Request Response (body) GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"archived\" : false , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" }","title":"Get portfolio"},{"location":"concepts/portfolios/#update-portfolio","text":"Given the right permissions you can update any object by issuing a PATCH request. Warning The following fields cannot be updated: The manager field defines the type of portfolio management: self directed, under an advisory mandate, under a discretionary mandate. The money_type field states if the portfolio manages real money or paper money.","title":"Update portfolio"},{"location":"concepts/portfolios/#holdings","text":"To update the holdings you patch the portfolio field in the Portfolio object. Consistency Holdings are not updated when Transactions are created in the Portfolio. The middleware is responsible of keeping these consistent. This is by design to allow flexibility. Nested object As with all nested objects, include the full object (ie. all holdings) when issuing the PATCH. For example, a PATCH \"portfolio\": { \"$USD\":10000 } means a portfolio which only contains cash. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"portfolio\" : { \"$USD\" : 208.086729 , \"LU78464A6644\" : 18.78 , \"LU4642886612\" : 9.2243 , \"LU46137V2410\" : 9 , \"LU3160923039\" : 3 , \"LU46429B2676\" : 45.146 , \"LU46434V7617\" : 9 , \"LU4642865251\" : 7.6828 , \"LU46434V4234\" : 3 } { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"LU78464A6644\" : 18.78 , \"LU4642886612\" : 9.2243 , \"LU46137V2410\" : 9 , \"LU3160923039\" : 3 , \"LU46429B2676\" : 45.146 , \"LU46434V7617\" : 9 , \"LU4642865251\" : 7.6828 , \"LU46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" }","title":"Holdings"},{"location":"concepts/portfolios/#funded-status","text":"On the first funding of a Portfolio, the funded_since field should be set. It may not be changed afterwards. It contains the date and time at which the portfolio was funded with the minimal required funding amount to initialize Robo Advisor. It is used for performance (eg. TWR) calculations. Request PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"funded_since\" : \"2021-02-18T08:21:02+00:00\" }","title":"Funded Status"},{"location":"concepts/portfolios/#set-divest-amount","text":"The below example sets the divest_amount to 500, signalling the Customer wants to withdraw 500 cash, which in turn will instruct Optimizer to generate a series of orders that free up this amount of cash. This is usually done by the InvestSuite application. To signal that no further cash needs to be freed up, patch the divest_amount with 0. This is usually done by the Client Middleware. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { \"divest_amount\" : 500 } } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"manager\": { \"manager_settings\": { \"divest_amount\": 500 } } }'","title":"Set divest amount"},{"location":"concepts/portfolios/#transactions","text":"See Transactions .","title":"Transactions"},{"location":"concepts/portfolios/#manager-settings","text":"Below table lists the applicable portfolio manager parameters. The properties can be updated by issueing a corresponding PATCH request (see example below). See the API specification for more information. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"config\" : { \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Robo Advisor Managed Portfolio User (Self Investor) Managed Portfolio broker_provider \u25cf \u25cf active \u25cf \u25cf tags \u25cf \u25cf background_image \u25cf \u25cf background_color \u25cf \u25cf commission_profile \u25cf \u25cf policy_id \u25cf - goal_id \u25cf - horizon_id \u25cf - risk_profile_id \u25cf - proposed_risk_id \u25cf - risk_profile_score \u25cf - suitability_profile_id \u25cf - divest_amount \u25cf - start_amount \u25cf - recurring_deposit_amount \u25cf - end_datetime \u25cf - optimization_cooldown_end \u25cf -","title":"Manager settings"},{"location":"concepts/portfolios/#brokerage-account","text":"Brokerage Account: see Glossary . Request Response (body) PATCH /portfolios/P1234JSJDFJSIDDKJDI2334J3IJ/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"brokerage_account\" : { \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"BE19000000001212\" , \"bank_id\" : null , \"payment_reference\" : null } { \"external_id\" : \"your-external-id\" , \"readable_by\" : [ \"U1234JSJDFJSIDDKJDI2334J3IJ\" ], \"modifiable_by\" : [ \"U1234JSJDFJSIDDKJDI2334J3IJ\" ], \"name\" : \"Child's education\" , \"owned_by_user_id\" : \"U1234JSJDFJSIDDKJDI2334J3IJ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"REAL_MONEY\" , \"portfolio\" : {}, \"config\" : { \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"broker_provider\" : null , \"policy_id\" : \"Y01ESJVZJBHJKPQWQACBD8X9M3Z\" , \"goal_id\" : \"L01ESJVTZCZBG1E9G7545N4H3TX\" , \"horizon_id\" : \"H01ESJVWTJDJPG4E2C83GSY4JHB\" , \"risk_profile_id\" : \"K01ESJVY0XE6VM1H97DZRAFCHM1\" , \"divest_amount\" : null , \"start_amount\" : 2000 , \"recurring_deposit_amount\" : 500 , \"end_datetime\" : null , \"active\" : true , \"suitability_profile_id\" : null , \"proposed_risk_profile_id\" : \"K01ESJVY0XE6VM1H97DZRAFCHM1\" , \"tags\" : [], \"risk_profile_score\" : 3 , \"background_image\" : \"image-url\" , \"background_color\" : null , \"commission_profile\" : null , \"optimization_cooldown_end\" : null } }, \"brokerage_account\" : { \"brokerage_portfolio_id\" : null , \"brokerage_user_id\" : null , \"bank_account_type\" : \"IBAN\" , \"bank_account_number\" : \"BE19000000001212\" , \"bank_id\" : null , \"payment_reference\" : null }, \"funded_since\" : null , \"owned_by_user_ids\" : [], \"snapshot_datetime\" : \"2022-08-18T05:14:31.904742+00:00\" , \"archived\" : false , \"start_datetime\" : \"2022-07-26T14:31:06.976215+00:00\" , \"id\" : \"P1234JSJDFJSIDDKJDI2334J3IJ\" , \"creation_datetime\" : \"2022-07-26T14:31:06.976215+00:00\" , \"version\" : 15 , \"version_datetime\" : \"2022-08-18T05:14:31.926372+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" , } Field Description Data type Example Required brokerage_account Account information associated with this portfolio Object no brokerage_account->bank_account_number Account number of the portfolio owner's bank account associated with this portfolio for payment instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes brokerage_account->bank_account_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes brokerage_account->bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no payment_reference Needed when all customers need to wire money to the same bank account string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") no","title":"Brokerage account"},{"location":"concepts/portfolios/#block-portfolio","text":"Portfolio access can be blocked: Blocked Self Investor portfolios can no longer trade. Blocked Robo Advisor portfolios will no longer be optimized (ie. positions remain as-is and are not rebalanced). HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"manager\" : { \"manager_settings\" : { ac t ive : false } } } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \"config\": { \"manager_settings\": { active: false } } } }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/","title":"Block portfolio"},{"location":"concepts/portfolios/#delete-portfolio","text":"Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : true , \"status\" : \"WAITING_FOR_FUNDS\" }","title":"Delete portfolio"},{"location":"concepts/portfolios/#query-portfolios","text":"You can query each entity through a general endpoint e.g. GET /portfolios/?query=\u2026 . Learn more in the Handling collection responses section.","title":"Query portfolios"},{"location":"concepts/portfolios/#get-portfolios-with-external_id","text":"Request Response (body) GET /portfolios/?query=external_id+eq+'your-bank-portfolio-1' HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" , } }, \"portfolio\" :{ \"$USD\" : 10000 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" }","title":"Get portfolios with external_id"},{"location":"concepts/portfolios/#get-portfolios-with-pending-withdrawals","text":"Get the Portfolios where the divest_amount > 0 Request GET /portfolios/query=config.manager_settings.divest_amount+lt+0 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string}","title":"Get portfolios with pending withdrawals"},{"location":"concepts/transactions/","text":"Definition See the Glossary for a definition. Context \u00b6 The broker/custodian is the master system for transactions and holdings (positions) . These need to be kept in sync with InvestSuite. In case of broker integration by the client (see integration architecture ), this page describes how. First transactions, or first orders? We recommend to first create (update) the transaction, and then update the portfolio holdings. Concepts \u00b6 erDiagram User { string external_id } Portfolio { string external_id object holdings } Optimization { string id bool is_recommended object orders } Transaction { string external_id string type string optimization_id } Movement { string external_id string type string status } User ||--|{ Portfolio: owns Portfolio ||--|| Optimization: \"has (Robo Advisor only)\" Portfolio ||--|{ Transaction: has Transaction ||--|{ Movement: movements Transaction ||--|| Movement: primary_movement Transactions \u00b6 Types \u00b6 The following types of transactions exist: Order transactions: buying/selling of instruments, containing one or more movements (see example ). Cash transactions: a deposit of cash, a divestment, fees or tax (see example ). Corporate Action transactions, eg. stock split or distribution of dividends, can but does not need to include one or more movements (see example ). Security Transfer transaction: at least 1 movement Administrative transaction Status \u00b6 The Status of a Transaction is determined by the statuses of the Movements it comprises. See the Movement status . Movements \u00b6 A Transaction has one or more Movements. A Transaction has one Primary Movement: the one that 'triggers' the other movement. Types \u00b6 The following types of movements exist: CASH_DEPOSIT , CASH_DIVIDEND , CASH_WITHDRAWAL , COUPON , BUY , SELL , CORPORATE_ACTION_IN , CORPORATE_ACTION_OUT , REVERSE_STOCK_SPLIT , STOCK_DIVIDEND , STOCK_SPLIT , TRANSFER_IN , TRANSFER_OUT , CUSTODY_FEE , INSTRUMENT_ENTRY_EXIT_FEE , MANAGEMENT_FEE , OTHER_FEE , OTHER_TAX , SERVICE_ENTRY_EXIT_FEE , TRANSACTION_FEE , WITHHOLDING_TAX . Status \u00b6 A movement has the following statuses: PLANNED , PENDING , PLACED , EXECUTED , SETTLED , CANCELLED , NOT_EXECUTED , EXPIRED . Create transaction \u00b6 Order PLACED \u00b6 Robo Advisor & Optimization ID For Robo Advisor, include the optimization_id field (from Optimization.id ). This field is used to reconcile whether the Optimization is fully executed. While an Optimization is in progress (ie. the rebalancing process is in progress), the Portfolio is blocked from making withdrawals. For Orders that originate from an Optimization, include the optimization_id . Quantity type Funds are typically bought per amount, not per unit. The convention is that the quantity field is set to 1, the amount in the unit_price field and (optionally) specify the unit_price_currency . See the \"Request (Amount)\" example below. Buy \u00b6 Request (Units) Request (Amount) Response (body) POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"optimization_id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , // Robo Advisor only \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ] } POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"optimization_id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 1 , \"unit_price\" : \"1000\" , \"unit_price_currency\" : \"EUR\" } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Sell \u00b6 Info A sell transaction is the reverse of a buy order. This example is identical to the Buy transaction example in this page, other than type is SELL (not BUY ) and the signs of the cash movement inverted. Request Response (body) POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"optimization_id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Cash \u00b6 Transactions that hold cash movements represent to InvestSuite movements on the investment account. That account is usually different from the current account, which is the account that the client holds with the bank. We expect in other words transactions on your brokerage system, not from your core banking platform. Funding \u00b6 Request POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"PENDING\" , // or \"SETTLED\" \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 500.0 , } ] } Update Portfolio holdings Also update the Portfolio holdings in case of EXECUTED or SETTLED . Withdrawal \u00b6 Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_WITHDRAWAL\" , \"status\" : \"PENDING\" , // or \"SETTLED\" \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -500.0 , } ] } { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_WITHDRAWAL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -500.0 , } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update Portfolio holdings Also update the Portfolio holdings in case of EXECUTED or SETTLED . Costs and Charges \u00b6 Costs and charges come in various forms. There are items in the type Enum that define the sort of charge. For instance for management fees, custody fees, and transaction fees. For other types use \"type\": \"OTHER_FEE\" and \"description\": \"{string}\" . Same goes for taxes. For withholding tax paid to the governement use \"type\": \"WITHHOLDING_TAX\" . For other sorts of taxes charged use \"type\": \"OTHER_TAX\" and \"description\": \"{string}\" . Costs and charges These are the costs and charges that are not associated with a transaction. For costs and charges that are associated with a transaction, see above . Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"14031738752\" , \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 , } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update Portfolio holdings Also update the Portfolio holdings after this call. Corporate Action \u00b6 Corporate actions are changes invoked by a company that affect its stakeholders in particular share and bond holders. They come in various forms and shapes: dividends, stock splits, reverse stock splits ... and are usually approved by a board of directors. Sometimes even by the shareholders who can voluntarily submit a vote. Corporate actions are registered as transactions as they will lead to movements such as issuing dividends. Note the use of reference_instrument_id to reference the portfolio position the corporate action refers to. Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"LU78464A6727\" , } ] } { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"LU78464A6727\" , } ], \"id\" : \"T01FGZK41MJ4NJXKZ27VJC0HGS9\" , \"creation_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update Portfolio holdings Also update the Portfolio holdings after this call. Update transaction \u00b6 Transactions can be updated by issuing a PATCH /portfolios/{id}/transactions/{id} and creating or updating the movements inside. Warning Include the full nested movements object (ie. including the initial PLACED movement) in the PATCH request. PATCHing with the correct movements The InvestSuite Transaction model is very flexible to support various scenarios. Special care is needed when PATCHing a Transaction with new movements, or you may not achieve the desired effect. In the Buy order example described on this page: When placed , it will only have one movement with PLACED . When it is executed , PATCH the Transaction with the original PLACED movement and an additional movement with status EXECUTED . When it is settled , PATCH the Transaction with the original PLACED movement, and update the status field of the additional movement to SETTLED . In general, use the following diagram to determine which movements to keep in a PATCH: stateDiagram-v2 direction LR groupOne: Keep the movement with the latest status, if it exists. groupTwo: Also keep the movement with the latest status, if it exists. [*] --> groupOne [*] --> groupTwo groupOne --> groupTwo state groupOne { direction LR PLANNED --> PENDING PENDING --> PLACED } state groupTwo { direction LR [*] --> CANCELLED [*] --> NOT_EXECUTED [*] --> EXPIRED [*] --> EXECUTED EXECUTED --> SETTLED } Order EXECUTED \u00b6 Optional Updating the Transaction with this status is optional: a portfolio that has orders in PLACED status (ie. not yet executed or settled) is not reoptimized. Since settlement can take a couple of days, this may not be desirable. If the portfolio should be optimized ahead of the settlement of the transactions, update the transaction with the EXECUTED status. Order costs and fees This example also shows the introduction of the transaction fee and the tax associated with the order. For costs and charges that are not associated with the transaction (eg. monthly fee) see the Costs and Charges Transaction . What movements to include? Note that the original PLACED movement is included. See the diagram at the top of this section to understand why. movement.datetime The datetime of the linked instrument & cash ( BUY / EXECUTED and SELL / EXECUTED ) must be identical. Otherwise, the portfolio holdings are inconsistent and the performance (eg. TWR) calculations will not be correct. Request Response (body) PATCH /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/T01FHCP1CZ9F1S207KJHNA5V244 HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Order SETTLED \u00b6 What movements to include? Note that the original PLACED movement is included. there are no EXECUTED movements. See the diagram at the top of this section to understand why. Buy \u00b6 Request Response (body) PATCH /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/T01FHCP1CZ9F1S207KJHNA5V244 HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Sell \u00b6 Request Response (body) PATCH /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/T01FHCP1CZ9F1S207KJHNA5V244 HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Cancel order \u00b6 To turn a PLACED into a cancelled one, you patch the movements of the transactions with the current PLACED movement to a new movement with status CANCELLED . Given a current status with a PLACED order: { \"id\" : \"T01G53YQW6E5RH7CAOBFUSCATED\" , \"external_id\" : \"my-transaction-1\" , \"portfolio_id\" : \"P01G511AYA61Z3Q14OBFUSCATED\" , \"portfolio_currency\" : \"USD\" , \"type\" : \"ORDER\" , \"order_type\" : \"LIMIT\" , \"primary_movement\" : { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, \"movements\" : [ { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } To register a cancellation you add one movement to the current list of movements. Nothing else should be updated, so the payload is as follows. Note that you have to send the existing movements in this list as well , because they would be lost otherwise: Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"my-movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Info Notice that the PLACED and CANCELLED movements are identical, apart from their status and their datetime. The datetime is the time the order was PLACED and CANCELLED respectively.","title":"Transaction (object)"},{"location":"concepts/transactions/#context","text":"The broker/custodian is the master system for transactions and holdings (positions) . These need to be kept in sync with InvestSuite. In case of broker integration by the client (see integration architecture ), this page describes how. First transactions, or first orders? We recommend to first create (update) the transaction, and then update the portfolio holdings.","title":"Context"},{"location":"concepts/transactions/#concepts","text":"erDiagram User { string external_id } Portfolio { string external_id object holdings } Optimization { string id bool is_recommended object orders } Transaction { string external_id string type string optimization_id } Movement { string external_id string type string status } User ||--|{ Portfolio: owns Portfolio ||--|| Optimization: \"has (Robo Advisor only)\" Portfolio ||--|{ Transaction: has Transaction ||--|{ Movement: movements Transaction ||--|| Movement: primary_movement","title":"Concepts"},{"location":"concepts/transactions/#transactions","text":"","title":"Transactions"},{"location":"concepts/transactions/#types","text":"The following types of transactions exist: Order transactions: buying/selling of instruments, containing one or more movements (see example ). Cash transactions: a deposit of cash, a divestment, fees or tax (see example ). Corporate Action transactions, eg. stock split or distribution of dividends, can but does not need to include one or more movements (see example ). Security Transfer transaction: at least 1 movement Administrative transaction","title":"Types"},{"location":"concepts/transactions/#status","text":"The Status of a Transaction is determined by the statuses of the Movements it comprises. See the Movement status .","title":"Status"},{"location":"concepts/transactions/#movements","text":"A Transaction has one or more Movements. A Transaction has one Primary Movement: the one that 'triggers' the other movement.","title":"Movements"},{"location":"concepts/transactions/#types_1","text":"The following types of movements exist: CASH_DEPOSIT , CASH_DIVIDEND , CASH_WITHDRAWAL , COUPON , BUY , SELL , CORPORATE_ACTION_IN , CORPORATE_ACTION_OUT , REVERSE_STOCK_SPLIT , STOCK_DIVIDEND , STOCK_SPLIT , TRANSFER_IN , TRANSFER_OUT , CUSTODY_FEE , INSTRUMENT_ENTRY_EXIT_FEE , MANAGEMENT_FEE , OTHER_FEE , OTHER_TAX , SERVICE_ENTRY_EXIT_FEE , TRANSACTION_FEE , WITHHOLDING_TAX .","title":"Types"},{"location":"concepts/transactions/#status_1","text":"A movement has the following statuses: PLANNED , PENDING , PLACED , EXECUTED , SETTLED , CANCELLED , NOT_EXECUTED , EXPIRED .","title":"Status"},{"location":"concepts/transactions/#create-transaction","text":"","title":"Create transaction"},{"location":"concepts/transactions/#order-placed","text":"Robo Advisor & Optimization ID For Robo Advisor, include the optimization_id field (from Optimization.id ). This field is used to reconcile whether the Optimization is fully executed. While an Optimization is in progress (ie. the rebalancing process is in progress), the Portfolio is blocked from making withdrawals. For Orders that originate from an Optimization, include the optimization_id . Quantity type Funds are typically bought per amount, not per unit. The convention is that the quantity field is set to 1, the amount in the unit_price field and (optionally) specify the unit_price_currency . See the \"Request (Amount)\" example below.","title":"Order PLACED"},{"location":"concepts/transactions/#buy","text":"Request (Units) Request (Amount) Response (body) POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"optimization_id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , // Robo Advisor only \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ] } POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"optimization_id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 1 , \"unit_price\" : \"1000\" , \"unit_price_currency\" : \"EUR\" } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"Buy"},{"location":"concepts/transactions/#sell","text":"Info A sell transaction is the reverse of a buy order. This example is identical to the Buy transaction example in this page, other than type is SELL (not BUY ) and the signs of the cash movement inverted. Request Response (body) POST /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"optimization_id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"Sell"},{"location":"concepts/transactions/#cash","text":"Transactions that hold cash movements represent to InvestSuite movements on the investment account. That account is usually different from the current account, which is the account that the client holds with the bank. We expect in other words transactions on your brokerage system, not from your core banking platform.","title":"Cash"},{"location":"concepts/transactions/#funding","text":"Request POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"PENDING\" , // or \"SETTLED\" \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 500.0 , } ] } Update Portfolio holdings Also update the Portfolio holdings in case of EXECUTED or SETTLED .","title":"Funding"},{"location":"concepts/transactions/#withdrawal","text":"Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_WITHDRAWAL\" , \"status\" : \"PENDING\" , // or \"SETTLED\" \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -500.0 , } ] } { \"external_id\" : \"P01FHAR57WS6Q8AV1GH5EATYKP1/14031738752\" , \"movements\" : [ { \"type\" : \"CASH_WITHDRAWAL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-06T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -500.0 , } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update Portfolio holdings Also update the Portfolio holdings in case of EXECUTED or SETTLED .","title":"Withdrawal"},{"location":"concepts/transactions/#costs-and-charges","text":"Costs and charges come in various forms. There are items in the type Enum that define the sort of charge. For instance for management fees, custody fees, and transaction fees. For other types use \"type\": \"OTHER_FEE\" and \"description\": \"{string}\" . Same goes for taxes. For withholding tax paid to the governement use \"type\": \"WITHHOLDING_TAX\" . For other sorts of taxes charged use \"type\": \"OTHER_TAX\" and \"description\": \"{string}\" . Costs and charges These are the costs and charges that are not associated with a transaction. For costs and charges that are associated with a transaction, see above . Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"14031738752\" , \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 , } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"type\" : \"MANAGEMENT_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-03T08:00:16.733954+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.1035719 } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update Portfolio holdings Also update the Portfolio holdings after this call.","title":"Costs and Charges"},{"location":"concepts/transactions/#corporate-action","text":"Corporate actions are changes invoked by a company that affect its stakeholders in particular share and bond holders. They come in various forms and shapes: dividends, stock splits, reverse stock splits ... and are usually approved by a board of directors. Sometimes even by the shareholders who can voluntarily submit a vote. Corporate actions are registered as transactions as they will lead to movements such as issuing dividends. Note the use of reference_instrument_id to reference the portfolio position the corporate action refers to. Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"LU78464A6727\" , } ] } { \"external_id\" : \"your-corporate-action-1\" , \"movements\" : [ { \"type\" : \"CASH_DIVIDEND\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-10-01T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 0.0785 , \"reference_instrument_id\" : \"LU78464A6727\" , } ], \"id\" : \"T01FGZK41MJ4NJXKZ27VJC0HGS9\" , \"creation_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-02T04:10:15.570586+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Update Portfolio holdings Also update the Portfolio holdings after this call.","title":"Corporate Action"},{"location":"concepts/transactions/#update-transaction","text":"Transactions can be updated by issuing a PATCH /portfolios/{id}/transactions/{id} and creating or updating the movements inside. Warning Include the full nested movements object (ie. including the initial PLACED movement) in the PATCH request. PATCHing with the correct movements The InvestSuite Transaction model is very flexible to support various scenarios. Special care is needed when PATCHing a Transaction with new movements, or you may not achieve the desired effect. In the Buy order example described on this page: When placed , it will only have one movement with PLACED . When it is executed , PATCH the Transaction with the original PLACED movement and an additional movement with status EXECUTED . When it is settled , PATCH the Transaction with the original PLACED movement, and update the status field of the additional movement to SETTLED . In general, use the following diagram to determine which movements to keep in a PATCH: stateDiagram-v2 direction LR groupOne: Keep the movement with the latest status, if it exists. groupTwo: Also keep the movement with the latest status, if it exists. [*] --> groupOne [*] --> groupTwo groupOne --> groupTwo state groupOne { direction LR PLANNED --> PENDING PENDING --> PLACED } state groupTwo { direction LR [*] --> CANCELLED [*] --> NOT_EXECUTED [*] --> EXPIRED [*] --> EXECUTED EXECUTED --> SETTLED }","title":"Update transaction"},{"location":"concepts/transactions/#order-executed","text":"Optional Updating the Transaction with this status is optional: a portfolio that has orders in PLACED status (ie. not yet executed or settled) is not reoptimized. Since settlement can take a couple of days, this may not be desirable. If the portfolio should be optimized ahead of the settlement of the transactions, update the transaction with the EXECUTED status. Order costs and fees This example also shows the introduction of the transaction fee and the tax associated with the order. For costs and charges that are not associated with the transaction (eg. monthly fee) see the Costs and Charges Transaction . What movements to include? Note that the original PLACED movement is included. See the diagram at the top of this section to understand why. movement.datetime The datetime of the linked instrument & cash ( BUY / EXECUTED and SELL / EXECUTED ) must be identical. Otherwise, the portfolio holdings are inconsistent and the performance (eg. TWR) calculations will not be correct. Request Response (body) PATCH /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/T01FHCP1CZ9F1S207KJHNA5V244 HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"EXECUTED\" , \"datetime\" : \"2022-06-10T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"Order EXECUTED"},{"location":"concepts/transactions/#order-settled","text":"What movements to include? Note that the original PLACED movement is included. there are no EXECUTED movements. See the diagram at the top of this section to understand why.","title":"Order SETTLED"},{"location":"concepts/transactions/#buy_1","text":"Request Response (body) PATCH /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/T01FHCP1CZ9F1S207KJHNA5V244 HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : 7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : 7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"Buy"},{"location":"concepts/transactions/#sell_1","text":"Request Response (body) PATCH /portfolios/P01FGVEKTV86PPKQVRK9CHT31JR/transactions/T01FHCP1CZ9F1S207KJHNA5V244 HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ] } { \"external_id\" : \"your-transaction-id-1\" , \"movements\" : [ { \"type\" : \"SELL\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-10T07:49:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"quantity\" : -7 }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"LU78468R1014\" , \"unit_price\" : 29.51 , \"quantity\" : -7 }, { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 206.57 }, { \"type\" : \"TRANSACTION_FEE\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -3 }, { \"type\" : \"OTHER_TAX\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2022-06-12T07:52:26.341Z\" , \"instrument_id\" : \"$USD\" , \"quantity\" : -0.15 } ], \"id\" : \"T01FHCP1CZ9F1S207KJHNA5V244\" , \"creation_datetime\" : \"2021-10-07T06:11:22.217585+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-10-08T06:15:51.106890+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false }","title":"Sell"},{"location":"concepts/transactions/#cancel-order","text":"To turn a PLACED into a cancelled one, you patch the movements of the transactions with the current PLACED movement to a new movement with status CANCELLED . Given a current status with a PLACED order: { \"id\" : \"T01G53YQW6E5RH7CAOBFUSCATED\" , \"external_id\" : \"my-transaction-1\" , \"portfolio_id\" : \"P01G511AYA61Z3Q14OBFUSCATED\" , \"portfolio_currency\" : \"USD\" , \"type\" : \"ORDER\" , \"order_type\" : \"LIMIT\" , \"primary_movement\" : { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, \"movements\" : [ { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } To register a cancellation you add one movement to the current list of movements. Nothing else should be updated, so the payload is as follows. Note that you have to send the existing movements in this list as well , because they would be lost otherwise: Request Response (body) POST /portfolios/P01FGZK41MJ4NJXKZ27VJC0HGS9/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"my-movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"my-movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ] } { \"external_id\" : \"14031738752\" , \"movements\" : [ { \"external_id\" : \"movement-1\" , \"type\" : \"BUY\" , \"status\" : \"PLACED\" , \"datetime\" : \"2022-06-08T10:15:53.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" }, { \"external_id\" : \"movement-2\" , \"type\" : \"BUY\" , \"status\" : \"CANCELLED\" , \"datetime\" : \"2022-06-08T11:01:54.000000+00:00\" , \"instrument_id\" : \"LU2660424076\" , \"quantity\" : \"3\" , \"unit_price\" : \"3.49\" } ], \"id\" : \"T01FH2JNYAYQ4CTHQJ1MFDDGXZQ\" , \"creation_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-10-03T08:00:16.734375+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false } Info Notice that the PLACED and CANCELLED movements are identical, apart from their status and their datetime. The datetime is the time the order was PLACED and CANCELLED respectively.","title":"Cancel order"},{"location":"concepts/users/","text":"Definition See the Glossary for a definition. Context \u00b6 This page lists all operations that can be performed on the User object, see See Glossary . Create a user \u00b6 Typically a User is created with a name and an External ID, but none are required by the API and all can be updated later, as needed or as allowed by law. Depending on which products the User uses, fields become required from a fuctional point of view. For example, you can create a user without a name, but when using Self Investor (or any other application with a frontend), the user will not be able to use that product if no name is specified. Minimum user \u00b6 HTTP curl Response (Body) POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ }' https://api.sandbox.investsuite.com/users/ { \"external_id\" : \"null\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : null , \"last_name\" : null , \"status\" : \"WAITING_FOR_VERIFICATION\" } Typical user \u00b6 Request Response (body) POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_identity_id_2809\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+123456789\" , \"counter_account\" : { ba n k_accou nt _ nu mber : \"BE01234567891234\" , ba n k_accou nt _ t ype : \"IBAN\" , ba n k_id : \"IDQMIE2D\" }, \"language\" : \"en-US\" \"status\" : \"WAITING_FOR_VERIFICATION\" } { \"external_id\" : \"unique_external_identity_id_2809\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Field Description Data type Example Required external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in your system to identify this entity. string <= 64 characters unique_external_entity_id No first_name The first name of the user. string <= 128 characters Ashok Required if the user uses InvestSuite's front-end applications for investing. Displayed in the app. last_name The last name of the user. string <= 128 characters Kumar Required if the user uses InvestSuite's front-end applications for investing. Displayed in the app. email The email address of the user. Required if InvestSuite creates the user at the identity provider. phone The mobile phone number of the user. Required if InvestSuite creates the user at the identity provider, only if 2-factor authentication is foreseen. language The preferred communication language of the user. No counter_account > bank_account_number_type Type of the bank account number, typically an IBAN number. Required if the user uses InvestSuite's front-end applications for investing. counter_account > bank_account_number Account number of the user to which money withdrawn from the user's portfolio will be settled. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the withdrawal screen of the InvestSuite app. status The status of the user. See Status No The user is now visible in the Admin Console: Create a login \u00b6 Info Only applicable if the identity provider (IdP) is managed by InvestSuite (see Onboarding). To create credentials for the user to log in, specify the create_idp_user query parameter and the email and phone fields. Warning The IdP will probably require that email and phone are unique. These fields are write once . You cannot update them. HTTP curl POST /users/?create_idp_user=true HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"external_id\": \"unique_external_entity_id\", \\ \"first_name\": \"Ashok\", \\ \"last_name\": \"Kumar\", \\ \"email\": \"ashok.kumar@example.com\", \\ \"phone\": \"+123456789\" }' https://api.sandbox.investsuite.com/users/?create_idp_user = true Field Description Data type Example Required email The e-mail address of the user. Unique and write once. email ashok.kumar@example.com yes phone The mobile phone number of the user in international format. Unique and write once. string (^\\+[1-9][0-9]{7,15}\\Z) +123456789 yes After creating the user, the IdP is responsible for completing the registration on its behalf. Typically this involves the IdP sending an email to reset the password and complete additional details. Get a user \u00b6 Add the InvestSuite ID to the path to retrieve a user object. Request Response (body) GET /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"readable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"modifiable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"_embedded\" : {}, \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"brokerage_user_id\" : \"12345678\" , \"idp_user_id\" : \"user_idp_identity\" , \"language\" : \"en-US\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" } } Update a user \u00b6 Given the right permissions you can update any object by issuing a PATCH request. Warning Not all fields can be updated, eg. the phone and email fields can only be set once. You can update these fields: external_id , first_name , last_name , counter_account , language . Update the language \u00b6 Request Response (body) PATCH /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"language\" : \"be-NL\" } { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"be-NL\" } Update the counter account \u00b6 Counter Account: see Glossary . You can optionally add a counter account during user creation; or afterwards by patching the user object. This is used to display to your customer the account that is funded in case of a withdrawal instruction. HTTP curl PATCH /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/users/' \\ --header 'Content-Type: application/json' \\ -H \"Auhorization\" : \"{string}\" \\ --data-raw '{ \"external_id\": \"unique_external_entity_id\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\", \"email\": \"ashok.kumar@example.com\", \"phone\": \"+12345667\", \"counter_account\": { \"bank_account_number\": \"BE01234567891234\", \"bank_account_number_type\": \"IBAN\", \"bank_id\": \"IDQMIE2D\", \"bank_id_type\": \"BIC\" } }' Field Description Data type Example Required bank_account_number Account number of the user for withdrawal instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes bank_account_number_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no bank_id_type Bank identifier code type. string AnyOf(\"BIC\", \"ABA\") BIC no Update the status \u00b6 The user status is used throughout the onboarding process, and defines where the user is in that process. Some capabilities may be unaccessible as long as the user is not fully onboarded. Request PATCH /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"status\" : \"WAITING_FOR_SIGNATURE\" } State Transitions Note The API does not enforce a specific sequence. Delete a user \u00b6 Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : true , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Query users \u00b6 You can query each entity collection with the query parameter e.g. GET /users/?query=\u2026 . Learn more in the Handling collection responses section. Request Response (body) GET /users ?query=email+eq+'jane*' HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"User (object)"},{"location":"concepts/users/#context","text":"This page lists all operations that can be performed on the User object, see See Glossary .","title":"Context"},{"location":"concepts/users/#create-a-user","text":"Typically a User is created with a name and an External ID, but none are required by the API and all can be updated later, as needed or as allowed by law. Depending on which products the User uses, fields become required from a fuctional point of view. For example, you can create a user without a name, but when using Self Investor (or any other application with a frontend), the user will not be able to use that product if no name is specified.","title":"Create a user"},{"location":"concepts/users/#minimum-user","text":"HTTP curl Response (Body) POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ }' https://api.sandbox.investsuite.com/users/ { \"external_id\" : \"null\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : null , \"last_name\" : null , \"status\" : \"WAITING_FOR_VERIFICATION\" }","title":"Minimum user"},{"location":"concepts/users/#typical-user","text":"Request Response (body) POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_identity_id_2809\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+123456789\" , \"counter_account\" : { ba n k_accou nt _ nu mber : \"BE01234567891234\" , ba n k_accou nt _ t ype : \"IBAN\" , ba n k_id : \"IDQMIE2D\" }, \"language\" : \"en-US\" \"status\" : \"WAITING_FOR_VERIFICATION\" } { \"external_id\" : \"unique_external_identity_id_2809\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" } Field Description Data type Example Required external_id A unique external identifier for this entity, also referred to as Reference ID. This identifier can be any string used in your system to identify this entity. string <= 64 characters unique_external_entity_id No first_name The first name of the user. string <= 128 characters Ashok Required if the user uses InvestSuite's front-end applications for investing. Displayed in the app. last_name The last name of the user. string <= 128 characters Kumar Required if the user uses InvestSuite's front-end applications for investing. Displayed in the app. email The email address of the user. Required if InvestSuite creates the user at the identity provider. phone The mobile phone number of the user. Required if InvestSuite creates the user at the identity provider, only if 2-factor authentication is foreseen. language The preferred communication language of the user. No counter_account > bank_account_number_type Type of the bank account number, typically an IBAN number. Required if the user uses InvestSuite's front-end applications for investing. counter_account > bank_account_number Account number of the user to which money withdrawn from the user's portfolio will be settled. Required if the user uses InvestSuite's front-end applications for investing. Displayed in the withdrawal screen of the InvestSuite app. status The status of the user. See Status No The user is now visible in the Admin Console:","title":"Typical user"},{"location":"concepts/users/#create-a-login","text":"Info Only applicable if the identity provider (IdP) is managed by InvestSuite (see Onboarding). To create credentials for the user to log in, specify the create_idp_user query parameter and the email and phone fields. Warning The IdP will probably require that email and phone are unique. These fields are write once . You cannot update them. HTTP curl POST /users/?create_idp_user=true HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" } curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '{ \\ \"external_id\": \"unique_external_entity_id\", \\ \"first_name\": \"Ashok\", \\ \"last_name\": \"Kumar\", \\ \"email\": \"ashok.kumar@example.com\", \\ \"phone\": \"+123456789\" }' https://api.sandbox.investsuite.com/users/?create_idp_user = true Field Description Data type Example Required email The e-mail address of the user. Unique and write once. email ashok.kumar@example.com yes phone The mobile phone number of the user in international format. Unique and write once. string (^\\+[1-9][0-9]{7,15}\\Z) +123456789 yes After creating the user, the IdP is responsible for completing the registration on its behalf. Typically this involves the IdP sending an email to reset the password and complete additional details.","title":"Create a login"},{"location":"concepts/users/#get-a-user","text":"Add the InvestSuite ID to the path to retrieve a user object. Request Response (body) GET /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"readable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"modifiable_by\" : [ \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" ], \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"_embedded\" : {}, \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"brokerage_user_id\" : \"12345678\" , \"idp_user_id\" : \"user_idp_identity\" , \"language\" : \"en-US\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" } }","title":"Get a user"},{"location":"concepts/users/#update-a-user","text":"Given the right permissions you can update any object by issuing a PATCH request. Warning Not all fields can be updated, eg. the phone and email fields can only be set once. You can update these fields: external_id , first_name , last_name , counter_account , language .","title":"Update a user"},{"location":"concepts/users/#update-the-language","text":"Request Response (body) PATCH /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"language\" : \"be-NL\" } { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"be-NL\" }","title":"Update the language"},{"location":"concepts/users/#update-the-counter-account","text":"Counter Account: see Glossary . You can optionally add a counter account during user creation; or afterwards by patching the user object. This is used to display to your customer the account that is funded in case of a withdrawal instruction. HTTP curl PATCH /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" , \"email\" : \"ashok.kumar@example.com\" , \"phone\" : \"+12345667\" , \"counter_account\" : { \"bank_account_number\" : \"BE01234567891234\" , \"bank_account_number_type\" : \"IBAN\" , \"bank_id\" : \"IDQMIE2D\" , \"bank_id_type\" : \"BIC\" } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/users/' \\ --header 'Content-Type: application/json' \\ -H \"Auhorization\" : \"{string}\" \\ --data-raw '{ \"external_id\": \"unique_external_entity_id\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\", \"email\": \"ashok.kumar@example.com\", \"phone\": \"+12345667\", \"counter_account\": { \"bank_account_number\": \"BE01234567891234\", \"bank_account_number_type\": \"IBAN\", \"bank_id\": \"IDQMIE2D\", \"bank_id_type\": \"BIC\" } }' Field Description Data type Example Required bank_account_number Account number of the user for withdrawal instructions. string ^[A-Z]{2}[A-Z0-9]{14,30}\\Z BE01234567891234 yes bank_account_number_type Type of the bank account number that is associated with this portfolio, typically an IBAN number. enum(\"ABA\", \"IBAN\") IBAN yes bank_id Bank identifier code or ID of the bank used for routing instructions, typically a BIC identifier. string AnyOf(\"^[0-9]{9}\\Z\", \"^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?\\Z\") IDQMIE2D no bank_id_type Bank identifier code type. string AnyOf(\"BIC\", \"ABA\") BIC no","title":"Update the counter account"},{"location":"concepts/users/#update-the-status","text":"The user status is used throughout the onboarding process, and defines where the user is in that process. Some capabilities may be unaccessible as long as the user is not fully onboarded. Request PATCH /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"status\" : \"WAITING_FOR_SIGNATURE\" } State Transitions Note The API does not enforce a specific sequence.","title":"Update the status"},{"location":"concepts/users/#delete-a-user","text":"Given the right permissions you can delete any object by issuing a DELETE request. Request Response (body) DELETE /users/U01F8YW5NJXMF78PMFKXTE2R7Q7 HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : true , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"Delete a user"},{"location":"concepts/users/#query-users","text":"You can query each entity collection with the query parameter e.g. GET /users/?query=\u2026 . Learn more in the Handling collection responses section. Request Response (body) GET /users ?query=email+eq+'jane*' HTTP/1.1 Host: api.sandbox.investsuite.com Authorization: Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Jane\" , \"last_name\" : \"Doe\" , \"email\" : \"jane.doe@example.com\" , \"phone\" : \"+123456789\" , \"language\" : \"en-US\" }","title":"Query users"},{"location":"robo/introduction/","text":"This section handles topics that are specific to Robo Advisor.","title":"Introduction"},{"location":"robo/optimization/","text":"Definition See the Glossary for a definition. Get the latest optimization of a portfolio \u00b6 GET /portfolios/{id}/optimizations/current HTTP / 1.1 Content-Type : application/json { \"id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , ... \"portfolio_update\" : { \"is_recommended\" : true , \"orders\" : { \"IE00B44Z5B48\" : { \"quantity_type\" : \"UNITS\" , \"quantity\" : 5 , \"shares\" : 5 , \"expected_share_price\" : 123.45 , \"expected_transaction_cost\" : 25 }, \"LU0378818131\" : { \"quantity_type\" : \"AMOUNT\" , \"quantity\" : -434.56 , \"shares\" : -8 , \"expected_share_price\" : 54.32 , \"expected_transaction_cost\" : 35 } } } }","title":"Optimization (object)"},{"location":"robo/optimization/#get-the-latest-optimization-of-a-portfolio","text":"GET /portfolios/{id}/optimizations/current HTTP / 1.1 Content-Type : application/json { \"id\" : \"O01ARZ3NDEKTSV4RRFFQ69G5FAV\" , ... \"portfolio_update\" : { \"is_recommended\" : true , \"orders\" : { \"IE00B44Z5B48\" : { \"quantity_type\" : \"UNITS\" , \"quantity\" : 5 , \"shares\" : 5 , \"expected_share_price\" : 123.45 , \"expected_transaction_cost\" : 25 }, \"LU0378818131\" : { \"quantity_type\" : \"AMOUNT\" , \"quantity\" : -434.56 , \"shares\" : -8 , \"expected_share_price\" : 54.32 , \"expected_transaction_cost\" : 35 } } } }","title":"Get the latest optimization of a portfolio"},{"location":"robo/quick_start/","text":"Get acquainted with the InvestSuite API. This quick start takes you through the typical steps to integrate with InvestSuite's Optimizer and Robo Advisor products. Below sequence diagram describes these basic steps. As a quick start, we will perform these steps interactively. Hint This exercise demonstrates the flow for Robo Advisor. The flow for Self Investor is the same. The only difference is that for Self Investor you do not get to call the optimizer for order recommendations. Integration flow \u00b6 Let's now get familiar with the API by simulating what is documented in the sequence diagram. These will be the steps: Create a user by invoking POST /users/ . Create a portfolio by invoking POST /portfolios/ . Update the portfolio with the latest portfolio snapshot (initially only a cash holding). Get order recommendations as the result of an optimization, based on the holdings and portfolio settings. Post the transactions you get back from your broker. Repeat steps 4 - 7. Note As the sequence diagram reflects it is your role to act as the middle layer between InvestSuite and the broker (unless agreed differently during a common analyses). This means you get the orders and cash movement instructions via InvestSuite and place them with the broker. In the opposite direction, you provide to InvestSuite the holdings and the transactions from the broker. Since this is a simulation however broker integration is not relevant. Instead we create a so-called virtual portfolio . This is a portfolio funded with paper money , as opposed to real money. Steps \u00b6 1. Create a user \u00b6 Create a user for your customer so that in the next step you can define that user as owner of a portfolio. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } curl --location --request POST 'https://api.sandbox.investsuite.com/users/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"ashok-kumar-1\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\" }' Response body { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } Hint Copy the User ID from the Response Body to use in the next step. 2. Create a portfolio \u00b6 To optimize a portfolio that portfolio has to reference a policy , which is an investment strategy defined by the bank. Such strategy holds the constraints for the optimization algorithm to take into account when rendering order recommendations, for instance the minimum number of stocks within a certain sector or region. Select the id from the first policy returned by requesting GET /policies/ . HTTP curl GET /robo-advisor/policies/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/robo-advisor/policies/' \\ --H 'Authorization: Bearer {access_token_string}' Once you have obtained the policy ID you can create a portfolio. HTTP curl POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , } }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"base_currency\":\"USD\", \"config\":{ \"manager\":\"ROBO_ADVISOR_DISCRETIONARY\", \"manager_version\":1 \"manager_settings\": { \"policy_id\":\"Y01EF46X9XB437JS4678X0K529C\", } }, \"external_id\":\"your-bank-portfolio-1\", \"money_type\":\"PAPER_MONEY\", \"owned_by_user_id\":\"U01F5WYKRRXZHXT9S6FF1JZNJVZ\", }' Take a look at the request body... You create a portfolio under a discretionary mandate: config.manager=\"ROBO_ADVISOR_DISCRETIONARY\" . This sort of mandate comprehends that the portfolio is fully managed by the Robo Advisor, without the need for your customer to intervene. Making it a \u201cvirtual portfolio\u201d makes that paper money is used to simulate trades: \"money_type\": \"PAPER_MONEY\" . You assign the user you created in step 1 as owner: \"owned_by_user_id\": \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" . Selecting the applicable investment policy as management setting is required for the Robo Advisor's optimizer algorithm: config.manager_settings.policy_id=\"Y01EF46X9XB437JS4678X0K529C\" . Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Copy the Portfolio ID from the Response Body to use in the next step. 3. Fund the portfolio \u00b6 Add an initial amount for the Robo Advisor to invest the portfolio you just created. To indicate a portfolio's holding to be the cash holding use the currency abbreviation defined in the ISO international standard 4217, e.g. AUD, and prefix it with the $-sign so $AUD . The currency to use is the one defined in the portfolio field base_currency . HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000 } }' Alongside the updated holdings with the cash position, register the cash deposit transaction. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 10000.0 , } ], } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\", \"movements\": [ { \"external_id\": \"13891096285\", \"type\": \"CASH_DEPOSIT\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-27T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 10000.0, \"quantity_type\": \"AMOUNT\" } ], }' Response body { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"type\" : \"CASH_TRANSFER\" , \"order_type\" : null , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"sub_type\" : \"Cash Deposit\" , \"description\" : null , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"instrument_name\" : null , \"quantity\" : 1 } ], \"description\" : null , \"id\" : \"T01FGNG33GFJK5GCN4KZSPZYMFF\" , \"creation_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"status\" : \"COMPLETED\" } 4. Recommended orders \u00b6 Given you assigned a policy and an initial amount to the portfolio as part of the two previous steps, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , } 5. Post transactions \u00b6 Simulate buy transactions for the orders the optimizer recommended in step 4 above, see portfolio_update.orders in the response body. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} [ { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"US4642886612\" , \"quantity\" : 2 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 125 , } ] }, { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.930643+00:00\" , \"instrument_id\" : \"US4642863926\" , \"quantity\" : 3 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 350.50 , } ] } ] curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '[ { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"US4642886612\", \"quantity\": 2, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 125, } ] }, { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-24T06:15:01.930643+00:00\", \"instrument_id\": \"US4642863926\", \"quantity\": 3, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 350.50, } ] } ]' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ 6. Update holdings \u00b6 Next update the portfolio to hold the acquired positions. This will trigger the optimizer anew. In principle the portfolio is now in line with the investment policy used by the optimizer returning no recommendations. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '\"portfolio\": { \\ \"$USD\": 208.086729, \\ \"US78464A6644\": 18.78, \\ \"US4642886612\": 9.2243, \\ \"US46137V2410\": 9, \\ \"US3160923039\": 3, \\ \"US3160928731\": 10, \\ \"US97717W5215\": 6, \\ \"US4642861458\": 4, \\ \"US46429B2676\": 45.146, \\ \"US46434V7617\": 9, \\ \"US4642865251\": 7.6828, \\ \"US46434V4234\": 3 \\ }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Now that there is an invested portfolio you can view the performance and a Monte Carlo simulation to display future performance, see how by taking a look at the API specification. That\u2019s it. If you made it so far well done! \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f Next up, a bit more detail.","title":"Quick start"},{"location":"robo/quick_start/#integration-flow","text":"Let's now get familiar with the API by simulating what is documented in the sequence diagram. These will be the steps: Create a user by invoking POST /users/ . Create a portfolio by invoking POST /portfolios/ . Update the portfolio with the latest portfolio snapshot (initially only a cash holding). Get order recommendations as the result of an optimization, based on the holdings and portfolio settings. Post the transactions you get back from your broker. Repeat steps 4 - 7. Note As the sequence diagram reflects it is your role to act as the middle layer between InvestSuite and the broker (unless agreed differently during a common analyses). This means you get the orders and cash movement instructions via InvestSuite and place them with the broker. In the opposite direction, you provide to InvestSuite the holdings and the transactions from the broker. Since this is a simulation however broker integration is not relevant. Instead we create a so-called virtual portfolio . This is a portfolio funded with paper money , as opposed to real money.","title":"Integration flow"},{"location":"robo/quick_start/#steps","text":"","title":"Steps"},{"location":"robo/quick_start/#1-create-a-user","text":"Create a user for your customer so that in the next step you can define that user as owner of a portfolio. HTTP curl POST /users/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"unique_external_entity_id\" , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } curl --location --request POST 'https://api.sandbox.investsuite.com/users/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"ashok-kumar-1\", \"first_name\": \"Ashok\", \"last_name\": \"Kumar\" }' Response body { \"external_id\" : \"unique_external_entity_id\" , \"id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"creation_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-02-18T08:21:02+00:00\" , \"version_authored_by_user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"deleted\" : false , \"first_name\" : \"Ashok\" , \"last_name\" : \"Kumar\" } Hint Copy the User ID from the Response Body to use in the next step.","title":"1. Create a user"},{"location":"robo/quick_start/#2-create-a-portfolio","text":"To optimize a portfolio that portfolio has to reference a policy , which is an investment strategy defined by the bank. Such strategy holds the constraints for the optimization algorithm to take into account when rendering order recommendations, for instance the minimum number of stocks within a certain sector or region. Select the id from the first policy returned by requesting GET /policies/ . HTTP curl GET /robo-advisor/policies/ HTTP / 1.1 Host : api.sandbox.investsuite.com Authorization : Bearer {access_token_string} curl -X GET 'https://api.sandbox.investsuite.com/robo-advisor/policies/' \\ --H 'Authorization: Bearer {access_token_string}' Once you have obtained the policy ID you can create a portfolio. HTTP curl POST /portfolios/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"base_currency\" : \"USD\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , } }, \"external_id\" : \"your-bank-portfolio-1\" , \"money_type\" : \"PAPER_MONEY\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/portfolios/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"base_currency\":\"USD\", \"config\":{ \"manager\":\"ROBO_ADVISOR_DISCRETIONARY\", \"manager_version\":1 \"manager_settings\": { \"policy_id\":\"Y01EF46X9XB437JS4678X0K529C\", } }, \"external_id\":\"your-bank-portfolio-1\", \"money_type\":\"PAPER_MONEY\", \"owned_by_user_id\":\"U01F5WYKRRXZHXT9S6FF1JZNJVZ\", }' Take a look at the request body... You create a portfolio under a discretionary mandate: config.manager=\"ROBO_ADVISOR_DISCRETIONARY\" . This sort of mandate comprehends that the portfolio is fully managed by the Robo Advisor, without the need for your customer to intervene. Making it a \u201cvirtual portfolio\u201d makes that paper money is used to simulate trades: \"money_type\": \"PAPER_MONEY\" . You assign the user you created in step 1 as owner: \"owned_by_user_id\": \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" . Selecting the applicable investment policy as management setting is required for the Robo Advisor's optimizer algorithm: config.manager_settings.policy_id=\"Y01EF46X9XB437JS4678X0K529C\" . Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } Copy the Portfolio ID from the Response Body to use in the next step.","title":"2. Create a portfolio"},{"location":"robo/quick_start/#3-fund-the-portfolio","text":"Add an initial amount for the Robo Advisor to invest the portfolio you just created. To indicate a portfolio's holding to be the cash holding use the currency abbreviation defined in the ISO international standard 4217, e.g. AUD, and prefix it with the $-sign so $AUD . The currency to use is the one defined in the portfolio field base_currency . HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 } } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"portfolio\": { \"$USD\":10000 } }' Alongside the updated holdings with the cash position, register the cash deposit transaction. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 10000.0 , } ], } curl --location --request PATCH 'https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/' \\ --header 'Authorization: Bearer {string}' \\ --header 'Content-Type: application/json' \\ --data-raw '{ \"external_id\": \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\", \"movements\": [ { \"external_id\": \"13891096285\", \"type\": \"CASH_DEPOSIT\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-27T00:00:00+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 10000.0, \"quantity_type\": \"AMOUNT\" } ], }' Response body { \"external_id\" : \"P01FFMGXDPSZ2HKZD4G55T6YHHD/2014087240\" , \"type\" : \"CASH_TRANSFER\" , \"order_type\" : null , \"movements\" : [ { \"external_id\" : \"13891096285\" , \"type\" : \"CASH_DEPOSIT\" , \"sub_type\" : \"Cash Deposit\" , \"description\" : null , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-27T00:00:00+00:00\" , \"instrument_id\" : \"$USD\" , \"instrument_name\" : null , \"quantity\" : 1 } ], \"description\" : null , \"id\" : \"T01FGNG33GFJK5GCN4KZSPZYMFF\" , \"creation_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:04:54.671046+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , \"status\" : \"COMPLETED\" }","title":"3. Fund the portfolio"},{"location":"robo/quick_start/#4-recommended-orders","text":"Given you assigned a policy and an initial amount to the portfolio as part of the two previous steps, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , }","title":"4. Recommended orders"},{"location":"robo/quick_start/#5-post-transactions","text":"Simulate buy transactions for the orders the optimizer recommended in step 4 above, see portfolio_update.orders in the response body. HTTP curl POST /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} [ { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"US4642886612\" , \"quantity\" : 2 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 125 , } ] }, { \"movements\" : [ { \"type\" : \"BUY\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.930643+00:00\" , \"instrument_id\" : \"US4642863926\" , \"quantity\" : 3 , }, { \"type\" : \"SELL\" , \"status\" : \"SETTLED\" , \"datetime\" : \"2021-09-24T06:15:01.999300+00:00\" , \"instrument_id\" : \"$USD\" , \"quantity\" : 350.50 , } ] } ] curl -X POST \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '[ { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"US4642886612\", \"quantity\": 2, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 125, } ] }, { \"movements\": [ { \"type\": \"BUY\", \"status\": \"SETTLED\", \"datetime\": \"2021-09-24T06:15:01.930643+00:00\", \"instrument_id\": \"US4642863926\", \"quantity\": 3, }, { \"type\": \"SELL\", \"status\": \"SETLLED\", \"datetime\": \"2021-09-24T06:15:01.999300+00:00\", \"instrument_id\": \"$USD\", \"quantity\": 350.50, } ] } ]' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/transactions/","title":"5. Post transactions"},{"location":"robo/quick_start/#6-update-holdings","text":"Next update the portfolio to hold the acquired positions. This will trigger the optimizer anew. In principle the portfolio is now in line with the investment policy used by the optimizer returning no recommendations. HTTP curl PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 } curl -X PATCH \\ -H \"Content-Type: application/json\" \\ -H \"Auhorization\" : \"{string}\" \\ -d '\"portfolio\": { \\ \"$USD\": 208.086729, \\ \"US78464A6644\": 18.78, \\ \"US4642886612\": 9.2243, \\ \"US46137V2410\": 9, \\ \"US3160923039\": 3, \\ \"US3160928731\": 10, \\ \"US97717W5215\": 6, \\ \"US4642861458\": 4, \\ \"US46429B2676\": 45.146, \\ \"US46434V7617\": 9, \\ \"US4642865251\": 7.6828, \\ \"US46434V4234\": 3 \\ }' \\ https://api.sandbox.investsuite.com/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ Response body { \"external_id\" : \"your-bank-portfolio-1\" , \"owned_by_user_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" : { \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"active\" : true } }, \"portfolio\" : { \"$USD\" : 208.086729 , \"US78464A6644\" : 18.78 , \"US4642886612\" : 9.2243 , \"US46137V2410\" : 9 , \"US3160923039\" : 3 , \"US3160928731\" : 10 , \"US97717W5215\" : 6 , \"US4642861458\" : 4 , \"US46429B2676\" : 45.146 , \"US46434V7617\" : 9 , \"US4642865251\" : 7.6828 , \"US46434V4234\" : 3 }, \"snapshot_datetime\" : null , \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 3 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"ACTIVE\" } Now that there is an invested portfolio you can view the performance and a Monte Carlo simulation to display future performance, see how by taking a look at the API specification. That\u2019s it. If you made it so far well done! \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f Next up, a bit more detail.","title":"6. Update holdings"},{"location":"robo/rebalancing/","text":"Definition See the Glossary for a definition. Overview \u00b6 The following diagram describes the rebalancing process at a high level. Process \u00b6 Depending on the following criteria, the rebalancing process is different: Broker/Custodian integration: by InvestSuite or by the Client Mandate: Advisory or Discretionary Portfolio Optimizer: by InvestSuite or by the Client 1. Optimization is triggered \u00b6 Client integrates with broker \u00b6 When the Client integrates with the Broker, an Optimization is triggered when the Portfolio object is patched (with Holdings or Transactions): A funding happens, see Funding . InvestSuite integrates with broker \u00b6 When InvestSuite integrates with the Broker, an Optimization is triggered by a nightly batch job, run by InvestSuite. External Optimizer \u00b6 The client (the external optimizer) decides when it runs. 2. Optimization is ready to be executed \u00b6 Discretionary mandate \u00b6 When an Optimization is recommended (the portfolio_update.is_recommended field on the Optimization is true ), the Optimization is considered ready to be executed. Advisory mandate \u00b6 When the Optimization is accepted by the user (the owner_choice field on the Optimization is ACCEPT ), the Optimization is considered ready to be executed. Portfolio not reoptimized \u00b6 When an Optimization is ready to be executed, the Portfolio is (temporarily) excluded from optimization. 3. Orders of Optimization sent to the broker \u00b6 Client integrates with broker \u00b6 The Client middleware sends the Orders of the Optimization to the broker, and updates InvestSuite: The Client middleware gets the Orders from the Optimization object, see here . The Client middleware sends the Orders to the broker. The Client middleware creates corresponding Transactions in InvestSuite, see here . InvestSuite integrates with the broker \u00b6 InvestSuite sends the orders to the broker and keeps them up to date. 4. Orders are executed or settled \u00b6 Client integrates with the broker \u00b6 The Client middleware updates the corresponding Transactions in InvestSuite, see here . The Client middleware updates the Portfolio holdings, see here . InvestSuite integrates with the broker \u00b6 InvestSuite keeps the orders up to date. Portfolio reoptimized \u00b6 When all Transactions of an Optimization have a status EXECUTED or SETTLED , the Portfolio is considered again for optimization.","title":"Rebalancing (process)"},{"location":"robo/rebalancing/#overview","text":"The following diagram describes the rebalancing process at a high level.","title":"Overview"},{"location":"robo/rebalancing/#process","text":"Depending on the following criteria, the rebalancing process is different: Broker/Custodian integration: by InvestSuite or by the Client Mandate: Advisory or Discretionary Portfolio Optimizer: by InvestSuite or by the Client","title":"Process"},{"location":"robo/rebalancing/#1-optimization-is-triggered","text":"","title":"1. Optimization is triggered"},{"location":"robo/rebalancing/#client-integrates-with-broker","text":"When the Client integrates with the Broker, an Optimization is triggered when the Portfolio object is patched (with Holdings or Transactions): A funding happens, see Funding .","title":"Client integrates with broker"},{"location":"robo/rebalancing/#investsuite-integrates-with-broker","text":"When InvestSuite integrates with the Broker, an Optimization is triggered by a nightly batch job, run by InvestSuite.","title":"InvestSuite integrates with broker"},{"location":"robo/rebalancing/#external-optimizer","text":"The client (the external optimizer) decides when it runs.","title":"External Optimizer"},{"location":"robo/rebalancing/#2-optimization-is-ready-to-be-executed","text":"","title":"2. Optimization is ready to be executed"},{"location":"robo/rebalancing/#discretionary-mandate","text":"When an Optimization is recommended (the portfolio_update.is_recommended field on the Optimization is true ), the Optimization is considered ready to be executed.","title":"Discretionary mandate"},{"location":"robo/rebalancing/#advisory-mandate","text":"When the Optimization is accepted by the user (the owner_choice field on the Optimization is ACCEPT ), the Optimization is considered ready to be executed.","title":"Advisory mandate"},{"location":"robo/rebalancing/#portfolio-not-reoptimized","text":"When an Optimization is ready to be executed, the Portfolio is (temporarily) excluded from optimization.","title":"Portfolio not reoptimized"},{"location":"robo/rebalancing/#3-orders-of-optimization-sent-to-the-broker","text":"","title":"3. Orders of Optimization sent to the broker"},{"location":"robo/rebalancing/#client-integrates-with-broker_1","text":"The Client middleware sends the Orders of the Optimization to the broker, and updates InvestSuite: The Client middleware gets the Orders from the Optimization object, see here . The Client middleware sends the Orders to the broker. The Client middleware creates corresponding Transactions in InvestSuite, see here .","title":"Client integrates with broker"},{"location":"robo/rebalancing/#investsuite-integrates-with-the-broker","text":"InvestSuite sends the orders to the broker and keeps them up to date.","title":"InvestSuite integrates with the broker"},{"location":"robo/rebalancing/#4-orders-are-executed-or-settled","text":"","title":"4. Orders are executed or settled"},{"location":"robo/rebalancing/#client-integrates-with-the-broker","text":"The Client middleware updates the corresponding Transactions in InvestSuite, see here . The Client middleware updates the Portfolio holdings, see here .","title":"Client integrates with the broker"},{"location":"robo/rebalancing/#investsuite-integrates-with-the-broker_1","text":"InvestSuite keeps the orders up to date.","title":"InvestSuite integrates with the broker"},{"location":"robo/rebalancing/#portfolio-reoptimized","text":"When all Transactions of an Optimization have a status EXECUTED or SETTLED , the Portfolio is considered again for optimization.","title":"Portfolio reoptimized"},{"location":"robo/run_optimizer/","text":"Context \u00b6 The Optimizer is an essential component of the InvestSuite Robo Advisor. It constructs out of an existing portfolio an optimal portfolio. For this, an algorithm is configured which will suggest a list of orders to be placed with the broker. These orders bring the portfolio in line with the optimal portfolio. The default algorithm underpinning the Optimizer is called iVar . InvestSuite has developed iVar as a human-centric measure of risk. It is a 4th-generation risk measure that addresses the shortcomings of traditional risk measures, with a clear and distinct focus on controlling risk - over maximising return. Next to iVaR, all contemporary risk measures such as volatility, Value-at-Risk and conditional Value-at-Risk are supported. Info What is iVaR? Traditional investment risk measures that are still used today, such as volatility, have historically been chosen because of their simple mathematical properties. They do not work well to describe the risk of real investment portfolios and are not consistent with what end investors perceive as risk. Following the above observations, we developed a new, innovative risk measure which we call InvestSuite Value at Risk (iVaR). Our basic premise is that any instrument or portfolio providing strict monotonic growth (i.e., no losses) should be risk-less, regardless of the speed or consistency of the growth. The reason for this premise is that it matches the behaviour of a savings account, which also increases monotonically in value over time, and is considered risk-less by end investors. Basic setup \u00b6 The basic setup is straightforward: From your program, or from a common mobile app, the portfolio's holdings are sent in a PATCH request. We pass that to the optimizer. You issue a GET request, at your pace, against /portfolios/{id}/optimizations/current/ . When the latest optimization is computed - takes between 5 seconds and 2 minutes - you receive order recommendations. You place the orders with your broker. (unless we agreed that InvestSuite would connect to the broker) Example middleware design \u00b6 Patch portfolio \u00b6 Portfolios managed in the InvestSuite platform are either composed by the investor, i.e. Self Execution, or by the Robo Advisor. Management by the Robo Advisor can be under two mandates: an advisory mandate or a discretionary mandate. In case of an advisory mandate the investor can intervene on the Robo Advisor's order recommendations. In case of a discretionary mandate the Robo Advisor is in full charge of the rebalancing process, and the investor enjoys a full \"auto pilot\" mode. Either way, each time a portfolio managed by the Robo Advisor is updated an optimization is triggered. In other words: to trigger the optimizer, patch the portfolio. Prerequisites: prior to patching a portfolio, make sure there is a portfolio referencing a policy, see Portfolio creation . Below example patches the portfolio by updating the holdings. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } This will now trigger an optimization. Get optimizations \u00b6 Calculation of an optimization takes between 5 seconds and a couple of minutes depending on the complexity of the referenced investment policy, and the compute resources made available to the system. When calculation is in process the server returns a 202 response. Else the server returns a 200 , and an Optimization object. Given you assigned a policy and at least a cash position to the portfolio, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body upon calculation { \"message\" : \"Optimization is not available (yet). Could not get optimization for optimization_hash.\" , \"details\" : \"Entity 'None' (version=None) not found for tenant 'None'\" , \"optimization_hash\" : \"8b22a2d4bdd142c6dca4ead3da80b4e8\" } Response body after calculation { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , } Field Description Data type Example Required id Optimization ID Unique ID for this portfolio. string ^O[0-9A-HJKMNP-TV-Z]{26}\\Z O01FCB5EJQ9RWDK0SWRA17R87EN yes {current|optimal_solution}->objective_value Objective Value describes the degree of optimality of the portfolio. Portfolio Optimizer tries to minimise the objective value. number 0.00665 yes {current|optimal_solution}->holdings The holdings in the portfolio to be optimized, or in the optimal portfolio. object {\"$USD\":10000, \"US0378331005\": 20, \"GB0005405286\": 5} yes {current|optimal_solution}->look_through The look through values of the portfolio before and after optimization. object yes {current|optimal_solution}->portfolio_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object yes {current|optimal_solution}->benchmark_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object no portfolio_update->is_recommended Whether the portfolio update is recommended. True if there are reasons and applicable thresholds are passed, false otherwise. boolean TRUE yes portfolio_update->orders->shares he number of shares to buy (if positive) or sell (if negative). number 20 yes portfolio_update->orders->expected_share_price The share price at which the order is expected to be executed, expressed in the portfolio's base currency. number 100 yes portfolio_update->orders->expected_transaction_cost The expected transaction cost for this order, expressed in the portfolio's base currency. number 2 yes portfolio_update->reasons Reasons to update a portfolio object yes portfolio_update->reasons->portfolio_update_constraint_id The portfolio update constraint that is satisfied. string max_portfolio_constraint_violation_pctpoints yes portfolio_update->reasons->portfolio_update_constraint_value The value of the portfolio update constraint. number 0.9 yes portfolio_update->reasons->portfolio_constraint_id The id of the corresponding portfolio constraint. string holdings.cash yes creation_datetime The date and time the first version of the entity was created. date-time 2025-06-04T15:23:15.328252+00:0 yes Portfolio is OK \u00b6 A PS...Given you have gotten this far you could now do a little test. You could update the portfolio again with the positions from the optimal_solution.portfolio object. To do this patch the portfolio again, just like you did above. The result should be that portfolio_update no longer holds recommended orders, or at least states that \"is_recommended\": false . This means the Portfolio is OK and does not need to be rebalanced.","title":"Optimize a portfolio"},{"location":"robo/run_optimizer/#context","text":"The Optimizer is an essential component of the InvestSuite Robo Advisor. It constructs out of an existing portfolio an optimal portfolio. For this, an algorithm is configured which will suggest a list of orders to be placed with the broker. These orders bring the portfolio in line with the optimal portfolio. The default algorithm underpinning the Optimizer is called iVar . InvestSuite has developed iVar as a human-centric measure of risk. It is a 4th-generation risk measure that addresses the shortcomings of traditional risk measures, with a clear and distinct focus on controlling risk - over maximising return. Next to iVaR, all contemporary risk measures such as volatility, Value-at-Risk and conditional Value-at-Risk are supported. Info What is iVaR? Traditional investment risk measures that are still used today, such as volatility, have historically been chosen because of their simple mathematical properties. They do not work well to describe the risk of real investment portfolios and are not consistent with what end investors perceive as risk. Following the above observations, we developed a new, innovative risk measure which we call InvestSuite Value at Risk (iVaR). Our basic premise is that any instrument or portfolio providing strict monotonic growth (i.e., no losses) should be risk-less, regardless of the speed or consistency of the growth. The reason for this premise is that it matches the behaviour of a savings account, which also increases monotonically in value over time, and is considered risk-less by end investors.","title":"Context"},{"location":"robo/run_optimizer/#basic-setup","text":"The basic setup is straightforward: From your program, or from a common mobile app, the portfolio's holdings are sent in a PATCH request. We pass that to the optimizer. You issue a GET request, at your pace, against /portfolios/{id}/optimizations/current/ . When the latest optimization is computed - takes between 5 seconds and 2 minutes - you receive order recommendations. You place the orders with your broker. (unless we agreed that InvestSuite would connect to the broker)","title":"Basic setup"},{"location":"robo/run_optimizer/#example-middleware-design","text":"","title":"Example middleware design"},{"location":"robo/run_optimizer/#patch-portfolio","text":"Portfolios managed in the InvestSuite platform are either composed by the investor, i.e. Self Execution, or by the Robo Advisor. Management by the Robo Advisor can be under two mandates: an advisory mandate or a discretionary mandate. In case of an advisory mandate the investor can intervene on the Robo Advisor's order recommendations. In case of a discretionary mandate the Robo Advisor is in full charge of the rebalancing process, and the investor enjoys a full \"auto pilot\" mode. Either way, each time a portfolio managed by the Robo Advisor is updated an optimization is triggered. In other words: to trigger the optimizer, patch the portfolio. Prerequisites: prior to patching a portfolio, make sure there is a portfolio referencing a policy, see Portfolio creation . Below example patches the portfolio by updating the holdings. Request Response (body) PATCH /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} { \"portfolio\" : { \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 } } { \"external_id\" : \"your-bank-portfolio-1\" , \"name\" : \"General investing\" , \"owned_by_portfolio_id\" : \"U01F5WYKRRXZHXT9S6FF1JZNJVZ\" , \"base_currency\" : \"USD\" , \"money_type\" : \"PAPER_MONEY\" , \"config\" :{ \"manager\" : \"ROBO_ADVISOR_DISCRETIONARY\" , \"manager_version\" : 1 , \"manager_settings\" :{ \"policy_id\" : \"Y01EF46X9XB437JS4678X0K529C\" , \"goal_id\" : \"L01EF46X4872VVN0QRW4XF2ZP6W\" , \"horizon_id\" : \"H01EQ3429CY6Y2NW0ZF8A8Y2FYJ\" } }, \"portfolio\" :{ \"$USD\" : 10000 , \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 }, \"funded_since\" : null , \"id\" : \"P01F8ZSNV0J45R9DFZ3D7D8C26F\" , \"creation_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version\" : 2 , \"version_datetime\" : \"2021-06-24T19:59:15.474241+00:00\" , \"version_authored_by_portfolio_id\" : \"U01EJQSYGYQJJ5GNFM4ZXW59Q0X\" , \"deleted\" : false , \"status\" : \"WAITING_FOR_FUNDS\" } This will now trigger an optimization.","title":"Patch portfolio"},{"location":"robo/run_optimizer/#get-optimizations","text":"Calculation of an optimization takes between 5 seconds and a couple of minutes depending on the complexity of the referenced investment policy, and the compute resources made available to the system. When calculation is in process the server returns a 202 response. Else the server returns a 200 , and an Optimization object. Given you assigned a policy and at least a cash position to the portfolio, you can now issue a GET request to retrieve order recommendations for the portfolio you just initiated. HTTP curl GET /portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ HTTP / 1.1 Host : api.sandbox.investsuite.com Accept-Encoding : gzip, deflate Connection : Keep-Alive Content-Type : application/json Authorization : Bearer {string} curl -X GET \\ -H \"Auhorization\" : \"{string}\" \\ https://api.sandbox.investsuite.com/portfolios/portfolios/P01F8ZSNV0J45R9DFZ3D7D8C26F/optimizations/current/ Response body upon calculation { \"message\" : \"Optimization is not available (yet). Could not get optimization for optimization_hash.\" , \"details\" : \"Entity 'None' (version=None) not found for tenant 'None'\" , \"optimization_hash\" : \"8b22a2d4bdd142c6dca4ead3da80b4e8\" } Response body after calculation { \"current_solution\" :{ \"objective_value\" : -2.3899945188058256e-05 , \"portfolio\" :{ \"US78468R1014\" : 3 , \"$USD\" : 402.52 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 1.0 , \"commodities\" : 0.0 , \"stocks\" : 0.0 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 0.0 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.0 , \"consumer_cyclical\" : 0.0 , \"consumer_defensive\" : 0.0 , \"communication_services\" : 0.0 , \"energy\" : 0.0 , \"financial_services\" : 0.0 , \"healthcare\" : 0.0 , \"industrials\" : 0.0 , \"real_estate\" : 0.0 , \"technology\" : 0.0 , \"utilities\" : 0.0 } } }, \"optimal_solution\" :{ \"objective_value\" : 0.001359509844724587 , \"portfolio\" :{ \"US4642886612\" : 0.76 , \"US78468R1014\" : 3 , \"US4642863926\" : 0.7381 , \"US46429B2676\" : 3.7190000000000003 , \"US78468R2004\" : 3.0000000000000004 , \"$USD\" : 14.769662844999981 }, \"look_through\" :{ \"asset_classes\" :{ \"alternatives\" : 0.0 , \"bonds\" : 0.7986485447656201 , \"commodities\" : 0.0 , \"stocks\" : 0.20135145523437992 , \"cash\" : 0.0 }, \"regions\" :{ \"bonds\" :{ \"asia_pacific_developed\" : 0.0 , \"emerging\" : 0.0 , \"europe_developed\" : 0.0 , \"north_america\" : 1.0 }, \"stocks\" :{ \"asia_pacific_developed\" : 0.09369676320272571 , \"emerging\" : 0.0 , \"europe_developed\" : 0.1799403747870528 , \"north_america\" : 0.7263628620102215 } }, \"bond_types\" : null , \"sectors\" :{ \"basic_materials\" : 0.046054619609495716 , \"consumer_cyclical\" : 0.13806308600212508 , \"consumer_defensive\" : 0.07094628258129534 , \"communication_services\" : 0.022473042495950425 , \"energy\" : 0.03446538322470511 , \"financial_services\" : 0.16124155877170626 , \"healthcare\" : 0.12224125679967916 , \"industrials\" : 0.11992341101283713 , \"real_estate\" : 0.0 , \"technology\" : 0.2563740870896863 , \"utilities\" : 0.02821727241251957 } }, }, \"portfolio_update\" :{ \"is_recommended\" : true , \"orders\" :{ \"US4642886612\" :{ \"shares\" : 0.76 , \"expected_share_price\" : 130.09 , \"expected_transaction_cost\" : 0.4943420000000001 }, \"US4642863926\" :{ \"shares\" : 0.7381 , \"expected_share_price\" : 130.31 , \"expected_transaction_cost\" : 0.48090905500000003 }, \"US46429B2676\" :{ \"shares\" : 3.719 , \"expected_share_price\" : 26.58 , \"expected_transaction_cost\" : 0.4942551 }, \"US78468R2004\" :{ \"shares\" : 3 , \"expected_share_price\" : 30.64 , \"expected_transaction_cost\" : 0.4596 } } }, \"id\" : \"O01FGNGNS3R3836WB3JHD22J748\" , \"creation_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version\" : 1 , \"version_datetime\" : \"2021-09-28T06:15:06.613287+00:00\" , \"version_authored_by_user_id\" : \"UXXXXXXXXXXXXXXXXXXXXXXXXXX\" , \"deleted\" : false , } Field Description Data type Example Required id Optimization ID Unique ID for this portfolio. string ^O[0-9A-HJKMNP-TV-Z]{26}\\Z O01FCB5EJQ9RWDK0SWRA17R87EN yes {current|optimal_solution}->objective_value Objective Value describes the degree of optimality of the portfolio. Portfolio Optimizer tries to minimise the objective value. number 0.00665 yes {current|optimal_solution}->holdings The holdings in the portfolio to be optimized, or in the optimal portfolio. object {\"$USD\":10000, \"US0378331005\": 20, \"GB0005405286\": 5} yes {current|optimal_solution}->look_through The look through values of the portfolio before and after optimization. object yes {current|optimal_solution}->portfolio_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object yes {current|optimal_solution}->benchmark_constraint_violations Percentage measure to indicate deviation from policy of the current and optimal solution. object no portfolio_update->is_recommended Whether the portfolio update is recommended. True if there are reasons and applicable thresholds are passed, false otherwise. boolean TRUE yes portfolio_update->orders->shares he number of shares to buy (if positive) or sell (if negative). number 20 yes portfolio_update->orders->expected_share_price The share price at which the order is expected to be executed, expressed in the portfolio's base currency. number 100 yes portfolio_update->orders->expected_transaction_cost The expected transaction cost for this order, expressed in the portfolio's base currency. number 2 yes portfolio_update->reasons Reasons to update a portfolio object yes portfolio_update->reasons->portfolio_update_constraint_id The portfolio update constraint that is satisfied. string max_portfolio_constraint_violation_pctpoints yes portfolio_update->reasons->portfolio_update_constraint_value The value of the portfolio update constraint. number 0.9 yes portfolio_update->reasons->portfolio_constraint_id The id of the corresponding portfolio constraint. string holdings.cash yes creation_datetime The date and time the first version of the entity was created. date-time 2025-06-04T15:23:15.328252+00:0 yes","title":"Get optimizations"},{"location":"robo/run_optimizer/#portfolio-is-ok","text":"A PS...Given you have gotten this far you could now do a little test. You could update the portfolio again with the positions from the optimal_solution.portfolio object. To do this patch the portfolio again, just like you did above. The result should be that portfolio_update no longer holds recommended orders, or at least states that \"is_recommended\": false . This means the Portfolio is OK and does not need to be rebalanced.","title":"Portfolio is OK"},{"location":"scenarios/cash_movements-robo-withdrawal-old/","text":"This file can be deleted once the updated flows are battle tested. Broker integration by the Client (Event driven) \u00b6 Steps to take when the clients issues an instruction to withdraw funds, and you as the Client are in charge of the integration with the broker: The Customer (through the InvestSuite app) requests a withdrawal. InvestSuite asynchronously performs a portfolio optimisation, resulting in one or more orders to free up cash. The optimisations.status-update event is fired (see here ). If the Optimisation is recommended (included in the event body), The Client Middleware responds to by getting the full optimisation (see here ). You place the sell orders at the broker. You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. You create a SETTLED transaction, referring to the transaction ID created by the broker in the external_id attribute. See below : Create transaction. You update the portfolio's cash position. See below : Update cash position. You reset the divest amount to notify InvestSuite that the cash that became available in the portfolio is ready to be invested. See below : Reset divest amount. Customer Customer InvestSuite InvestSuite Bank with Client Middleware Bank with Client Middleware Broker/Custodian Broker/Custodian 1. Request withdrawal 2. Optimize Portfolio 3. optimisations.status-update event 4. GET /optimisation reply, containing is_recommended 5. Place orders loop [while there are still orders pending] Update Transaction status opt 6. Update Portfolio Transactions & Holdings (EXECUTED) 7. Execute cash transfer to Customer's counter account 6. Update Portfolio Transactions & Holdings (SETTLED) 6. Set divest_amount to 0 8. POST /events/withdraw 9. Notification","title":"Cash movements robo withdrawal old"},{"location":"scenarios/cash_movements-robo-withdrawal-old/#broker-integration-by-the-client-event-driven","text":"Steps to take when the clients issues an instruction to withdraw funds, and you as the Client are in charge of the integration with the broker: The Customer (through the InvestSuite app) requests a withdrawal. InvestSuite asynchronously performs a portfolio optimisation, resulting in one or more orders to free up cash. The optimisations.status-update event is fired (see here ). If the Optimisation is recommended (included in the event body), The Client Middleware responds to by getting the full optimisation (see here ). You place the sell orders at the broker. You transfer the freed up cash from the broker to the client's counter_account . See below : Get counter account. You notify InvestSuite that the payment has occurred. See below : Notify InvestSuite on successful cash transfer. InvestSuite puts the message on a queue to send a push notification to the client. You create a SETTLED transaction, referring to the transaction ID created by the broker in the external_id attribute. See below : Create transaction. You update the portfolio's cash position. See below : Update cash position. You reset the divest amount to notify InvestSuite that the cash that became available in the portfolio is ready to be invested. See below : Reset divest amount. Customer Customer InvestSuite InvestSuite Bank with Client Middleware Bank with Client Middleware Broker/Custodian Broker/Custodian 1. Request withdrawal 2. Optimize Portfolio 3. optimisations.status-update event 4. GET /optimisation reply, containing is_recommended 5. Place orders loop [while there are still orders pending] Update Transaction status opt 6. Update Portfolio Transactions & Holdings (EXECUTED) 7. Execute cash transfer to Customer's counter account 6. Update Portfolio Transactions & Holdings (SETTLED) 6. Set divest_amount to 0 8. POST /events/withdraw 9. Notification","title":"Broker integration by the Client (Event driven)"},{"location":"scenarios/cash_movements/","text":"There are two sorts of cash transactions: deposits (funding) and withdrawals. Depending on (1) the direction (fund, withdraw) (2) the setup with the broker (who is integrated: the Client or InvestSuite), and (3) the product (Robo Advisor or Self Investor) the Client Middleware performs several actions. These actions range from moving the money in the broker's account system, to making InvestSuite send a notification. Below we describe in detail which actions to take, and which ones InvestSuite takes depending on the scenario. For Robo Advisor , the Funding/Withdrawal process and the Rebalancing process are closely related: A funding triggers Optimizer, which will generate an Optimization, which will (during rebalancing) invest the cash ; A withdrawal triggers Optimizer, which will generate an Optimisation, which will (during rebalancing) divest instruments and free up cash . If you are looking to design/build a middleware that handles both, we recommend to have a look at our example middleware design . For Self Investor , the Funding/Withdrawal process is more straightforward, as the Customer is responsible for investing/freeing up cash. Funding \u00b6 Broker integration by InvestSuite \u00b6 Info Applies to Robo Advisor, Self Investor Info We assume there is an integration between the Broker/Custodian and the Core Banking System (eg. through end-of-day files), that handles the corresponding cash transfers. The Client Middleware notifies InvestSuite that the investor account at the Bank has been funded by calling POST /events/deposit/ (see here ). InvestSuite moves the cash at the broker from the bank's home account to the customer's subaccount. InvestSuite will manage keeping the Transactions, Portfolio Holdings and up to date (asynchronously). If this is the first funding, InvestSuite sets the funded_since field. In case of Robo Advisor, this will (asynchronously) trigger Optimizer. InvestSuite sends a notification to the Customer. Broker integration by the Client \u00b6 Info Applies to Robo Advisor The Client Middleware moves the cash at the broker from the bank's home account to the individual's subaccount. Optionally, the Client Middleware creates a PENDING Transaction in InvestSuite, referring to the transaction_id of the broker in the external_id field (see here ). Once the Transaction is settled at the broker, the Client Middleware updates the Transaction status to SETTLED (see here ). The Client Middleware updates the portfolio's cash position (see here ). In case of Robo Advisor, this will (asynchronously) trigger Optimizer. If the Portfolio was not yet marked as funded, the Client Middleware also sets funded_since field (see here ). The Client Middleware calls POST /events/deposit/ (see here ). InvestSuite sends a notification to the Customer. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System Customer funds his investor account Funding event 1. Move cash from bank's home account to customer's subaccount external_id opt 2. POST /portfolio/{id}/transactions/ with - type: CASH_DEPOSIT - status: PENDING - external_id response Store response for future use Transaction SETTLED 3. PATCH /portfolio/{id}/transactions/{id}/ with - status: SETTLED response Store response for future use 4. PATCH /portfolio Holdings 5. Trigger Optimizer (asynchronously) response opt [if response.funded_since == null] 6. PATCH /portfolio funded_since 7. POST /events/deposit 8. Notification Withdrawal \u00b6 Robo Advisor \u00b6 Broker integration by InvestSuite \u00b6 Info We assume there is an integration between the Broker/Custodian and the Core Banking System (eg. through end-of-day files), which is master of the counter_account and handles the corresponding cash transfers. The Customer (through the InvestSuite app) requests a withdrawal. This updates the divest_amount on the Portfolio, indicating the amount to divest. InvestSuite asynchronously runs Optimizer, resulting in an Optimization which, during the next rebalancing, will free up cash. In case of an advisory mandate the Customer confirms the Optimizaton. The confirmation is registered in the owner_choice field of the Optimization object. If there is sufficient cash in the Portfolio: InvestSuite moves the cash at the broker from the customer's subaccount to the bank's home account. InvestSuite will manage keeping the Transactions, Portfolio Holdings and the divest_amount up to date (asynchronously). The Core Banking System transfers the cash to the customer's counter_account . The Client Middleware notifies InvestSuite that the payment has occurred (see here ). InvestSuite sends a notification to the Customer. If not, the withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System 1. Request withdrawal 2. Trigger Optimizer (asynchronously) opt [if Advisory mandate and insufficient cash] 3. Confirm Optimization 4. Get available cash in Portfolio alt [Sufficient Cash (divest_amount <= cash>)] 5a. Move cash from customer's subaccount to bank's home account opt [This depends on how the Bank and the Broker are integrated] Respond to cash movements 5b. Execute cash transfer to the Customer's counter account Cash transfer EXECUTED 5c. POST /events/withdraw 5d. Notification [Insufficient Cash] 6. The withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Broker integration by the Client (Event driven) \u00b6 The Customer (through the InvestSuite app) requests a withdrawal. This updates the divest_amount on the Portfolio, indicating the amount to divest. InvestSuite asynchronously runs Optimizer, resulting in an Optimization which, during the next rebalancing, will free up cash. In case of an advisory mandate and insufficient cash, the Customer confirms the Optimization. The confirmation is registered in the owner_choice field of the Optimization object. The portfolio.withdrawal-request event is fired (see here ). If there is sufficient cash in the Portfolio (get this from the Core Banking System or from the Portfolio object): The Client Middleware instructs the Core Banking System to execute the cash transfer. The Client Middleware creates a Transaction, type CASH, status SETTLED, and a negative quantity (see here ). The Client Middleware sets the divest_amount to 0, indicating there is no more cash to divest (see here ). The Client Middleware updates the Portfolio Holdings with decreased cash (see here ). The Client Middleware informs InvestSuite that the withdrawal has executed by calling POST /events/withdraw/ (see here ). InvestSuite sends a notification to the Customer. If not, the withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System 1. Request withdrawal 2. Trigger Optimizer (asynchronously) opt [if Advisory mandate and insufficient cash] 3. Confirm Optimization 4. portfolio.withdrawal event (NOTE this actually happens in parallel with #2) Contains divest_amount 5. Get available cash in Portfolio alt [Sufficient Cash (divest_amount <= cash>)] 5a. Execute cash transfer 5b. Create cash transaction POST /portfolios/{id}/transaction with - Type CASH - Status SETTLED - Quantity <0 5c. Set the divest_amount to 0 PATCH /portfolios with - divest_amount 0 5d. Update Portfolio holdings PATCH /portfolios 5e. POST /events/withdraw 5f. Notification [Insufficient Cash] 6. The withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Broker integration by the Client (Batch process) \u00b6 The Customer (through the InvestSuite app) requests a withdrawal. This updates the divest_amount on the Portfolio, indicating the amount to divest. InvestSuite asynchronously runs Optimizer, resulting in an Optimization which, during the next rebalancing, will free up cash. In case of an advisory mandate and insufficient cash, the Customer confirms the Optimization. The confirmation is registered in the owner_choice field of the Optimization object. In a batch process, the Client Middleware gets all portfolios with pending withdrawals (see here ). If there is sufficient cash in the Portfolio (get this from the Core Banking System or from the Portfolio object): The Client Middleware instructs the Core Banking System to execute the cash transfer. The Client Middleware creates a Transaction, type CASH, status SETTLED, and a negative quantity (see here ). The Client Middleware sets the divest_amount to 0, indicating there is no more cash to divest (see here ). The Client Middleware updates the Portfolio Holdings with decreased cash (see here ). The Client Middleware informs InvestSuite that the withdrawal has executed by calling POST /events/withdraw/ (see here ). InvestSuite sends a notification to the Customer. If not, the withdrawal will be executed during the next batch job run. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System 1. Request withdrawal 2. Trigger Optimizer (asynchronously) opt [if Advisory mandate and insufficient cash] 3. Confirm sell loop [Batch process (eg. nightly)] 4. Get portfolios with pending withdrawals GET /portfolios?query=... 5. Get available cash in Portfolio alt [Sufficient Cash (divest_amount <= cash>)] 5a. Execute cash transfer 5b. Create cash transaction POST /portfolios/{id}/transaction with - Type CASH - Status SETTLED - Quantity <0 5c. Set the divest_amount to 0 PATCH /portfolios with - divest_amount 0 5d. Update Portfolio holdings PATCH /portfolios 5e. POST /events/withdraw 5f. Notification [Insufficient Cash] 6. The withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Self Investor \u00b6 Broker integration by InvestSuite \u00b6 Info We assume there is an integration between the Broker/Custodian and the Core Banking System (eg. through end-of-day files), which is master of the counter_account and handles the corresponding cash transfers. The Client issues a withdrawal in the app. InvestSuite moves the cash at the broker from the customer's subaccount to the bank's home account. InvestSuite will manage keeping the Transactions and Portfolio Holdings up to date (asynchronously). The Core Banking System transfers the cash to the customer's counter_account . The Client Middleware notifies InvestSuite that the payment has occurred (see here ). InvestSuite sends a notification to the Customer.","title":"Funding & withdrawal (process)"},{"location":"scenarios/cash_movements/#funding","text":"","title":"Funding"},{"location":"scenarios/cash_movements/#broker-integration-by-investsuite","text":"Info Applies to Robo Advisor, Self Investor Info We assume there is an integration between the Broker/Custodian and the Core Banking System (eg. through end-of-day files), that handles the corresponding cash transfers. The Client Middleware notifies InvestSuite that the investor account at the Bank has been funded by calling POST /events/deposit/ (see here ). InvestSuite moves the cash at the broker from the bank's home account to the customer's subaccount. InvestSuite will manage keeping the Transactions, Portfolio Holdings and up to date (asynchronously). If this is the first funding, InvestSuite sets the funded_since field. In case of Robo Advisor, this will (asynchronously) trigger Optimizer. InvestSuite sends a notification to the Customer.","title":"Broker integration by InvestSuite"},{"location":"scenarios/cash_movements/#broker-integration-by-the-client","text":"Info Applies to Robo Advisor The Client Middleware moves the cash at the broker from the bank's home account to the individual's subaccount. Optionally, the Client Middleware creates a PENDING Transaction in InvestSuite, referring to the transaction_id of the broker in the external_id field (see here ). Once the Transaction is settled at the broker, the Client Middleware updates the Transaction status to SETTLED (see here ). The Client Middleware updates the portfolio's cash position (see here ). In case of Robo Advisor, this will (asynchronously) trigger Optimizer. If the Portfolio was not yet marked as funded, the Client Middleware also sets funded_since field (see here ). The Client Middleware calls POST /events/deposit/ (see here ). InvestSuite sends a notification to the Customer. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System Customer funds his investor account Funding event 1. Move cash from bank's home account to customer's subaccount external_id opt 2. POST /portfolio/{id}/transactions/ with - type: CASH_DEPOSIT - status: PENDING - external_id response Store response for future use Transaction SETTLED 3. PATCH /portfolio/{id}/transactions/{id}/ with - status: SETTLED response Store response for future use 4. PATCH /portfolio Holdings 5. Trigger Optimizer (asynchronously) response opt [if response.funded_since == null] 6. PATCH /portfolio funded_since 7. POST /events/deposit 8. Notification","title":"Broker integration by the Client"},{"location":"scenarios/cash_movements/#withdrawal","text":"","title":"Withdrawal"},{"location":"scenarios/cash_movements/#robo-advisor","text":"","title":"Robo Advisor"},{"location":"scenarios/cash_movements/#broker-integration-by-investsuite_1","text":"Info We assume there is an integration between the Broker/Custodian and the Core Banking System (eg. through end-of-day files), which is master of the counter_account and handles the corresponding cash transfers. The Customer (through the InvestSuite app) requests a withdrawal. This updates the divest_amount on the Portfolio, indicating the amount to divest. InvestSuite asynchronously runs Optimizer, resulting in an Optimization which, during the next rebalancing, will free up cash. In case of an advisory mandate the Customer confirms the Optimizaton. The confirmation is registered in the owner_choice field of the Optimization object. If there is sufficient cash in the Portfolio: InvestSuite moves the cash at the broker from the customer's subaccount to the bank's home account. InvestSuite will manage keeping the Transactions, Portfolio Holdings and the divest_amount up to date (asynchronously). The Core Banking System transfers the cash to the customer's counter_account . The Client Middleware notifies InvestSuite that the payment has occurred (see here ). InvestSuite sends a notification to the Customer. If not, the withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System 1. Request withdrawal 2. Trigger Optimizer (asynchronously) opt [if Advisory mandate and insufficient cash] 3. Confirm Optimization 4. Get available cash in Portfolio alt [Sufficient Cash (divest_amount <= cash>)] 5a. Move cash from customer's subaccount to bank's home account opt [This depends on how the Bank and the Broker are integrated] Respond to cash movements 5b. Execute cash transfer to the Customer's counter account Cash transfer EXECUTED 5c. POST /events/withdraw 5d. Notification [Insufficient Cash] 6. The withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker.","title":"Broker integration by InvestSuite"},{"location":"scenarios/cash_movements/#broker-integration-by-the-client-event-driven","text":"The Customer (through the InvestSuite app) requests a withdrawal. This updates the divest_amount on the Portfolio, indicating the amount to divest. InvestSuite asynchronously runs Optimizer, resulting in an Optimization which, during the next rebalancing, will free up cash. In case of an advisory mandate and insufficient cash, the Customer confirms the Optimization. The confirmation is registered in the owner_choice field of the Optimization object. The portfolio.withdrawal-request event is fired (see here ). If there is sufficient cash in the Portfolio (get this from the Core Banking System or from the Portfolio object): The Client Middleware instructs the Core Banking System to execute the cash transfer. The Client Middleware creates a Transaction, type CASH, status SETTLED, and a negative quantity (see here ). The Client Middleware sets the divest_amount to 0, indicating there is no more cash to divest (see here ). The Client Middleware updates the Portfolio Holdings with decreased cash (see here ). The Client Middleware informs InvestSuite that the withdrawal has executed by calling POST /events/withdraw/ (see here ). InvestSuite sends a notification to the Customer. If not, the withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System 1. Request withdrawal 2. Trigger Optimizer (asynchronously) opt [if Advisory mandate and insufficient cash] 3. Confirm Optimization 4. portfolio.withdrawal event (NOTE this actually happens in parallel with #2) Contains divest_amount 5. Get available cash in Portfolio alt [Sufficient Cash (divest_amount <= cash>)] 5a. Execute cash transfer 5b. Create cash transaction POST /portfolios/{id}/transaction with - Type CASH - Status SETTLED - Quantity <0 5c. Set the divest_amount to 0 PATCH /portfolios with - divest_amount 0 5d. Update Portfolio holdings PATCH /portfolios 5e. POST /events/withdraw 5f. Notification [Insufficient Cash] 6. The withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker.","title":"Broker integration by the Client (Event driven)"},{"location":"scenarios/cash_movements/#broker-integration-by-the-client-batch-process","text":"The Customer (through the InvestSuite app) requests a withdrawal. This updates the divest_amount on the Portfolio, indicating the amount to divest. InvestSuite asynchronously runs Optimizer, resulting in an Optimization which, during the next rebalancing, will free up cash. In case of an advisory mandate and insufficient cash, the Customer confirms the Optimization. The confirmation is registered in the owner_choice field of the Optimization object. In a batch process, the Client Middleware gets all portfolios with pending withdrawals (see here ). If there is sufficient cash in the Portfolio (get this from the Core Banking System or from the Portfolio object): The Client Middleware instructs the Core Banking System to execute the cash transfer. The Client Middleware creates a Transaction, type CASH, status SETTLED, and a negative quantity (see here ). The Client Middleware sets the divest_amount to 0, indicating there is no more cash to divest (see here ). The Client Middleware updates the Portfolio Holdings with decreased cash (see here ). The Client Middleware informs InvestSuite that the withdrawal has executed by calling POST /events/withdraw/ (see here ). InvestSuite sends a notification to the Customer. If not, the withdrawal will be executed during the next batch job run. Customer Customer InvestSuite InvestSuite Client Middleware Client Middleware Broker/Custodian Broker/Custodian Core Banking System Core Banking System 1. Request withdrawal 2. Trigger Optimizer (asynchronously) opt [if Advisory mandate and insufficient cash] 3. Confirm sell loop [Batch process (eg. nightly)] 4. Get portfolios with pending withdrawals GET /portfolios?query=... 5. Get available cash in Portfolio alt [Sufficient Cash (divest_amount <= cash>)] 5a. Execute cash transfer 5b. Create cash transaction POST /portfolios/{id}/transaction with - Type CASH - Status SETTLED - Quantity <0 5c. Set the divest_amount to 0 PATCH /portfolios with - divest_amount 0 5d. Update Portfolio holdings PATCH /portfolios 5e. POST /events/withdraw 5f. Notification [Insufficient Cash] 6. The withdrawal will be handled at a later time, by the rebalancing process or the process that handles executed or settled transactions from the broker.","title":"Broker integration by the Client (Batch process)"},{"location":"scenarios/cash_movements/#self-investor","text":"","title":"Self Investor"},{"location":"scenarios/cash_movements/#broker-integration-by-investsuite_2","text":"Info We assume there is an integration between the Broker/Custodian and the Core Banking System (eg. through end-of-day files), which is master of the counter_account and handles the corresponding cash transfers. The Client issues a withdrawal in the app. InvestSuite moves the cash at the broker from the customer's subaccount to the bank's home account. InvestSuite will manage keeping the Transactions and Portfolio Holdings up to date (asynchronously). The Core Banking System transfers the cash to the customer's counter_account . The Client Middleware notifies InvestSuite that the payment has occurred (see here ). InvestSuite sends a notification to the Customer.","title":"Broker integration by InvestSuite"},{"location":"scenarios/onboarding/","text":"An onboarding process varies wildly from client to client, but typically involves the following steps in any order: Strong identify verification (eg. through a national ID provider) Capture additional information (Anti Money-Laundering (AML), tax information, ...) AML Checks & approval/denial of client Setting a withdrawal IBAN MiFID Checks (eg. ex-ante costs) Legal disclaimers Signing a contract Suitability test Creation of a User in InvestSuite Creation of a Portfolio in InvestSuite, with the User as owner Broadly speaking, the Onboarding process happens either outside the InvestSuite application (Scenario 1, also referred to as 'API Onboarding') or inside InvestSuite (Scenario 2, also referred to as 'In-App Onboarding'). The former is the preferred scenario as it requires less integration work, allows re-use of an existing onboarding solution and provides a smoother experience for your existing users. Considerations \u00b6 If multiple products are in scope (eg. Robo Advisor and Self Investor), will the customer sign one contract for all products or one contract per product? One contract Multiple contracts Implications - Check with legal/compliance whether one contract for multiple mandates is allowed - Middleware needs to handle product type (more complex) - User status is more complex (to incorporate different products) Will InvestSuite manage the Identity Provider (packaged within the InvestSuite platform) or will the Client (see the Supported 3rd Party list)? InvestSuite Managed IdP Client Managed IdP Implications - How to onboard existing users, if in scope? - Middleware needs to handle user creation Will the backoffice systems support the Robo Advisor 'paper money' portfolios? Yes No Implications - Take special care to not intermingle real and paper money through the integration layer - Discard the 'portfolio created' event for paper portfolios Scenario 1: API Onboarding \u00b6 The User onboards outside of InvestSuite: the 'Client Onboarding Solution' takes care of all requirements, and interacts with InvestSuite for two steps: Creating and updating the User Updating the Portfolio Sequence diagram: InvestSuite Frontend + API InvestSuite Frontend + API Client Onboarding Solution + Middleware Client Onboarding Solution + Middleware Identity Provider Identity Provider (ONB001) User clicks 'Sign Up' Is redirected to the Onboarding Solution (unauthenticated) (Webview or Redirect) Strong identitiy verification (eg. through a national ID provider) Capture additional information (AML, tax, ...) Setting a withdrawal IBAN MiFID Checks Create User in downstream systems (eg. CRM, Core Banking, ...) opt [If one contract for all products] Contracting flow: - Create the PDF contract file (for all products) - Create a signing package at Document Signing Solution - Redirect Document Signing Solution to sign the package - User signs the package with strong authentication - Retrieve the signed PDF (package) - Allow user to download the PDF (optional) - Store the PDF in the digital archive opt [If Client Managed Identity Provider] Create User (USR001) Create User POST /users/ - If one contract for all products, status = ACTIVE - If one contract per product, status = WAITING_FOR_SIGNATURE - If IdP is managed by InvestSuite, add ?create_idp_user=true opt [If InvestSuite Managed Identity Provider] Create User return (ivs_user_id) Store the ivs_user_id in the middleware for future use (ONB002) User continues in app (ONB003) User clicks 'Sign In' (OpenID Compliant Scheme) User activation within IdP return with JWT (OpenID Scheme to accessToken, refreshToken...) Complete app enrollment (Optional disclaimers, PIN, Face ID, Notifications...) opt [If one contract per product and contract is not signed] (ONB004) User is redirected to the Onboarding Solution (authenticated) (Webview or Redirect) Contracting flow (USR002) PATCH /users/{id} with status = ACTIVE (ONB002) User continues in app alt [Robo Advisor Only] Create Portfolio (PAPER_MONEY) (PTF001) Event: Portfolio Created Depending on your backoffice needs/capabilies, we recommend to skip the PAPER_MONEY portfolios Suitability Profiling User can use PAPER_MONEY portfolio as long as (s)he wants User activates portfolio - Delete PAPER_MONEY Portfolio - Create REAL_MONEY Portfolio [Self Investor Only] Create Portfolio (REAL_MONEY) (PTF001) Event: Portfolio Created The event does not contain detail about the portfolio created other than the ID To get the details, issue a GET /portfolios/{id} Backoffice Processes (CBS, CRM, ...) (PTF002) Update Portfolio Brokerage Account PATCH /portfolio/{id} Integrations: ONB001 (Outbound) An HTTP redirect (or webview) to a page which hosts the onboarding solution. This call is unauthenticated. ONB002 (Inbound) The Onboarding Solution redirects the user back to InvestSuite, either through a HTTP redirect or through a written message. ONB003 (Outbound) OpenID Connect Sign In flow. Returns a JWT token. ONB004 (Outbound) An HTTP redirect (or webview) to a page which hosts the contract signature component. USR001 (Inbound) Create the User. See here for the full signature. If only one contract is used, set the status to ACTIVE . Otherwise, set it to WAITING_FOR_SIGNATURE . If the IdP is managed by InvestSuite, also specify the create_idp_user query parameter. USR002 (Inbound) Update the User status. See here for the full signature. PTF001 (Outbound) An event signals the middleware that a new Portfolio has been created. See here for the full signature. PTF002 (Inbound) Update the Portfolio's brokerage account. See here for the full signature. Scenario 2: In-App Onboarding \u00b6 Talk to your sales representative.","title":"Onboarding (process)"},{"location":"scenarios/onboarding/#considerations","text":"If multiple products are in scope (eg. Robo Advisor and Self Investor), will the customer sign one contract for all products or one contract per product? One contract Multiple contracts Implications - Check with legal/compliance whether one contract for multiple mandates is allowed - Middleware needs to handle product type (more complex) - User status is more complex (to incorporate different products) Will InvestSuite manage the Identity Provider (packaged within the InvestSuite platform) or will the Client (see the Supported 3rd Party list)? InvestSuite Managed IdP Client Managed IdP Implications - How to onboard existing users, if in scope? - Middleware needs to handle user creation Will the backoffice systems support the Robo Advisor 'paper money' portfolios? Yes No Implications - Take special care to not intermingle real and paper money through the integration layer - Discard the 'portfolio created' event for paper portfolios","title":"Considerations"},{"location":"scenarios/onboarding/#scenario-1-api-onboarding","text":"The User onboards outside of InvestSuite: the 'Client Onboarding Solution' takes care of all requirements, and interacts with InvestSuite for two steps: Creating and updating the User Updating the Portfolio Sequence diagram: InvestSuite Frontend + API InvestSuite Frontend + API Client Onboarding Solution + Middleware Client Onboarding Solution + Middleware Identity Provider Identity Provider (ONB001) User clicks 'Sign Up' Is redirected to the Onboarding Solution (unauthenticated) (Webview or Redirect) Strong identitiy verification (eg. through a national ID provider) Capture additional information (AML, tax, ...) Setting a withdrawal IBAN MiFID Checks Create User in downstream systems (eg. CRM, Core Banking, ...) opt [If one contract for all products] Contracting flow: - Create the PDF contract file (for all products) - Create a signing package at Document Signing Solution - Redirect Document Signing Solution to sign the package - User signs the package with strong authentication - Retrieve the signed PDF (package) - Allow user to download the PDF (optional) - Store the PDF in the digital archive opt [If Client Managed Identity Provider] Create User (USR001) Create User POST /users/ - If one contract for all products, status = ACTIVE - If one contract per product, status = WAITING_FOR_SIGNATURE - If IdP is managed by InvestSuite, add ?create_idp_user=true opt [If InvestSuite Managed Identity Provider] Create User return (ivs_user_id) Store the ivs_user_id in the middleware for future use (ONB002) User continues in app (ONB003) User clicks 'Sign In' (OpenID Compliant Scheme) User activation within IdP return with JWT (OpenID Scheme to accessToken, refreshToken...) Complete app enrollment (Optional disclaimers, PIN, Face ID, Notifications...) opt [If one contract per product and contract is not signed] (ONB004) User is redirected to the Onboarding Solution (authenticated) (Webview or Redirect) Contracting flow (USR002) PATCH /users/{id} with status = ACTIVE (ONB002) User continues in app alt [Robo Advisor Only] Create Portfolio (PAPER_MONEY) (PTF001) Event: Portfolio Created Depending on your backoffice needs/capabilies, we recommend to skip the PAPER_MONEY portfolios Suitability Profiling User can use PAPER_MONEY portfolio as long as (s)he wants User activates portfolio - Delete PAPER_MONEY Portfolio - Create REAL_MONEY Portfolio [Self Investor Only] Create Portfolio (REAL_MONEY) (PTF001) Event: Portfolio Created The event does not contain detail about the portfolio created other than the ID To get the details, issue a GET /portfolios/{id} Backoffice Processes (CBS, CRM, ...) (PTF002) Update Portfolio Brokerage Account PATCH /portfolio/{id} Integrations: ONB001 (Outbound) An HTTP redirect (or webview) to a page which hosts the onboarding solution. This call is unauthenticated. ONB002 (Inbound) The Onboarding Solution redirects the user back to InvestSuite, either through a HTTP redirect or through a written message. ONB003 (Outbound) OpenID Connect Sign In flow. Returns a JWT token. ONB004 (Outbound) An HTTP redirect (or webview) to a page which hosts the contract signature component. USR001 (Inbound) Create the User. See here for the full signature. If only one contract is used, set the status to ACTIVE . Otherwise, set it to WAITING_FOR_SIGNATURE . If the IdP is managed by InvestSuite, also specify the create_idp_user query parameter. USR002 (Inbound) Update the User status. See here for the full signature. PTF001 (Outbound) An event signals the middleware that a new Portfolio has been created. See here for the full signature. PTF002 (Inbound) Update the Portfolio's brokerage account. See here for the full signature.","title":"Scenario 1: API Onboarding"},{"location":"scenarios/onboarding/#scenario-2-in-app-onboarding","text":"Talk to your sales representative.","title":"Scenario 2: In-App Onboarding"},{"location":"scenarios/suitability_profiler/","text":"Context \u00b6 The suitability profiler captures the information needed to create a suitable portfolio for someone. Part of this is creating a risk profile, other information can include preferences on sustainable investing or specific investment themes. Through one or more assessments in a suitability profile, this information can be gathered and translated into characteristics of a suitable portfolio. Risk profiler \u00b6 One application of the suitability profiler is assessing the willingness to take risk. InvestSuite has conducted research in close collaboration with several universities to create a risk profiler that evaluates in an engaging and human way someone's willingness and ability to take risk. InvestSuite risk profile questionnaires can be MiFID 2-compliant, have dynamic pathways and logic jumps, and have questions based on real numbers specific to the user. For each financial institution subscribed to the service, InvestSuite creates and stores one or more custom questionnaires, that the institution can use to assess their users' risk profile. Definitions \u00b6 Assessment - An assessment contains the questions to be asked, and the answers that the user provides. An assessment follows the questions of a questionnaire, and holds the progress of the user. As can be seen in the image below, after an assessment is completed, it generates an output based on a pre-defined formula. Profile - A profile holds the information necessary to create a suitable portfolio. It contains one or more assessments, each assessing a certain aspect of a suitability profile, and so-called property values. These hold additional settings that together with the assessments serve as input to the profiler. Profiler - A profiler is essentially a template for a portfolio-specific suitability profile. A profiler, as well as the questionnaires, properties and formula in the profiler, is designed and configured together with InvestSuite. Questionnaire - A questionnaire determines the structure of an assessment. This concerns the logic that is used to fill out parameters, the content of questions that will be asked, the (dynamic) pathway of questions, and a formula that converts the captured information into an output. Profile properties - Profile properties determine settings that influence the policy but are not captured in assessments. Each property in a profiler has a default value that it should be set to upon the creation of a portfolio-specific profile. Profile property values - Profile property values capture profile settings that determine the policy of a profile and are not part of an assessment. These property values are all set to a default initial value, that is determined by the profile properties in the corresponding profiler. Policy - A policy is an investment strategy. Policies can exist for customer segments or can exist for individual portfolios. The policy will instruct the InvestSuite Optimizer on how to construct a portfolio. A policy for instance holds the applicable instrument universe and the preferred asset allocation. For more information about policies, please have a look at our API specification . How it works \u00b6 To come to guidelines for a suitable portfolio, the user must go through one or more assessments in their suitability profile to capture the necessary information. Once you designed and configured a profiler together with InvestSuite, it is possible to generate a profile. For each portfolio, a profile can be created based on a profiler. This profiler acts as a template for a specific profile. It determines which assessments will be asked, which profile properties will be set, and how the gathered information is translated into policy guidelines. All assessments in the profile object should be completed by the user in order to determine a suitable policy. Outputs \u00b6 At the end of an assessment, the InvestSuite API returns an output. The client can use the outputs in the profile to determine the right investing strategy for the user. The formula on how to calculate the output is determined by the client in each questionnaire, which means that there are no customisation constraints. The same is true for the profiler formula that calculates the final result based on the assessment and property values outputs. Questions in an assessment do not all have to contribute to the eventual output. For example, in the case of a risk profile assessment, the birth date of the user is a required parameter in order to determine whether the user is old enough to open an investment account, but it does not influence the risk score. Assessment flow \u00b6 Because there can be logic jumps in the question order of an assessment (and the next question can depend on the previous answers), only the next question to be asked and previously answered questions are given in each assessment response. After an answer is submitted, Investsuite immediately stores it in the suitability profile. This way, a user can close the application at any time without losing their progress, and can resume the assessment later. Property values \u00b6 The profile property values are initialized to a default value upon creation of the profile. This means that when all assessments in the profile are completed, but the user did not yet check the settings of the property values, a policy can already be determined. Create profile \u00b6 When a user is created, it is possible to create a profile with the user ID. To create a profile for a user, a user ID and profiler ID are required. The user ID is the ID that is used by InvestSuite to uniquely identify the user. You can find the user ID by querying the User collection GET /users/?query=\u2026 , see the Search users section for more information. The profiler ID identifies the profiler that will be used as template for the profile. This profiler is specific to the customer and is designed and configured together with InvestSuite. This profiler ID will be given to the customer after configuration. Let's try it out and create a profile for a specific user_id and profiler_id . HTTP curl POST /suitability-profiler/profiles/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"profiler_id\" : \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"profiler_id\": \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\", \"user_id\": \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\", }' Field Description Data type Example Required profiler_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^X[0-9A-HJKMNP-TV-Z]{26}\\Z X01ARZ3NDEKTSV4RRFFQ69G5FAV yes user_id The user ID of the person that this profile is for. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body \"N01ARZ3NDEKTSV4RRFFQ69G5FAV\" The response contains the plain profile ID. This profile_id should be used in the url path of further requests. Conduct an assessment \u00b6 When a profile is created for a user, we can start conducting the assessments in order to complete the profile. Each assessment is linked to a questionnaire, that determines what the assessment looks like. This questionnaire's external_id in combination with the ID of the created profile uniquely determine an assessment. These questionnaire IDs will be given to the customer after configuration. Let us give an example of how to retrieve an assessment. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile that this assessment is for. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes questionnaire_external_id The external ID of the questionnaire that this assessment is based on. string ^.{1,64}$ DUMMY-External-ID yes Response body { \"description\" : { \"en-US\" : \"Balancing risk and reward\" }, \"sections\" : [ { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Investment Goals\" , }, \"question_count\" : 10 , }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, \"title\" : { \"en-US\" : \"Risk profiling\" } } Now that we have retrieved the assessment, the assessing can begin. Conducting an assessment is done by asking a question to the user, submitting the answer to InvestSuite, receiving the next question to ask from InvestSuite, asking that question to the user, and so on until the assessment is completed. An assessment will have a status COMPLETED and show a result when all questions are answered. When there are still questions to be answered, the assessment has a status IN_PROGRESS and contains a next question to ask. After receiving an answer from the user, the answer is submitted to InvestSuite in order to get the next question. InvestSuite saves the answer immediately and determines the next question. This way, InvestSuite keeps track of and saves the progress of the assessment, so the user can close the application any time and resume the assessment where they left off later. The assessment response will contain the questionnaire's description, title, sections and a status. When the status' type is IN_PROGRESS , it will also contain question , which represents the next question to be asked to the end-user. This is a dummy response of a call to GET /suitability-profiler/profiles/{profile_id}/assessments/{questionnaire_external_id} and the PUT /profiles/{profile_id}/questionnaires/{questionnaire_external_id}/assessment/questions/{question_id}/answer for submitting an answer. Note: id will always be unique, but for this example placeholders are used. Response body { \"sections\" : [ { \"answered_questions\" : [ { \"form\" : { \"input\" : { \"default_value\" : true , \"type\" : \"BOOLEAN\" }, \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01RRZ3NDDKTSK4RRFFQ69G5FAV\" , } ], \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"title\" : { \"en-us\" : \"Investment Goals\" , } }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"More information\" }, \"body\" : { \"en-US\" : \"Robo Advisor invests in Exchange Traded Funds (ETFs), which are made from underlying instruments like stocks or bonds, and follows an index.\" }, \"index\" : \"1\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, } Get a profile property value \u00b6 When a profile is created for a user, profile property values are initially set to a default value. The user can later on see these properties and change them if they like. For example, if the robo advisor offers the option to only invest in sharia compliant companies, a property value sharia_compliant can initially be set to false. If the user decides that they want to invest in only sharia compliant companies, this property can be set to true. Let's retrieve the property values together. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body { \"ShariaCompliant\" : { \"type\" : \"BOOLEAN\" , \"value\" : false } } Change a property value \u00b6 The user can adjust its profile property values to make their portfolio more suitable to them. For example, if a user only wants to invest in Sharia compliant instruments, and the tenant supports this option, the profile property value corresponding to this option can be adjusted. Let's look at the below example. HTTP curl PUT /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"type\" : \"BOOLEAN\" , \"value\" : true , } curl --location --request PUT 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"type\": \"BOOLEAN\", \"value\": true, }' Field Description Data type Example Required profile_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes property_key The key of a property in the profile that you want to change. string ShariaCompliant yes type The type of the property ID value string BOOLEAN yes value The value of the property ID Any true yes Note: The type and value are part of the post-data, while the profile_id and property_key are part of the URL When a successful response (status code: 200 OK) comes back, the property was successfully changed in the profile.","title":"Suitability profiler"},{"location":"scenarios/suitability_profiler/#context","text":"The suitability profiler captures the information needed to create a suitable portfolio for someone. Part of this is creating a risk profile, other information can include preferences on sustainable investing or specific investment themes. Through one or more assessments in a suitability profile, this information can be gathered and translated into characteristics of a suitable portfolio.","title":"Context"},{"location":"scenarios/suitability_profiler/#risk-profiler","text":"One application of the suitability profiler is assessing the willingness to take risk. InvestSuite has conducted research in close collaboration with several universities to create a risk profiler that evaluates in an engaging and human way someone's willingness and ability to take risk. InvestSuite risk profile questionnaires can be MiFID 2-compliant, have dynamic pathways and logic jumps, and have questions based on real numbers specific to the user. For each financial institution subscribed to the service, InvestSuite creates and stores one or more custom questionnaires, that the institution can use to assess their users' risk profile.","title":"Risk profiler"},{"location":"scenarios/suitability_profiler/#definitions","text":"Assessment - An assessment contains the questions to be asked, and the answers that the user provides. An assessment follows the questions of a questionnaire, and holds the progress of the user. As can be seen in the image below, after an assessment is completed, it generates an output based on a pre-defined formula. Profile - A profile holds the information necessary to create a suitable portfolio. It contains one or more assessments, each assessing a certain aspect of a suitability profile, and so-called property values. These hold additional settings that together with the assessments serve as input to the profiler. Profiler - A profiler is essentially a template for a portfolio-specific suitability profile. A profiler, as well as the questionnaires, properties and formula in the profiler, is designed and configured together with InvestSuite. Questionnaire - A questionnaire determines the structure of an assessment. This concerns the logic that is used to fill out parameters, the content of questions that will be asked, the (dynamic) pathway of questions, and a formula that converts the captured information into an output. Profile properties - Profile properties determine settings that influence the policy but are not captured in assessments. Each property in a profiler has a default value that it should be set to upon the creation of a portfolio-specific profile. Profile property values - Profile property values capture profile settings that determine the policy of a profile and are not part of an assessment. These property values are all set to a default initial value, that is determined by the profile properties in the corresponding profiler. Policy - A policy is an investment strategy. Policies can exist for customer segments or can exist for individual portfolios. The policy will instruct the InvestSuite Optimizer on how to construct a portfolio. A policy for instance holds the applicable instrument universe and the preferred asset allocation. For more information about policies, please have a look at our API specification .","title":"Definitions"},{"location":"scenarios/suitability_profiler/#how-it-works","text":"To come to guidelines for a suitable portfolio, the user must go through one or more assessments in their suitability profile to capture the necessary information. Once you designed and configured a profiler together with InvestSuite, it is possible to generate a profile. For each portfolio, a profile can be created based on a profiler. This profiler acts as a template for a specific profile. It determines which assessments will be asked, which profile properties will be set, and how the gathered information is translated into policy guidelines. All assessments in the profile object should be completed by the user in order to determine a suitable policy.","title":"How it works"},{"location":"scenarios/suitability_profiler/#outputs","text":"At the end of an assessment, the InvestSuite API returns an output. The client can use the outputs in the profile to determine the right investing strategy for the user. The formula on how to calculate the output is determined by the client in each questionnaire, which means that there are no customisation constraints. The same is true for the profiler formula that calculates the final result based on the assessment and property values outputs. Questions in an assessment do not all have to contribute to the eventual output. For example, in the case of a risk profile assessment, the birth date of the user is a required parameter in order to determine whether the user is old enough to open an investment account, but it does not influence the risk score.","title":"Outputs"},{"location":"scenarios/suitability_profiler/#assessment-flow","text":"Because there can be logic jumps in the question order of an assessment (and the next question can depend on the previous answers), only the next question to be asked and previously answered questions are given in each assessment response. After an answer is submitted, Investsuite immediately stores it in the suitability profile. This way, a user can close the application at any time without losing their progress, and can resume the assessment later.","title":"Assessment flow"},{"location":"scenarios/suitability_profiler/#property-values","text":"The profile property values are initialized to a default value upon creation of the profile. This means that when all assessments in the profile are completed, but the user did not yet check the settings of the property values, a policy can already be determined.","title":"Property values"},{"location":"scenarios/suitability_profiler/#create-profile","text":"When a user is created, it is possible to create a profile with the user ID. To create a profile for a user, a user ID and profiler ID are required. The user ID is the ID that is used by InvestSuite to uniquely identify the user. You can find the user ID by querying the User collection GET /users/?query=\u2026 , see the Search users section for more information. The profiler ID identifies the profiler that will be used as template for the profile. This profiler is specific to the customer and is designed and configured together with InvestSuite. This profiler ID will be given to the customer after configuration. Let's try it out and create a profile for a specific user_id and profiler_id . HTTP curl POST /suitability-profiler/profiles/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"profiler_id\" : \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\" , \"user_id\" : \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\" , } curl --location --request POST 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"profiler_id\": \"X01ARZ3NDEKTSV4RRFFQ69G5FAV\", \"user_id\": \"U01ARZ3NDEKTSV4RRFFQ69G5FAV\", }' Field Description Data type Example Required profiler_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^X[0-9A-HJKMNP-TV-Z]{26}\\Z X01ARZ3NDEKTSV4RRFFQ69G5FAV yes user_id The user ID of the person that this profile is for. string ^U[0-9A-HJKMNP-TV-Z]{26}\\Z U01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body \"N01ARZ3NDEKTSV4RRFFQ69G5FAV\" The response contains the plain profile ID. This profile_id should be used in the url path of further requests.","title":"Create profile"},{"location":"scenarios/suitability_profiler/#conduct-an-assessment","text":"When a profile is created for a user, we can start conducting the assessments in order to complete the profile. Each assessment is linked to a questionnaire, that determines what the assessment looks like. This questionnaire's external_id in combination with the ID of the created profile uniquely determine an assessment. These questionnaire IDs will be given to the customer after configuration. Let us give an example of how to retrieve an assessment. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/questionnaires/DUMMY-External-ID/assessment/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile that this assessment is for. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes questionnaire_external_id The external ID of the questionnaire that this assessment is based on. string ^.{1,64}$ DUMMY-External-ID yes Response body { \"description\" : { \"en-US\" : \"Balancing risk and reward\" }, \"sections\" : [ { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"body\" : null , \"external_id\" : null , \"image_uri\" : null , \"title\" : { \"en-us\" : \"Investment Goals\" , }, \"question_count\" : 10 , }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, \"title\" : { \"en-US\" : \"Risk profiling\" } } Now that we have retrieved the assessment, the assessing can begin. Conducting an assessment is done by asking a question to the user, submitting the answer to InvestSuite, receiving the next question to ask from InvestSuite, asking that question to the user, and so on until the assessment is completed. An assessment will have a status COMPLETED and show a result when all questions are answered. When there are still questions to be answered, the assessment has a status IN_PROGRESS and contains a next question to ask. After receiving an answer from the user, the answer is submitted to InvestSuite in order to get the next question. InvestSuite saves the answer immediately and determines the next question. This way, InvestSuite keeps track of and saves the progress of the assessment, so the user can close the application any time and resume the assessment where they left off later. The assessment response will contain the questionnaire's description, title, sections and a status. When the status' type is IN_PROGRESS , it will also contain question , which represents the next question to be asked to the end-user. This is a dummy response of a call to GET /suitability-profiler/profiles/{profile_id}/assessments/{questionnaire_external_id} and the PUT /profiles/{profile_id}/questionnaires/{questionnaire_external_id}/assessment/questions/{question_id}/answer for submitting an answer. Note: id will always be unique, but for this example placeholders are used. Response body { \"sections\" : [ { \"answered_questions\" : [ { \"form\" : { \"input\" : { \"default_value\" : true , \"type\" : \"BOOLEAN\" }, \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"Welcome\" }, \"body\" : { \"en-US\" : \"In the next minutes, we'll help you create your own, personalized investment portfolio. But first we want to explain how this works.\" }, \"index\" : \"0\" , \"id\" : \"E01RRZ3NDDKTSK4RRFFQ69G5FAV\" , } ], \"title\" : { \"en-us\" : \"Introduction\" , }, \"question_count\" : 3 , }, { \"answered_questions\" : [], \"title\" : { \"en-us\" : \"Investment Goals\" , } }, ], \"status\" : { \"section_index\" : 0 , \"question\" : { \"form\" : { \"control_type\" : \"YES_NO\" , \"type\" : \"CONTROL\" , }, \"title\" : { \"en-US\" : \"More information\" }, \"body\" : { \"en-US\" : \"Robo Advisor invests in Exchange Traded Funds (ETFs), which are made from underlying instruments like stocks or bonds, and follows an index.\" }, \"index\" : \"1\" , \"id\" : \"E01ARZ3NDEKTSV4RRFFQ69G5FAV\" , }, \"type\" : \"IN_PROGRESS\" , }, }","title":"Conduct an assessment"},{"location":"scenarios/suitability_profiler/#get-a-profile-property-value","text":"When a profile is created for a user, profile property values are initially set to a default value. The user can later on see these properties and change them if they like. For example, if the robo advisor offers the option to only invest in sharia compliant companies, a property value sharia_compliant can initially be set to false. If the user decides that they want to invest in only sharia compliant companies, this property can be set to true. Let's retrieve the property values together. HTTP curl GET /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} curl --location --request GET 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ Field Description Data type Example Required profile_id A unique identifier of the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes Response body { \"ShariaCompliant\" : { \"type\" : \"BOOLEAN\" , \"value\" : false } }","title":"Get a profile property value"},{"location":"scenarios/suitability_profiler/#change-a-property-value","text":"The user can adjust its profile property values to make their portfolio more suitable to them. For example, if a user only wants to invest in Sharia compliant instruments, and the tenant supports this option, the profile property value corresponding to this option can be adjusted. Let's look at the below example. HTTP curl PUT /suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/ HTTP / 1.1 Host : api.sandbox.investsuite.com Content-Type : application/json Authorization : Bearer {string} { \"type\" : \"BOOLEAN\" , \"value\" : true , } curl --location --request PUT 'https://api.sandbox.investsuite.com/suitability-profiler/profiles/N01ARZ3NDEKTSV4RRFFQ69G5FAV/properties/ShariaCompliant/' \\ --header \"Content-Type: application/json\" \\ --header \"Auhorization\" : \"Bearer {string}\" \\ --data-raw '{ \"type\": \"BOOLEAN\", \"value\": true, }' Field Description Data type Example Required profile_id A unique identifier for the profiler to be used as template for the profile. This field is required for knowing which assessments to add to the profile. string ^N[0-9A-HJKMNP-TV-Z]{26}\\Z N01ARZ3NDEKTSV4RRFFQ69G5FAV yes property_key The key of a property in the profile that you want to change. string ShariaCompliant yes type The type of the property ID value string BOOLEAN yes value The value of the property ID Any true yes Note: The type and value are part of the post-data, while the profile_id and property_key are part of the URL When a successful response (status code: 200 OK) comes back, the property was successfully changed in the profile.","title":"Change a property value"},{"location":"self/introduction/","text":"Under construction","title":"Introduction"},{"location":"value-added-apis/authentication_usage/","text":"Authentication \u00b6 To authenticate you need a tenant-user identifier and a secret key. Authenticate in the request header with your tenant-user identifier in the X-TENANT-ID header field and your secret key in the X-Api-Key header field. Reach out to your InvestSuite representative or send a mail to api@investsuite.com and we will set you up in no time. Example requests with authentication headers: Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET / HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Warning Requests should not be directly sent from your app or website, as your authentication data may be exposed in transit. All requests are required to be made via an HTTPS connection; requests made over plain HTTP will fail. API Docsite Usage \u00b6 Auto-generated documentation showing REST OpenAPI data models and response descriptions at the redoc path: https://api.data.uat.investsuite.com/redoc You can navigate the data models and schemata by clicking the drop-down buttons for the relevant field. Webinterface Usage \u00b6 An interactive Swagger UI interface is available for testing at the /docs path: https://api.data.uat.investsuite.com/docs \u26a0\ufe0f /docs Interactive Swagger UI caching issues : Browsers will sometimes cache request-responses returning stale/previous responses. This is due to our caching header parameters. Please clear your browser cache ( Ctrl + Shift + Delete in most browser) to resolve these issues.","title":"Authentication & Usage"},{"location":"value-added-apis/authentication_usage/#authentication","text":"To authenticate you need a tenant-user identifier and a secret key. Authenticate in the request header with your tenant-user identifier in the X-TENANT-ID header field and your secret key in the X-Api-Key header field. Reach out to your InvestSuite representative or send a mail to api@investsuite.com and we will set you up in no time. Example requests with authentication headers: Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET / HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Warning Requests should not be directly sent from your app or website, as your authentication data may be exposed in transit. All requests are required to be made via an HTTPS connection; requests made over plain HTTP will fail.","title":"Authentication"},{"location":"value-added-apis/authentication_usage/#api-docsite-usage","text":"Auto-generated documentation showing REST OpenAPI data models and response descriptions at the redoc path: https://api.data.uat.investsuite.com/redoc You can navigate the data models and schemata by clicking the drop-down buttons for the relevant field.","title":"API Docsite Usage"},{"location":"value-added-apis/authentication_usage/#webinterface-usage","text":"An interactive Swagger UI interface is available for testing at the /docs path: https://api.data.uat.investsuite.com/docs \u26a0\ufe0f /docs Interactive Swagger UI caching issues : Browsers will sometimes cache request-responses returning stale/previous responses. This is due to our caching header parameters. Please clear your browser cache ( Ctrl + Shift + Delete in most browser) to resolve these issues.","title":"Webinterface Usage"},{"location":"value-added-apis/custom_data/","text":"Service Description \u00b6 InvestSuite offers a range of products, all using financial data. Each product has access a few to market data providers. Sometimes the necessary data is not available with these providers, or a client may want to upload their own data to guarantee exactly the same numbers in the InvestSuite products as they report themselves. In that case, the client will upload the custom data to InvestSuite via the API endpoints as described on this page. This then takes precedence on the data from the provider. The Financial Data API accepts custom data via several endpoints, each accepting a specific type of data: Custom Reference Model Docs Custom Timeseries Model Docs Custom Composition Model Docs Custom Composition Timeseries Model Docs Custom Attribution Model Docs The client will most likely use a combination of these endpoints. Below, we elaborate further on how to use these endpoints in practice. Custom Reference \u00b6 POST \u00b6 Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments. The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"reference_data\": { \"country\": \"US\", \"name\": \"APPLE\", \"roundlot_size\": 1 } }, { \"instrument_id\": \"US2546871060\", \"reference_data\": { \"country\": \"US\", \"name\": \"WALT DISNEY\", \"roundlot_size\": 1 } } ] }' POST /data/custom/reference/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"APPLE\" , \"roundlot_size\" : 1 } }, { \"instrument_id\" : \"US2546871060\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"WALT DISNEY\" , \"roundlot_size\" : 1 } } ] } Field Description Data type Example Required data A list that holds a reference data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. string \"US2546871060\" yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . object yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten. QUERY \u00b6 You can query the uploaded reference data using the query endpoint. A filter can be provided, or the entire cache can be returned when sending an empty payload. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"fields\": [\"NAME\", \"ASSET_CLASS\"], }' POST /data/custom/reference/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"fields\" : [ \"NAME\" , \"ASSET_CLASS\" ], } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no fields List of instrument identifiers for which to request data fields. list [\"NAME\", \"ASSET_CLASS\"] no The response of such a request is: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"name\" : \"The Walt Disney Co\" , \"asset_class\" : \"EQUITY\" }, ... }, \"meta\" : null } REMOVE \u00b6 Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"fields\": [\"NAME\"], }' POST /data/custom/reference/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"fields\" : [ \"NAME\" ], } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments to be removed. list [\"US2546871060\"] no fields List of instrument identifiers to be removed. list [\"NAME\"] no Only the fields provided for the instruments provided will be removed (it is an AND relation). Either list can be empty, but not both. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes CLEAR \u00b6 All custom reference data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/reference/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET CSV POST \u00b6 Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments as Comma Separated Values (.CSV) file . The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. Example CSV File instrument_id,country,name,roundlot_size US0378331005,US,APPLE,1 Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/csv/\" \\ -H \"accept: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -H \"Content-Type: multipart/form-data\" \\ -F \"file=@reference-data.csv;type=text/csv\" POST /data/custom/reference/csv/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : multipart/form-data; filename=\"reference-data.csv\" X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required file A CSV file that holds reference data with the first line containing header column instrument_id , subsequent columns are the field names of reference data. list cf. example above yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. csv column cf. example above yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . csv column cf. example above yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 1 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten. Custom Timeseries \u00b6 POST \u00b6 Timeseries data consist of instrument-level data for which data changes frequently (usually daily) and for which historical values are relevant. Examples of timeseries data are NAV, adjusted price, yield, and interest rate. Using this endpoint, a client can upload timeseries data for specific instruments, and for a specific type. The endpoint accepts a batch of instruments at once, for the a particular type of timeseries data. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"values\": { \"2022-03-07\": 158834, \"2022-03-08\": 156979.4, \"2022-03-09\": 162473.3 }, \"currency\": USD }, { \"instrument_id\": \"US2546871060\", \"values\": { \"2022-03-07\": 9615.215, \"2022-03-08\": 9489.172, \"2022-03-09\": 9626.016 }, \"currency\": USD } ], \"timeseries_type\": \"ADJUSTED_PRICE\" }' POST /data/custom/timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"values\" : { \"2022-03-07\" : 158834 , \"2022-03-08\" : 156979.4 , \"2022-03-09\" : 162473.3 }, \"currency\" : USD }, { \"instrument_id\" : \"US2546871060\" , \"values\" : { \"2022-03-07\" : 9615.215 , \"2022-03-08\" : 9489.172 , \"2022-03-09\" : 9626.016 }, \"currency\" : USD } ], \"timeseries_type\" : \"ADJUSTED_PRICE\" } Field Description Data type Example Required data A list that holds a timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes values An object holding the timeseries data for the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] {\"2022-03-07\": 9615.215, \"1656337622\": 9489.172} yes \"currency\" The currency of the values being uploaded str \"USD\" yes timeseries_type The type of timeseries data that is provided. Available types can be seen in the API documentation of this endpoint After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_date_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments for which the client has provided custom timeseries data. integer 2 yes cache_date_count The number of different dates for which the client has provided timeseries data, over all instruments. integer 3 yes To overwrite a certain type of timeseries data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again. Also note that trying to upload a timeseries with a different currency than the one alrady present in the cache will throw an error. QUERY \u00b6 You can query the uploaded timeseries data using the query endpoint. A filter can be provided, or the entire cache for a given timeseries type can be returned. Furthermore, the currencies for each instrument for which the timeseries data has been uploaded previously can be returned as part of the payload as well. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"timeseries_type\": \"ADJUSTED_PRICE\", \"instrument_ids\": [\"US2546871060\"], \"start_date\": \"2022-03-07\", \"end_date\": \"2022-03-09\", \"include_currency_meta\": True }' POST /data/custom/timeseries/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"timeseries_type\" : \"ADJUSTED_PRICE\" , \"instrument_ids\" : [ \"US2546871060\" ], \"start_date\" : \"2022-03-07\" , \"end_date\" : \"2022-03-09\" , \"include_currency_meta\" : True } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no timeseries_type The type of timeseries data. str \"ADJUSTED_PRICE\" yes start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no include_currency_meta Whether to include the currencies of the uploaded time series. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"US2546871060\" : { \"2022-03-07\" : 9615.215 , \"2022-03-08\" : 9489.172 , \"2022-03-09\" : 9626.016 }, ... }, \"meta\" : { \"currency_map\" : { \"US2546871060\" : \"USD\" , ... } } } Meta QUERY \u00b6 You can query the meta data for the custom uploaded timeseries data. Currently this only contains the currency of the values uploaded. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/meta/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"timeseries_type\": \"ADJUSTED_PRICE\", \"instrument_ids\": [\"US2546871060\"], }' POST /data/custom/timeseries/meta/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"timeseries_type\" : \"ADJUSTED_PRICE\" , \"instrument_ids\" : [ \"US2546871060\" ], } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no timeseries_type The type of timeseries data. str \"ADJUSTED_PRICE\" yes The response of such a request is: Response (Body Content JSON) { \"data\" : {}, \"meta\" : { \"currency_map\" : { \"US2546871060\" : \"USD\" , ... } } } REMOVE \u00b6 Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"timeseries_type\": \"ADJUSTED_PRICE\", \"start_date\": \"2022-07-07\", \"end_date\": \"2022-07-08\" }' POST /data/custom/timeseries/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"timeseries_type\" : \"ADJUSTED_PRICE\" , \"start_date\" : \"2022-07-07\" , \"end_date\" : \"2022-07-08\" } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no timeseries_type The type of timeseries data. str \"ADJUSTED_PRICE\" yes start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the instruments provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes CLEAR \u00b6 All custom timeseries data for a timeseries type can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" -d '{ \"timeseries_type\": \"ADJUSTED_PRICE\" }' POST /data/custom/timeseries/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"timeseries_type\" : \"ADJUSTED_PRICE\" } Custom Composition \u00b6 POST \u00b6 Composition data of an instrument provides a look-through of the underlying instruments according to certain composition types. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments. If you require composition data over different points in time (timeseries) use Custom Composition Timeseries Data . When uploading custom composition data, certain sanity checks are performed by default. These are COMPOSITION_TENANT_LEVELS: a check of the uploaded composition levels (e.g., \"equity\" & \"fixed_income\" for the ASSET_CLASS composition) against those defined in the tenant classification config. If levels are present in the upload which are not defined in the tenant config, an error is thrown COMPOSITION_SUMS_TO_ONE: a check whether the composition weights sum to one (with a small tolerance). If the sum falls outside of 1 +- the tolerance, an error is thrown. These checks can be bypassed by specifying them in the upload body; however unless necessary for specific reasons we do not recommend to do so. Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument-level (i.e., the entire composition for a given type and instrument gets overwritten). Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [{ \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"asset_class\": { \"equity\": 1 }, \"currency\": { \"gbp\": 1 }, \"equity_region\": { \"emerging\": 0.1, \"europe_developed\": 0.2, \"north_america\": 0.7 } } }, { \"instrument_id\": \"IE00BWT41R00\", \"composition_data\": { \"equity_sector\": { \"real_estate\": 0.3, \"technology\": 0.3, \"utilities\": 0.2 }, \"fixed_income_type\": { \"government\": 1 } } } ], }' POST /data/custom/composition/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [{ \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"asset_class\" : { \"equity\" : 1 }, \"currency\" : { \"gbp\" : 1 }, \"equity_region\" : { \"emerging\" : 0.1 , \"europe_developed\" : 0.2 , \"north_america\" : 0.7 } } }, { \"instrument_id\" : \"IE00BWT41R00\" , \"composition_data\" : { \"equity_sector\" : { \"real_estate\" : 0.3 , \"technology\" : 0.3 , \"utilities\" : 0.2 }, \"fixed_income_type\" : { \"government\" : 1 } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. Values for composition should be float. object yes skip_data_checks A list of data checks to be ignored. list no After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 5 , \"cache_composition_type_count\" : 8 }, \"meta\" : null } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 5 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 8 yes To overwrite a certain type of composition data for one or more instruments, simply provide the data for these instruments and types on the dates to overwrite again. QUERY \u00b6 You can query the uploaded composition data using the query endpoint. A filter can be provided, or the entire cache can be returned by providing an empty payload. Furthermore, the defined composition levels can be returned as part of the meta object in the response body. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"IE00B4L5Y983\"], \"types\": [\"asset_class\"], \"include_levels\": True }' POST /data/custom/composition/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"IE00B4L5Y983\" ], \"types\" : [ \"asset_class\" ], \"include_levels\" : True } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no types A list of the composition types. list [\"ASSET_CLASS\"] no include_levels Whether to include the defined levels. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"IE00B4L5Y983\" : { \"ASSET_CLASS\" : { \"equity\" : 1 } }, ... }, \"meta\" : { \"composition_levels\" : { \"ASSET_CLASS\" : [ \"equity\" , \"fixed_income\" ], ... } } } Meta QUERY \u00b6 You can query the meta data for the custom uploaded composition data. Currently this only contains the composition levels as defined in the tenant config. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/meta/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"types\": [\"ASSET_CLASS\"] }' POST /data/custom/composition/meta/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"types\" : [ \"ASSET_CLASS\" ] } Field Description Data type Example Required types | A list of the composition types. | list` [\"ASSET_CLASS\"] no The response of such a request is: Response (Body Content JSON) { \"data\" : {}, \"meta\" : { \"composition_levels\" : { \"ASSET_CLASS\" : [ \"equity\" , \"fixed_income\" ], ... } } } REMOVE \u00b6 Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"types\": [\"ASSET_CLASS\"] }' POST /data/custom/composition/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"types\" : [ \"ASSET_CLASS\" ] } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no types A list of the composition types. list [\"ASSET_CLASS\"] no Only the date ranges provided for the instruments provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 5 , \"cache_composition_type_count\" : 8 }, \"meta\" : null } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes CLEAR \u00b6 All custom composition data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/composition/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Custom Composition Timeseries \u00b6 POST \u00b6 Composition timeseries data of an instrument provides a look-through of the underlying instruments according to certain composition types at certain dates. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument/date level (i.e., the entire composition for a given type and instrument on a give day gets overwritten). Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"ASSET_CLASS\": { \"2022-01-31\": { \"equity\": 0.5, \"money_market\": 0.5 }, \"2022-02-28\": { \"equity\": 0.6, \"money_market\": 0.4 } }, \"EQUITY_REGION\": { \"2022-01-31\": { \"europe\": 0.3, \"north_america\": 0.6, \"emerging_markets\": 0.1 }, \"2022-02-28\": { \"europe\": 0.35, \"north_america\": 0.65 } } } } ] }' POST /data/custom/composition-timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"ASSET_CLASS\" : { \"2022-01-31\" : { \"equity\" : 0.5 , \"money_market\" : 0.5 }, \"2022-02-28\" : { \"equity\" : 0.6 , \"money_market\" : 0.4 } }, \"EQUITY_REGION\" : { \"2022-01-31\" : { \"europe\" : 0.3 , \"north_america\" : 0.6 , \"emerging_markets\" : 0.1 }, \"2022-02-28\" : { \"europe\" : 0.35 , \"north_america\" : 0.65 } } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding timeseries composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. A datestamp should be a string with format YYYY-MM-DD or string Unix timestamp. object[CompositionType, TimestampedCompositionObject] yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_composition_type_count\" : 2 , \"cache_date_count\" : 6 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 1 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 2 yes cache_date_count The number of different dates that the client has provided timeseries data for, over all instruments. integer 6 yes To overwrite a certain type of composition data for one or more instruments on specific dates, simply provide the data for these instruments and types on the dates to overwrite again. QUERY \u00b6 You can query the uploaded composition timeseries data using the query endpoint. A filter can be provided, or the entire cache can be returned by providing an empty payload. Furthermore, the defined composition levels can be returned as part of the meta object in the response body. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"IE00B4L5Y983\"], \"composition_types\": [\"asset_class\"], \"include_levels\": True, \"start_date\": \"2022-01-02\", \"end_date\": \"2022-02-28\" }' POST /data/custom/composition-timeseries/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"IE00B4L5Y983\" ], \"composition_types\" : [ \"asset_class\" ], \"include_levels\" : True , \"start_date\" : \"2022-01-02\" , \"end_date\" : \"2022-02-28\" } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no composition_types A list of the composition types. list [\"ASSET_CLASS\"] no start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no include_levels Whether to include the defined levels. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"IE00B4L5Y983\" : { \"2022-01-31\" : { \"ASSET_CLASS\" : { \"equity\" : 0.5 , \"money_market\" : 0.5 } }, \"2022-02-28\" : { \"ASSET_CLASS\" : { \"equity\" : 0.6 , \"money_market\" : 0.4 } } } ... }, \"meta\" : { \"composition_levels\" : { \"ASSET_CLASS\" : [ \"equity\" , \"fixed_income\" , \"money_market\" ], ... } } } REMOVE \u00b6 Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"composition_types\": [\"ASSET_CLASS\"], \"start_date\": \"2022-01-02\", \"end_date\": \"2022-01-31\" }' POST /data/custom/composition-timeseries/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"types\" : [ \"ASSET_CLASS\" ], \"start_date\" : \"2022-01-02\" , \"end_date\" : \"2022-01-31\" } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no types A list of the composition types. list [\"ASSET_CLASS\"] no start_date The start date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the instruments and composition types provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_composition_type_count\" : 2 , \"cache_date_count\" : 6 }, \"meta\" : null } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 1 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 2 yes cache_date_count The number of different dates that the client has provided timeseries data for, over all instruments. integer 6 yes CLEAR \u00b6 All custom composition timeseries data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/composition-timeseries/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Custom Attribution \u00b6 POST \u00b6 Attribution data of an instrument provides an overview of how much the underlying instruments attributed to the overall return of the instrument. For example how much each instrument in a fund has attributed to the fund's profit. Using this endpoint, a client can upload attribution data, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the day/fund-level (i.e., the entire day/fund gets overwritten with the uploaded data). Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{\"data\": [ { \"fund_id\": \"US78462F1030\", \"attribution_data\": { \"2022-03-08\": { \"US0378331005\": -0.005838, \"US88160R1014\": 0.012317 }, \"2022-03-09\": { \"US0378331005\": 0.017499, \"US88160R1014\": 0.020967 }, \"2022-03-10\": { \"US0378331005\": -0.013593, \"US88160R1014\": -0.012032 } } } ] }' POST /data/custom/attribution/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"fund_id\" : \"US78462F1030\" , \"attribution_data\" : { \"2022-03-08\" : { \"US0378331005\" : -0.005838 , \"US88160R1014\" : 0.012317 }, \"2022-03-09\" : { \"US0378331005\" : 0.017499 , \"US88160R1014\" : 0.020967 }, \"2022-03-10\" : { \"US0378331005\" : -0.013593 , \"US88160R1014\" : -0.012032 } } } ] } Field Description Data type Example Required data A list that holds an attribution timeseries data object for each provided instrument. list yes fund_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US78462F1030\" yes attribution_data An object holding timeseries attribution data of the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] \"2022-03-09\": {\"US0378331005\": 0.017499} yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_fund_count\" : 1 , \"cache_date_count\" : 3 , } } Field Description Data type Example Required data Holds information about the current database. object yes cache_fund_count The number of fund instruments that the client has provided custom attribution data for. integer 2 yes cache_date_count The number of dates that the client has provided attribution data for. integer 3 yes To overwrite a certain type of attribution data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again. QUERY \u00b6 You can query the uploaded composition timeseries data using the query endpoint. A filter can be provided, or the entire cache can be returned by providing an empty payload. Furthermore, the defined composition levels can be returned as part of the meta object in the response body. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"fund_ids\": [\"US78462F1030\"], \"start_date\": \"\"2022-03-08\", \"end_date\": \"\"2022-03-08\" }' POST /data/custom/attribution/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"fund_ids\" : [ \"US78462F1030\" ], \"start_date\" : \"\" 2022-03-08 \", \" e n d_da te \": \"\"2022-03-08\" } Field Description Data type Example Required fund_ids A list of the IDs of the funds. list [\"US78462F1030\"] no start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"US78462F1030\" : { \"2022-03-08\" : { \"US0378331005\" : -0.005838 , \"US88160R1014\" : 0.012317 , ... }, ... } ... }, \"meta\" : null } REMOVE \u00b6 Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"fund_ids\": [\"US78462F1030\"], \"start_date\": \"2022-03-08\", \"end_date\": \"2022-03-08\" }' POST /data/custom/attribution/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"fund_ids\" : [ \"US78462F1030\" ], \"start_date\" : \"2022-03-08\" , \"end_date\" : \"2022-03-08\" } Field Description Data type Example Required fund_ids A list of the IDs of the funds. list [\"US78462F1030\"] no start_date The start date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the funds provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_fund_count\" : 1 , \"cache_date_count\" : 3 , } } Field Description Data type Example Required data Holds information about the current database. object yes cache_fund_count The number of fund instruments that the client has provided custom attribution data for. integer 2 yes cache_date_count The number of dates that the client has provided attribution data for. integer 3 yes CLEAR \u00b6 All custom attribution data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/attribution/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Custom Exchange Rates POST \u00b6 Exchange rates data consist of historical exchange rates versus a provided base currency, which are used to convert other timeseries such as prices from their currency onto a single currency. Using this endpoint, a client can upload timeseries data for all exchange rates against a provided base currency. The endpoint accepts a batch of currencies at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the currency/value-level. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"currency\": \"EUR\", \"values\": { \"2020-01-01\": 1.21, \"2020-01-02\": 1.22, \"2020-01-03\": 1.21, \"2020-01-04\": 1.20, \"2020-01-05\": 1.23, }, }, { \"currency\": \"JPY\", \"values\": { \"2020-01-01\": 102.3, \"2020-01-02\": 102.2, \"2020-01-03\": 103.1, \"2020-01-04\": 104.5, \"2020-01-05\": 102.9, }, }, ], \"base_currency\": \"USD\", },' POST /data/custom/exchange-rates/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"currency\" : \"EUR\" , \"values\" : { \"2020-01-01\" : 1.21 , \"2020-01-02\" : 1.22 , \"2020-01-03\" : 1.21 , \"2020-01-04\" : 1.20 , \"2020-01-05\" : 1.23 , }, }, { \"currency\" : \"JPY\" , \"values\" : { \"2020-01-01\" : 102.3 , \"2020-01-02\" : 102.2 , \"2020-01-03\" : 103.1 , \"2020-01-04\" : 104.5 , \"2020-01-05\" : 102.9 , }, }, ], \"base_currency\" : \"USD\" , } Field Description Data type Example Required data A list that holds a currency data object for each provided currency. list yes base_currency The ISO of the base currency. This is the currency against which all exchange rates will be denoted. Once a base currency is chosen, it can not be changed in subsequent uploads, i.e., it is assumed that the base currency is fixed for a tenant. string \"USD\" yes currency The ISO of the currency. string \"EUR\" yes values An object holding the exchange rate data for the currency against the base currency. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] {\"2022-03-07\": 102, \"1656337622\": 102} yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_date_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of currencies for which the client has provided custom exchane rate data. integer 2 yes cache_date_count The number of different dates for which the client has provided exchange rate data, over all currencies. integer 3 yes To overwrite data for one or more currencies on specific dates, simply provide the data for these currencies on the dates to overwrite again. Also note that trying to upload data with a different base currency than the one alrady present in the cache will throw an error. Custom Exchange Rate QUERY \u00b6 You can query the uploaded exchange rate data using the query endpoint. A filter can be provided, or the entire cache can be returned. Furthermore, the base currency for which the exchange rate data has been uploaded previously can be returned as part of the payload as well. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"currencies\": [\"EUR\", \"JPY\"], \"start_date\": \"2020-01-01\", \"end_date\": \"2020-01-05\", \"include_base_currency_meta\": True }' POST /data/custom/exchange-rates/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"currencies\" : [ \"EUR\" , \"JPY\" ], \"start_date\" : \"2020-01-01\" , \"end_date\" : \"2020-01-05\" , \"include_base_currency_meta\" : True } Field Description Data type Example Required currencies A list of the IDs of the currencies. list [\"EUR\"] no start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no include_base_currency_meta Whether to include the base currency of the uploaded exchange rates. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"EUR\" : { \"2022-03-07\" : 1.21 , \"2022-03-08\" : 1.22 , \"2022-03-09\" : 1.21 }, ... }, \"meta\" : { \"base_currency\" : \"USD\" } } Custom Exchange Rate Meta QUERY \u00b6 You can query the meta data for the custom uploaded exchange rates data. Currently this only contains the base currency of the values uploaded. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/meta/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{}' POST /data/custom/exchange-rates/meta/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { } The response of such a request is: Response (Body Content JSON) { \"data\" : {}, \"meta\" : { \"base_currency\" : \"USD\" } } Custom Exchange Rates REMOVE \u00b6 Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"start_date\": \"2020-01-03\", \"end_date\": \"2020-01-05\", \"currencies\": [\"EUR\"] }' POST /data/custom/exchange-rates/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"start_date\" : \"2020-01-03\" , \"end_date\" : \"2020-01-05\" , \"currencies\" : [ \"EUR\" ] } Field Description Data type Example Required currencies A list of the IDs of the instruments. list [\"EUR\"] no start_date The start date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the currencies provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of currencies that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes Custom Exchange Rates CLEAR \u00b6 All custom exchange rates data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" -d '{ }' POST /data/custom/exchange-rates/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { }","title":"Custom Data API"},{"location":"value-added-apis/custom_data/#service-description","text":"InvestSuite offers a range of products, all using financial data. Each product has access a few to market data providers. Sometimes the necessary data is not available with these providers, or a client may want to upload their own data to guarantee exactly the same numbers in the InvestSuite products as they report themselves. In that case, the client will upload the custom data to InvestSuite via the API endpoints as described on this page. This then takes precedence on the data from the provider. The Financial Data API accepts custom data via several endpoints, each accepting a specific type of data: Custom Reference Model Docs Custom Timeseries Model Docs Custom Composition Model Docs Custom Composition Timeseries Model Docs Custom Attribution Model Docs The client will most likely use a combination of these endpoints. Below, we elaborate further on how to use these endpoints in practice.","title":"Service Description"},{"location":"value-added-apis/custom_data/#custom-reference","text":"","title":"Custom Reference"},{"location":"value-added-apis/custom_data/#post","text":"Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments. The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"reference_data\": { \"country\": \"US\", \"name\": \"APPLE\", \"roundlot_size\": 1 } }, { \"instrument_id\": \"US2546871060\", \"reference_data\": { \"country\": \"US\", \"name\": \"WALT DISNEY\", \"roundlot_size\": 1 } } ] }' POST /data/custom/reference/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"APPLE\" , \"roundlot_size\" : 1 } }, { \"instrument_id\" : \"US2546871060\" , \"reference_data\" : { \"country\" : \"US\" , \"name\" : \"WALT DISNEY\" , \"roundlot_size\" : 1 } } ] } Field Description Data type Example Required data A list that holds a reference data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. string \"US2546871060\" yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . object yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten.","title":"POST"},{"location":"value-added-apis/custom_data/#query","text":"You can query the uploaded reference data using the query endpoint. A filter can be provided, or the entire cache can be returned when sending an empty payload. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"fields\": [\"NAME\", \"ASSET_CLASS\"], }' POST /data/custom/reference/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"fields\" : [ \"NAME\" , \"ASSET_CLASS\" ], } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no fields List of instrument identifiers for which to request data fields. list [\"NAME\", \"ASSET_CLASS\"] no The response of such a request is: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"name\" : \"The Walt Disney Co\" , \"asset_class\" : \"EQUITY\" }, ... }, \"meta\" : null }","title":"QUERY"},{"location":"value-added-apis/custom_data/#remove","text":"Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"fields\": [\"NAME\"], }' POST /data/custom/reference/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"fields\" : [ \"NAME\" ], } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments to be removed. list [\"US2546871060\"] no fields List of instrument identifiers to be removed. list [\"NAME\"] no Only the fields provided for the instruments provided will be removed (it is an AND relation). Either list can be empty, but not both. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes","title":"REMOVE"},{"location":"value-added-apis/custom_data/#clear","text":"All custom reference data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/reference/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET","title":"CLEAR"},{"location":"value-added-apis/custom_data/#csv-post","text":"Reference data consists of instrument-level data of which only the latest value is relevant. Examples of reference data are the ISIN code, asset class, ticker, name, and instrument type. Using this endpoint, a client can upload reference data for specific instruments as Comma Separated Values (.CSV) file . The endpoint accepts a batch of instruments at once, and has a range of predefined fields to upload data. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. Example CSV File instrument_id,country,name,roundlot_size US0378331005,US,APPLE,1 Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/reference/csv/\" \\ -H \"accept: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -H \"Content-Type: multipart/form-data\" \\ -F \"file=@reference-data.csv;type=text/csv\" POST /data/custom/reference/csv/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : multipart/form-data; filename=\"reference-data.csv\" X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required file A CSV file that holds reference data with the first line containing header column instrument_id , subsequent columns are the field names of reference data. list cf. example above yes instrument_id The ID of the instrument. This will be used by InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. There is not necessarily a relationship to the ISIN. csv column cf. example above yes reference_data An object holding the actual reference data of the instrument. Available data fields can be seen in the drop-down at API documentation of this endpoint . csv column cf. example above yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_field_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 1 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes To overwrite the data of an instrument, simply provide the reference data fields that need to be overwritten again for that instrument. Only the provided fields will be overwritten.","title":"CSV POST"},{"location":"value-added-apis/custom_data/#custom-timeseries","text":"","title":"Custom Timeseries"},{"location":"value-added-apis/custom_data/#post_1","text":"Timeseries data consist of instrument-level data for which data changes frequently (usually daily) and for which historical values are relevant. Examples of timeseries data are NAV, adjusted price, yield, and interest rate. Using this endpoint, a client can upload timeseries data for specific instruments, and for a specific type. The endpoint accepts a batch of instruments at once, for the a particular type of timeseries data. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the instrument/field-level. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"US0378331005\", \"values\": { \"2022-03-07\": 158834, \"2022-03-08\": 156979.4, \"2022-03-09\": 162473.3 }, \"currency\": USD }, { \"instrument_id\": \"US2546871060\", \"values\": { \"2022-03-07\": 9615.215, \"2022-03-08\": 9489.172, \"2022-03-09\": 9626.016 }, \"currency\": USD } ], \"timeseries_type\": \"ADJUSTED_PRICE\" }' POST /data/custom/timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"US0378331005\" , \"values\" : { \"2022-03-07\" : 158834 , \"2022-03-08\" : 156979.4 , \"2022-03-09\" : 162473.3 }, \"currency\" : USD }, { \"instrument_id\" : \"US2546871060\" , \"values\" : { \"2022-03-07\" : 9615.215 , \"2022-03-08\" : 9489.172 , \"2022-03-09\" : 9626.016 }, \"currency\" : USD } ], \"timeseries_type\" : \"ADJUSTED_PRICE\" } Field Description Data type Example Required data A list that holds a timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes values An object holding the timeseries data for the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] {\"2022-03-07\": 9615.215, \"1656337622\": 9489.172} yes \"currency\" The currency of the values being uploaded str \"USD\" yes timeseries_type The type of timeseries data that is provided. Available types can be seen in the API documentation of this endpoint After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_date_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments for which the client has provided custom timeseries data. integer 2 yes cache_date_count The number of different dates for which the client has provided timeseries data, over all instruments. integer 3 yes To overwrite a certain type of timeseries data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again. Also note that trying to upload a timeseries with a different currency than the one alrady present in the cache will throw an error.","title":"POST"},{"location":"value-added-apis/custom_data/#query_1","text":"You can query the uploaded timeseries data using the query endpoint. A filter can be provided, or the entire cache for a given timeseries type can be returned. Furthermore, the currencies for each instrument for which the timeseries data has been uploaded previously can be returned as part of the payload as well. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"timeseries_type\": \"ADJUSTED_PRICE\", \"instrument_ids\": [\"US2546871060\"], \"start_date\": \"2022-03-07\", \"end_date\": \"2022-03-09\", \"include_currency_meta\": True }' POST /data/custom/timeseries/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"timeseries_type\" : \"ADJUSTED_PRICE\" , \"instrument_ids\" : [ \"US2546871060\" ], \"start_date\" : \"2022-03-07\" , \"end_date\" : \"2022-03-09\" , \"include_currency_meta\" : True } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no timeseries_type The type of timeseries data. str \"ADJUSTED_PRICE\" yes start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no include_currency_meta Whether to include the currencies of the uploaded time series. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"US2546871060\" : { \"2022-03-07\" : 9615.215 , \"2022-03-08\" : 9489.172 , \"2022-03-09\" : 9626.016 }, ... }, \"meta\" : { \"currency_map\" : { \"US2546871060\" : \"USD\" , ... } } }","title":"QUERY"},{"location":"value-added-apis/custom_data/#meta-query","text":"You can query the meta data for the custom uploaded timeseries data. Currently this only contains the currency of the values uploaded. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/meta/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"timeseries_type\": \"ADJUSTED_PRICE\", \"instrument_ids\": [\"US2546871060\"], }' POST /data/custom/timeseries/meta/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"timeseries_type\" : \"ADJUSTED_PRICE\" , \"instrument_ids\" : [ \"US2546871060\" ], } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no timeseries_type The type of timeseries data. str \"ADJUSTED_PRICE\" yes The response of such a request is: Response (Body Content JSON) { \"data\" : {}, \"meta\" : { \"currency_map\" : { \"US2546871060\" : \"USD\" , ... } } }","title":"Meta QUERY"},{"location":"value-added-apis/custom_data/#remove_1","text":"Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"timeseries_type\": \"ADJUSTED_PRICE\", \"start_date\": \"2022-07-07\", \"end_date\": \"2022-07-08\" }' POST /data/custom/timeseries/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"timeseries_type\" : \"ADJUSTED_PRICE\" , \"start_date\" : \"2022-07-07\" , \"end_date\" : \"2022-07-08\" } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no timeseries_type The type of timeseries data. str \"ADJUSTED_PRICE\" yes start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the instruments provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes","title":"REMOVE"},{"location":"value-added-apis/custom_data/#clear_1","text":"All custom timeseries data for a timeseries type can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/timeseries/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" -d '{ \"timeseries_type\": \"ADJUSTED_PRICE\" }' POST /data/custom/timeseries/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"timeseries_type\" : \"ADJUSTED_PRICE\" }","title":"CLEAR"},{"location":"value-added-apis/custom_data/#custom-composition","text":"","title":"Custom Composition"},{"location":"value-added-apis/custom_data/#post_2","text":"Composition data of an instrument provides a look-through of the underlying instruments according to certain composition types. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments. If you require composition data over different points in time (timeseries) use Custom Composition Timeseries Data . When uploading custom composition data, certain sanity checks are performed by default. These are COMPOSITION_TENANT_LEVELS: a check of the uploaded composition levels (e.g., \"equity\" & \"fixed_income\" for the ASSET_CLASS composition) against those defined in the tenant classification config. If levels are present in the upload which are not defined in the tenant config, an error is thrown COMPOSITION_SUMS_TO_ONE: a check whether the composition weights sum to one (with a small tolerance). If the sum falls outside of 1 +- the tolerance, an error is thrown. These checks can be bypassed by specifying them in the upload body; however unless necessary for specific reasons we do not recommend to do so. Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument-level (i.e., the entire composition for a given type and instrument gets overwritten). Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [{ \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"asset_class\": { \"equity\": 1 }, \"currency\": { \"gbp\": 1 }, \"equity_region\": { \"emerging\": 0.1, \"europe_developed\": 0.2, \"north_america\": 0.7 } } }, { \"instrument_id\": \"IE00BWT41R00\", \"composition_data\": { \"equity_sector\": { \"real_estate\": 0.3, \"technology\": 0.3, \"utilities\": 0.2 }, \"fixed_income_type\": { \"government\": 1 } } } ], }' POST /data/custom/composition/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [{ \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"asset_class\" : { \"equity\" : 1 }, \"currency\" : { \"gbp\" : 1 }, \"equity_region\" : { \"emerging\" : 0.1 , \"europe_developed\" : 0.2 , \"north_america\" : 0.7 } } }, { \"instrument_id\" : \"IE00BWT41R00\" , \"composition_data\" : { \"equity_sector\" : { \"real_estate\" : 0.3 , \"technology\" : 0.3 , \"utilities\" : 0.2 }, \"fixed_income_type\" : { \"government\" : 1 } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. Values for composition should be float. object yes skip_data_checks A list of data checks to be ignored. list no After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 5 , \"cache_composition_type_count\" : 8 }, \"meta\" : null } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 5 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 8 yes To overwrite a certain type of composition data for one or more instruments, simply provide the data for these instruments and types on the dates to overwrite again.","title":"POST"},{"location":"value-added-apis/custom_data/#query_2","text":"You can query the uploaded composition data using the query endpoint. A filter can be provided, or the entire cache can be returned by providing an empty payload. Furthermore, the defined composition levels can be returned as part of the meta object in the response body. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"IE00B4L5Y983\"], \"types\": [\"asset_class\"], \"include_levels\": True }' POST /data/custom/composition/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"IE00B4L5Y983\" ], \"types\" : [ \"asset_class\" ], \"include_levels\" : True } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no types A list of the composition types. list [\"ASSET_CLASS\"] no include_levels Whether to include the defined levels. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"IE00B4L5Y983\" : { \"ASSET_CLASS\" : { \"equity\" : 1 } }, ... }, \"meta\" : { \"composition_levels\" : { \"ASSET_CLASS\" : [ \"equity\" , \"fixed_income\" ], ... } } }","title":"QUERY"},{"location":"value-added-apis/custom_data/#meta-query_1","text":"You can query the meta data for the custom uploaded composition data. Currently this only contains the composition levels as defined in the tenant config. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/meta/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"types\": [\"ASSET_CLASS\"] }' POST /data/custom/composition/meta/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"types\" : [ \"ASSET_CLASS\" ] } Field Description Data type Example Required types | A list of the composition types. | list` [\"ASSET_CLASS\"] no The response of such a request is: Response (Body Content JSON) { \"data\" : {}, \"meta\" : { \"composition_levels\" : { \"ASSET_CLASS\" : [ \"equity\" , \"fixed_income\" ], ... } } }","title":"Meta QUERY"},{"location":"value-added-apis/custom_data/#remove_2","text":"Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"types\": [\"ASSET_CLASS\"] }' POST /data/custom/composition/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"types\" : [ \"ASSET_CLASS\" ] } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no types A list of the composition types. list [\"ASSET_CLASS\"] no Only the date ranges provided for the instruments provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 5 , \"cache_composition_type_count\" : 8 }, \"meta\" : null } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes","title":"REMOVE"},{"location":"value-added-apis/custom_data/#clear_2","text":"All custom composition data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/composition/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET","title":"CLEAR"},{"location":"value-added-apis/custom_data/#custom-composition-timeseries","text":"","title":"Custom Composition Timeseries"},{"location":"value-added-apis/custom_data/#post_3","text":"Composition timeseries data of an instrument provides a look-through of the underlying instruments according to certain composition types at certain dates. Examples are the asset class or country composition of a fund on a certain date. Using this endpoint, a client can upload composition data on different composition types for specific instruments, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the composition type/instrument/date level (i.e., the entire composition for a given type and instrument on a give day gets overwritten). Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"instrument_id\": \"IE00B4L5Y983\", \"composition_data\": { \"ASSET_CLASS\": { \"2022-01-31\": { \"equity\": 0.5, \"money_market\": 0.5 }, \"2022-02-28\": { \"equity\": 0.6, \"money_market\": 0.4 } }, \"EQUITY_REGION\": { \"2022-01-31\": { \"europe\": 0.3, \"north_america\": 0.6, \"emerging_markets\": 0.1 }, \"2022-02-28\": { \"europe\": 0.35, \"north_america\": 0.65 } } } } ] }' POST /data/custom/composition-timeseries/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"instrument_id\" : \"IE00B4L5Y983\" , \"composition_data\" : { \"ASSET_CLASS\" : { \"2022-01-31\" : { \"equity\" : 0.5 , \"money_market\" : 0.5 }, \"2022-02-28\" : { \"equity\" : 0.6 , \"money_market\" : 0.4 } }, \"EQUITY_REGION\" : { \"2022-01-31\" : { \"europe\" : 0.3 , \"north_america\" : 0.6 , \"emerging_markets\" : 0.1 }, \"2022-02-28\" : { \"europe\" : 0.35 , \"north_america\" : 0.65 } } } } ] } Field Description Data type Example Required data A list that holds a composition timeseries data object for each provided instrument. list yes instrument_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US2546871060\" yes composition_data An object holding timeseries composition data for the provided composition types. Possible composition types are ASSET_CLASS , CREDIT_RATING , EQUITY_SECTOR , EQUITY_REGION , EQUITY_COUNTRY , EQUITY_INDUSTRY , EQUITY_INDUSTRY_GROUP , FIXED_INCOME_TYPE , FIXED_INCOME_REGION , FIXED_INCOME_COUNTRY , REGION , INSTRUMENT , CURRENCY , and DURATION . The API does not impose restrictions on the subtypes, but some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. A datestamp should be a string with format YYYY-MM-DD or string Unix timestamp. object[CompositionType, TimestampedCompositionObject] yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_composition_type_count\" : 2 , \"cache_date_count\" : 6 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 1 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 2 yes cache_date_count The number of different dates that the client has provided timeseries data for, over all instruments. integer 6 yes To overwrite a certain type of composition data for one or more instruments on specific dates, simply provide the data for these instruments and types on the dates to overwrite again.","title":"POST"},{"location":"value-added-apis/custom_data/#query_3","text":"You can query the uploaded composition timeseries data using the query endpoint. A filter can be provided, or the entire cache can be returned by providing an empty payload. Furthermore, the defined composition levels can be returned as part of the meta object in the response body. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"IE00B4L5Y983\"], \"composition_types\": [\"asset_class\"], \"include_levels\": True, \"start_date\": \"2022-01-02\", \"end_date\": \"2022-02-28\" }' POST /data/custom/composition-timeseries/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"IE00B4L5Y983\" ], \"composition_types\" : [ \"asset_class\" ], \"include_levels\" : True , \"start_date\" : \"2022-01-02\" , \"end_date\" : \"2022-02-28\" } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no composition_types A list of the composition types. list [\"ASSET_CLASS\"] no start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no include_levels Whether to include the defined levels. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"IE00B4L5Y983\" : { \"2022-01-31\" : { \"ASSET_CLASS\" : { \"equity\" : 0.5 , \"money_market\" : 0.5 } }, \"2022-02-28\" : { \"ASSET_CLASS\" : { \"equity\" : 0.6 , \"money_market\" : 0.4 } } } ... }, \"meta\" : { \"composition_levels\" : { \"ASSET_CLASS\" : [ \"equity\" , \"fixed_income\" , \"money_market\" ], ... } } }","title":"QUERY"},{"location":"value-added-apis/custom_data/#remove_3","text":"Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [\"US2546871060\"], \"composition_types\": [\"ASSET_CLASS\"], \"start_date\": \"2022-01-02\", \"end_date\": \"2022-01-31\" }' POST /data/custom/composition-timeseries/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"US2546871060\" ], \"types\" : [ \"ASSET_CLASS\" ], \"start_date\" : \"2022-01-02\" , \"end_date\" : \"2022-01-31\" } Field Description Data type Example Required instrument_ids A list of the IDs of the instruments. list [\"US2546871060\"] no types A list of the composition types. list [\"ASSET_CLASS\"] no start_date The start date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the instruments and composition types provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 1 , \"cache_composition_type_count\" : 2 , \"cache_date_count\" : 6 }, \"meta\" : null } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of instruments that the client has provided custom composition data for. integer 1 yes cache_composition_type_count The number of composition types that the client has provided composition data for. integer 2 yes cache_date_count The number of different dates that the client has provided timeseries data for, over all instruments. integer 6 yes","title":"REMOVE"},{"location":"value-added-apis/custom_data/#clear_3","text":"All custom composition timeseries data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/composition-timeseries/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET","title":"CLEAR"},{"location":"value-added-apis/custom_data/#custom-attribution","text":"","title":"Custom Attribution"},{"location":"value-added-apis/custom_data/#post_4","text":"Attribution data of an instrument provides an overview of how much the underlying instruments attributed to the overall return of the instrument. For example how much each instrument in a fund has attributed to the fund's profit. Using this endpoint, a client can upload attribution data, for certain dates (timeseries). The endpoint accepts a batch of instruments at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the day/fund-level (i.e., the entire day/fund gets overwritten with the uploaded data). Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{\"data\": [ { \"fund_id\": \"US78462F1030\", \"attribution_data\": { \"2022-03-08\": { \"US0378331005\": -0.005838, \"US88160R1014\": 0.012317 }, \"2022-03-09\": { \"US0378331005\": 0.017499, \"US88160R1014\": 0.020967 }, \"2022-03-10\": { \"US0378331005\": -0.013593, \"US88160R1014\": -0.012032 } } } ] }' POST /data/custom/attribution/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"fund_id\" : \"US78462F1030\" , \"attribution_data\" : { \"2022-03-08\" : { \"US0378331005\" : -0.005838 , \"US88160R1014\" : 0.012317 }, \"2022-03-09\" : { \"US0378331005\" : 0.017499 , \"US88160R1014\" : 0.020967 }, \"2022-03-10\" : { \"US0378331005\" : -0.013593 , \"US88160R1014\" : -0.012032 } } } ] } Field Description Data type Example Required data A list that holds an attribution timeseries data object for each provided instrument. list yes fund_id The ID of the instrument. This will be used by all InvestSuite products to identify the instrument. While the API does not impose any restrictions on the format, some InvestSuite products do. Make sure to check these restrictions with the products that you will be using before uploading data. string \"US78462F1030\" yes attribution_data An object holding timeseries attribution data of the instrument. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] \"2022-03-09\": {\"US0378331005\": 0.017499} yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_fund_count\" : 1 , \"cache_date_count\" : 3 , } } Field Description Data type Example Required data Holds information about the current database. object yes cache_fund_count The number of fund instruments that the client has provided custom attribution data for. integer 2 yes cache_date_count The number of dates that the client has provided attribution data for. integer 3 yes To overwrite a certain type of attribution data for one or more instruments on specific dates, simply provide the data for these instruments on the dates to overwrite again.","title":"POST"},{"location":"value-added-apis/custom_data/#query_4","text":"You can query the uploaded composition timeseries data using the query endpoint. A filter can be provided, or the entire cache can be returned by providing an empty payload. Furthermore, the defined composition levels can be returned as part of the meta object in the response body. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/composition-timeseries/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"fund_ids\": [\"US78462F1030\"], \"start_date\": \"\"2022-03-08\", \"end_date\": \"\"2022-03-08\" }' POST /data/custom/attribution/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"fund_ids\" : [ \"US78462F1030\" ], \"start_date\" : \"\" 2022-03-08 \", \" e n d_da te \": \"\"2022-03-08\" } Field Description Data type Example Required fund_ids A list of the IDs of the funds. list [\"US78462F1030\"] no start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"US78462F1030\" : { \"2022-03-08\" : { \"US0378331005\" : -0.005838 , \"US88160R1014\" : 0.012317 , ... }, ... } ... }, \"meta\" : null }","title":"QUERY"},{"location":"value-added-apis/custom_data/#remove_4","text":"Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"fund_ids\": [\"US78462F1030\"], \"start_date\": \"2022-03-08\", \"end_date\": \"2022-03-08\" }' POST /data/custom/attribution/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"fund_ids\" : [ \"US78462F1030\" ], \"start_date\" : \"2022-03-08\" , \"end_date\" : \"2022-03-08\" } Field Description Data type Example Required fund_ids A list of the IDs of the funds. list [\"US78462F1030\"] no start_date The start date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the funds provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_fund_count\" : 1 , \"cache_date_count\" : 3 , } } Field Description Data type Example Required data Holds information about the current database. object yes cache_fund_count The number of fund instruments that the client has provided custom attribution data for. integer 2 yes cache_date_count The number of dates that the client has provided attribution data for. integer 3 yes","title":"REMOVE"},{"location":"value-added-apis/custom_data/#clear_4","text":"All custom attribution data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/attribution/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" POST /data/custom/attribution/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET","title":"CLEAR"},{"location":"value-added-apis/custom_data/#custom-exchange-rates-post","text":"Exchange rates data consist of historical exchange rates versus a provided base currency, which are used to convert other timeseries such as prices from their currency onto a single currency. Using this endpoint, a client can upload timeseries data for all exchange rates against a provided base currency. The endpoint accepts a batch of currencies at once. Let us look at an example. Overwriting existing data: Updating can be done by providing new data values at the currency/value-level. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/batch/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"data\": [ { \"currency\": \"EUR\", \"values\": { \"2020-01-01\": 1.21, \"2020-01-02\": 1.22, \"2020-01-03\": 1.21, \"2020-01-04\": 1.20, \"2020-01-05\": 1.23, }, }, { \"currency\": \"JPY\", \"values\": { \"2020-01-01\": 102.3, \"2020-01-02\": 102.2, \"2020-01-03\": 103.1, \"2020-01-04\": 104.5, \"2020-01-05\": 102.9, }, }, ], \"base_currency\": \"USD\", },' POST /data/custom/exchange-rates/batch/ HTTP / 1.1 Host : api.data.uat.investsuite.com Content-Type : application/json accept : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"data\" : [ { \"currency\" : \"EUR\" , \"values\" : { \"2020-01-01\" : 1.21 , \"2020-01-02\" : 1.22 , \"2020-01-03\" : 1.21 , \"2020-01-04\" : 1.20 , \"2020-01-05\" : 1.23 , }, }, { \"currency\" : \"JPY\" , \"values\" : { \"2020-01-01\" : 102.3 , \"2020-01-02\" : 102.2 , \"2020-01-03\" : 103.1 , \"2020-01-04\" : 104.5 , \"2020-01-05\" : 102.9 , }, }, ], \"base_currency\" : \"USD\" , } Field Description Data type Example Required data A list that holds a currency data object for each provided currency. list yes base_currency The ISO of the base currency. This is the currency against which all exchange rates will be denoted. Once a base currency is chosen, it can not be changed in subsequent uploads, i.e., it is assumed that the base currency is fixed for a tenant. string \"USD\" yes currency The ISO of the currency. string \"EUR\" yes values An object holding the exchange rate data for the currency against the base currency. The keyword is a datestamp string with format YYYY-MM-DD or string Unix timestamp. The value should be a float. object[str, float] {\"2022-03-07\": 102, \"1656337622\": 102} yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_date_count\" : 3 } } Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of currencies for which the client has provided custom exchane rate data. integer 2 yes cache_date_count The number of different dates for which the client has provided exchange rate data, over all currencies. integer 3 yes To overwrite data for one or more currencies on specific dates, simply provide the data for these currencies on the dates to overwrite again. Also note that trying to upload data with a different base currency than the one alrady present in the cache will throw an error.","title":"Custom Exchange Rates POST"},{"location":"value-added-apis/custom_data/#custom-exchange-rate-query","text":"You can query the uploaded exchange rate data using the query endpoint. A filter can be provided, or the entire cache can be returned. Furthermore, the base currency for which the exchange rate data has been uploaded previously can be returned as part of the payload as well. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"currencies\": [\"EUR\", \"JPY\"], \"start_date\": \"2020-01-01\", \"end_date\": \"2020-01-05\", \"include_base_currency_meta\": True }' POST /data/custom/exchange-rates/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"currencies\" : [ \"EUR\" , \"JPY\" ], \"start_date\" : \"2020-01-01\" , \"end_date\" : \"2020-01-05\" , \"include_base_currency_meta\" : True } Field Description Data type Example Required currencies A list of the IDs of the currencies. list [\"EUR\"] no start_date The start date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to query, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no include_base_currency_meta Whether to include the base currency of the uploaded exchange rates. bool True no The response of such a request is: Response (Body Content JSON) { \"data\" : { \"EUR\" : { \"2022-03-07\" : 1.21 , \"2022-03-08\" : 1.22 , \"2022-03-09\" : 1.21 }, ... }, \"meta\" : { \"base_currency\" : \"USD\" } }","title":"Custom Exchange Rate QUERY"},{"location":"value-added-apis/custom_data/#custom-exchange-rate-meta-query","text":"You can query the meta data for the custom uploaded exchange rates data. Currently this only contains the base currency of the values uploaded. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/meta/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{}' POST /data/custom/exchange-rates/meta/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { } The response of such a request is: Response (Body Content JSON) { \"data\" : {}, \"meta\" : { \"base_currency\" : \"USD\" } }","title":"Custom Exchange Rate Meta QUERY"},{"location":"value-added-apis/custom_data/#custom-exchange-rates-remove","text":"Filtered data can be removed using the remove endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/remove/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"start_date\": \"2020-01-03\", \"end_date\": \"2020-01-05\", \"currencies\": [\"EUR\"] }' POST /data/custom/exchange-rates/remove/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"start_date\" : \"2020-01-03\" , \"end_date\" : \"2020-01-05\" , \"currencies\" : [ \"EUR\" ] } Field Description Data type Example Required currencies A list of the IDs of the instruments. list [\"EUR\"] no start_date The start date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-07\" no end_date The end date of the date range to remove, provided as a string of the format YYYY-MM-DD . str \"2022-03-09\" no Only the date ranges provided for the currencies provided will be removed (it is an AND relation). At least one filter must be provided. After removing data, we get a response back: Response (Body Content JSON) { \"data\" : { \"cache_instrument_count\" : 2 , \"cache_field_count\" : 3 } } This gives information on how much data is left in the cache. Field Description Data type Example Required data Holds information about the current database. object yes cache_instrument_count The number of currencies that the client has provided custom reference data for. integer 2 yes cache_field_count The number of different fields that the client has provided reference data for, over all instruments. integer 3 yes","title":"Custom Exchange Rates REMOVE"},{"location":"value-added-apis/custom_data/#custom-exchange-rates-clear","text":"All custom exchange rates data can be removed in one go with the clear endpoint. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/custom/exchange-rates/clear/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" -d '{ }' POST /data/custom/exchange-rates/clear/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { }","title":"Custom Exchange Rates CLEAR"},{"location":"value-added-apis/idcard/","text":"Service Description \u00b6 Get a list of instrument ID Cards. ID cards can be retrieved based on either a list of identifiers (ISINS or RICs), or for an entire universe ID Card API Documentation ID Card API Swagger UI Interface Get ID cards based on a list of identifiers \u00b6 Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/id-card/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ --data-raw '{\"instrument_ids\": [\"A.Z\"]}' GET /id-card/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"A.Z\" ]} Field Description Data type Example Required instrument_ids The instruments to retrieve ID card data for. Can be either a list of ISINs or a list of RICs. List[str] [\"A.Z\"] yes Get ID cards for an entire universe \u00b6 Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/id-card/universe/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /id-card/universe/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required universe_name The universe name to retrieve ID card data for. If omitted, data for the entire tenant universe will be returned. str robo_universe No After the request, we get the following example response: Response (Body Content JSON) { \"data\" : { \"A.Z\" : { \"ANALYST_CONSENSUS_PRICE_TARGET\" : { \"currency\" : \"USD\" , \"price\" : 149.7857 }, \"ANALYST_RECOMMENDATIONS\" : { \"BUY\" : 6.0 , \"HOLD\" : 3.0 , \"OUTPERFORM\" : 7.0 }, \"ANALYST_RECOMMENDATION_COUNT\" : 16.0 , \"ANALYST_UPWARD_POTENTIAL\" : 25.648603305091843 , \"CURRENCY\" : \"USD\" , \"DEBT_EQUITY_LATEST\" : 56.71613 , \"DESCRIPTION\" : \"Agilent Technologies, Inc. is engaged in providing application-focused solutions that include instruments, software, services and consumables for the entire laboratory workflow. The Company operates in the life sciences, diagnostics and applied chemical markets. Its life sciences and applied markets business provides application-focused solutions that include instruments and software that enable customers to identify, quantify and analyze the physical and biological properties of substances and products. Its diagnostics and genomics business includes the genomics, nucleic acid contract manufacturing and research and development, pathology, companion diagnostics, reagent partnership and biomolecular analysis businesses. Its Agilent CrossLab business spans the entire lab with its range of services portfolio, which is designed to improve customer outcomes. Its product categories include liquid chromatography (LC) systems and components, atomic absorption (AA) instruments and others.\" , \"DIVIDEND_PAYOUT_RATIO_TTM\" : 19.31908 , \"DIV_YIELD_CURRENT\" : 0.70464 , \"DIV_YIELD_TTM\" : 0.66437 , \"DPS_PER_FY\" : null , \"EPS_GROWTH_LAST_5Y\" : 22.92492 , \"EPS_TTM\" : 4.14678 , \"EQUITY_INDUSTRY\" : \"Advanced Medical Equipment & Technology\" , \"EQUITY_SECTOR\" : \"Healthcare\" , \"FINANCIAL_HEALTH_STARS\" : 5.0 , \"GROWTH_STARS\" : 3.0 , \"ISIN\" : \"US00846U1016\" , \"MARKET_CAP\" : 35588077791.0 , \"MOMENTUM_STARS\" : 4.0 , \"NAME\" : \"Agilent Technologies Ord Shs\" , \"NET_PROFIT_MARGIN_TTM\" : 19.35039 , \"NUMBER_OF_EMPLOYEES\" : 17400.0 , \"PRICE_BOOK_LATEST\" : 6.95896 , \"PRICE_EARNINGS_EX_EXTRA_TTM\" : 28.74761 , \"PRICE_SALES_TTM\" : 5.45564 , \"PROFITABILITY_STARS\" : 5.0 , \"ROE_TTM\" : 25.43294 , \"SIZE_LABEL\" : \"LARGE\" , \"STABILITY_STARS\" : 5.0 , \"VALUE_GROWTH_LABEL\" : \"GROWTH\" , \"VALUE_STARS\" : 4.0 } ... } } Field Description Data type Example Required data Holds all ID Card data. It contains a dictionary with the requested instrument identifiers as keys, and as values dicts with the ID card data fields (see fields below) dict yes ANALYST_CONSENSUS_PRICE_TARGET Analyst consensus stock price target dict with currency and price fields {\"currency\": \"USD\", \"price\": 149.7857} yes ANALYST_RECOMMENDATIONS Number of analyst recommendations per recommendation dict with counts per recommendation {\"BUY\": 6.0, \"HOLD\": 3.0, \"OUTPERFORM\": 7.0} yes ANALYST_RECOMMENDATION_COUNT Total number of analyst recommendations float 16.0 yes ANALYST_UPWARD_POTENTIAL Return (in percent) if the current price would move to the analyst consensus price target float 25.648603305091843 yes CURRENCY Listing currency str \"USD\" yes DEBT_EQUITY_LATEST Debt to Equity ratio based on latest company filings float 56.71613 yes DESCRIPTION Company description str \"Agilent Technologies, Inc. is engaged in providing application-focused solutions that include instruments, software, services and consumables for the entire laboratory workflow. The Company operates in the life sciences, diagnostics and applied chemical markets. Its life sciences and applied markets business provides application-focused solutions that include instruments and software that enable customers to identify, quantify and analyze the physical and biological properties of substances and products. Its diagnostics and genomics business includes the genomics, nucleic acid contract manufacturing and research and development, pathology, companion diagnostics, reagent partnership and biomolecular analysis businesses. Its Agilent CrossLab business spans the entire lab with its range of services portfolio, which is designed to improve customer outcomes. Its product categories include liquid chromatography (LC) systems and components, atomic absorption (AA) instruments and others.\" yes DIVIDEND_PAYOUT_RATIO_TTM Percentage of earnings that have been paid out as dividend in the last 2 months float 19.31908 yes DIV_YIELD_CURRENT Current company dividend yield (based on latest dividend information) in % float 0.70464 yes DIV_YIELD_TTM Dividends paid out in the last 12 months divided by current price, converted to % float 0.66437 yes DPS_PER_FY Dividends per fiscal year dict with an amount and currency per fiscal year. null if no dividends were paid out null yes EPS_GROWTH_LAST_5Y Compounded annual EPS growth over the last 5 years (in %) float 22.92492 yes EPS_TTM Earnings per share over the last trailing 12 months float 4.14678 yes EQUITY_INDUSTRY Industry that the stock belongs to (corresponds to the 4th level in the TRBC hierarchy) str Advanced Medical Equipment & Technology yes EQUITY_SECTOR Sector that the stock belongs to (corresponds to the first level in the TRBC hierarchy) str Healthcare yes FINANCIAL_HEALTH_STARS Number of financial health stars according to the InvestSuite X-Ray calculations float 5.0 yes GROWTH_STARS Number of growth stars according to the InvestSuite X-Ray calculations float 5.0 yes ISIN Instrument ISIN code str US00846U1016 yes MARKET_CAP Company market capitalisation (in the units of CURRENCY) float 35588077791.0 yes MOMENTUM_STARS Number of momentum stars according to the InvestSuite X-Ray calculations float 4.0 yes NAME Instrument name str Agilent Technologies Ord Shs yes NET_PROFIT_MARGIN_TTM Net Profit Margin, calculated as the Income After Taxes for the trailing 12 months divided by Total Revenue for the same period (in %) float 19.35039 yes NUMBER_OF_EMPLOYEES Number of employees float 17400.0 yes PRICE_BOOK_LATEST Latest price to book ratio float 6.95896 yes PRICE_EARNINGS_EX_EXTRA_TTM Price to earnings ratio (based on trailing 12-month earnings), excluding extraordinary items float 28.74761 yes PRICE_SALES_TTM Price to sales ratio (based on trailing 12-month sales) float 5.45564 yes PROFITABILITY_STARS Number of profitability stars according to the InvestSuite X-Ray calculations float 5.0 yes ROE_TTM Return on Equity (ROE), based on trailing 12-month earnings float 25.43294 yes SIZE_LABEL Size Label (LARGE / MID / SMALL) based on InvestSuite's size category methodology str LARGE yes STABILITY_STARS Number of stability stars according to the InvestSuite X-Ray calculations float 5.0 yes VALUE_GROWTH_LABEL Value Growth Label (VALUE / GROWTH) based on InvestSuite's size category methodology str GROWTH yes VALUE_STARS Number of value stars according to the InvestSuite X-Ray calculations float 4.0 yes","title":"ID Card API"},{"location":"value-added-apis/idcard/#service-description","text":"Get a list of instrument ID Cards. ID cards can be retrieved based on either a list of identifiers (ISINS or RICs), or for an entire universe ID Card API Documentation ID Card API Swagger UI Interface","title":"Service Description"},{"location":"value-added-apis/idcard/#get-id-cards-based-on-a-list-of-identifiers","text":"Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/id-card/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ --data-raw '{\"instrument_ids\": [\"A.Z\"]}' GET /id-card/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET { \"instrument_ids\" : [ \"A.Z\" ]} Field Description Data type Example Required instrument_ids The instruments to retrieve ID card data for. Can be either a list of ISINs or a list of RICs. List[str] [\"A.Z\"] yes","title":"Get ID cards based on a list of identifiers"},{"location":"value-added-apis/idcard/#get-id-cards-for-an-entire-universe","text":"Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/id-card/universe/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /id-card/universe/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required universe_name The universe name to retrieve ID card data for. If omitted, data for the entire tenant universe will be returned. str robo_universe No After the request, we get the following example response: Response (Body Content JSON) { \"data\" : { \"A.Z\" : { \"ANALYST_CONSENSUS_PRICE_TARGET\" : { \"currency\" : \"USD\" , \"price\" : 149.7857 }, \"ANALYST_RECOMMENDATIONS\" : { \"BUY\" : 6.0 , \"HOLD\" : 3.0 , \"OUTPERFORM\" : 7.0 }, \"ANALYST_RECOMMENDATION_COUNT\" : 16.0 , \"ANALYST_UPWARD_POTENTIAL\" : 25.648603305091843 , \"CURRENCY\" : \"USD\" , \"DEBT_EQUITY_LATEST\" : 56.71613 , \"DESCRIPTION\" : \"Agilent Technologies, Inc. is engaged in providing application-focused solutions that include instruments, software, services and consumables for the entire laboratory workflow. The Company operates in the life sciences, diagnostics and applied chemical markets. Its life sciences and applied markets business provides application-focused solutions that include instruments and software that enable customers to identify, quantify and analyze the physical and biological properties of substances and products. Its diagnostics and genomics business includes the genomics, nucleic acid contract manufacturing and research and development, pathology, companion diagnostics, reagent partnership and biomolecular analysis businesses. Its Agilent CrossLab business spans the entire lab with its range of services portfolio, which is designed to improve customer outcomes. Its product categories include liquid chromatography (LC) systems and components, atomic absorption (AA) instruments and others.\" , \"DIVIDEND_PAYOUT_RATIO_TTM\" : 19.31908 , \"DIV_YIELD_CURRENT\" : 0.70464 , \"DIV_YIELD_TTM\" : 0.66437 , \"DPS_PER_FY\" : null , \"EPS_GROWTH_LAST_5Y\" : 22.92492 , \"EPS_TTM\" : 4.14678 , \"EQUITY_INDUSTRY\" : \"Advanced Medical Equipment & Technology\" , \"EQUITY_SECTOR\" : \"Healthcare\" , \"FINANCIAL_HEALTH_STARS\" : 5.0 , \"GROWTH_STARS\" : 3.0 , \"ISIN\" : \"US00846U1016\" , \"MARKET_CAP\" : 35588077791.0 , \"MOMENTUM_STARS\" : 4.0 , \"NAME\" : \"Agilent Technologies Ord Shs\" , \"NET_PROFIT_MARGIN_TTM\" : 19.35039 , \"NUMBER_OF_EMPLOYEES\" : 17400.0 , \"PRICE_BOOK_LATEST\" : 6.95896 , \"PRICE_EARNINGS_EX_EXTRA_TTM\" : 28.74761 , \"PRICE_SALES_TTM\" : 5.45564 , \"PROFITABILITY_STARS\" : 5.0 , \"ROE_TTM\" : 25.43294 , \"SIZE_LABEL\" : \"LARGE\" , \"STABILITY_STARS\" : 5.0 , \"VALUE_GROWTH_LABEL\" : \"GROWTH\" , \"VALUE_STARS\" : 4.0 } ... } } Field Description Data type Example Required data Holds all ID Card data. It contains a dictionary with the requested instrument identifiers as keys, and as values dicts with the ID card data fields (see fields below) dict yes ANALYST_CONSENSUS_PRICE_TARGET Analyst consensus stock price target dict with currency and price fields {\"currency\": \"USD\", \"price\": 149.7857} yes ANALYST_RECOMMENDATIONS Number of analyst recommendations per recommendation dict with counts per recommendation {\"BUY\": 6.0, \"HOLD\": 3.0, \"OUTPERFORM\": 7.0} yes ANALYST_RECOMMENDATION_COUNT Total number of analyst recommendations float 16.0 yes ANALYST_UPWARD_POTENTIAL Return (in percent) if the current price would move to the analyst consensus price target float 25.648603305091843 yes CURRENCY Listing currency str \"USD\" yes DEBT_EQUITY_LATEST Debt to Equity ratio based on latest company filings float 56.71613 yes DESCRIPTION Company description str \"Agilent Technologies, Inc. is engaged in providing application-focused solutions that include instruments, software, services and consumables for the entire laboratory workflow. The Company operates in the life sciences, diagnostics and applied chemical markets. Its life sciences and applied markets business provides application-focused solutions that include instruments and software that enable customers to identify, quantify and analyze the physical and biological properties of substances and products. Its diagnostics and genomics business includes the genomics, nucleic acid contract manufacturing and research and development, pathology, companion diagnostics, reagent partnership and biomolecular analysis businesses. Its Agilent CrossLab business spans the entire lab with its range of services portfolio, which is designed to improve customer outcomes. Its product categories include liquid chromatography (LC) systems and components, atomic absorption (AA) instruments and others.\" yes DIVIDEND_PAYOUT_RATIO_TTM Percentage of earnings that have been paid out as dividend in the last 2 months float 19.31908 yes DIV_YIELD_CURRENT Current company dividend yield (based on latest dividend information) in % float 0.70464 yes DIV_YIELD_TTM Dividends paid out in the last 12 months divided by current price, converted to % float 0.66437 yes DPS_PER_FY Dividends per fiscal year dict with an amount and currency per fiscal year. null if no dividends were paid out null yes EPS_GROWTH_LAST_5Y Compounded annual EPS growth over the last 5 years (in %) float 22.92492 yes EPS_TTM Earnings per share over the last trailing 12 months float 4.14678 yes EQUITY_INDUSTRY Industry that the stock belongs to (corresponds to the 4th level in the TRBC hierarchy) str Advanced Medical Equipment & Technology yes EQUITY_SECTOR Sector that the stock belongs to (corresponds to the first level in the TRBC hierarchy) str Healthcare yes FINANCIAL_HEALTH_STARS Number of financial health stars according to the InvestSuite X-Ray calculations float 5.0 yes GROWTH_STARS Number of growth stars according to the InvestSuite X-Ray calculations float 5.0 yes ISIN Instrument ISIN code str US00846U1016 yes MARKET_CAP Company market capitalisation (in the units of CURRENCY) float 35588077791.0 yes MOMENTUM_STARS Number of momentum stars according to the InvestSuite X-Ray calculations float 4.0 yes NAME Instrument name str Agilent Technologies Ord Shs yes NET_PROFIT_MARGIN_TTM Net Profit Margin, calculated as the Income After Taxes for the trailing 12 months divided by Total Revenue for the same period (in %) float 19.35039 yes NUMBER_OF_EMPLOYEES Number of employees float 17400.0 yes PRICE_BOOK_LATEST Latest price to book ratio float 6.95896 yes PRICE_EARNINGS_EX_EXTRA_TTM Price to earnings ratio (based on trailing 12-month earnings), excluding extraordinary items float 28.74761 yes PRICE_SALES_TTM Price to sales ratio (based on trailing 12-month sales) float 5.45564 yes PROFITABILITY_STARS Number of profitability stars according to the InvestSuite X-Ray calculations float 5.0 yes ROE_TTM Return on Equity (ROE), based on trailing 12-month earnings float 25.43294 yes SIZE_LABEL Size Label (LARGE / MID / SMALL) based on InvestSuite's size category methodology str LARGE yes STABILITY_STARS Number of stability stars according to the InvestSuite X-Ray calculations float 5.0 yes VALUE_GROWTH_LABEL Value Growth Label (VALUE / GROWTH) based on InvestSuite's size category methodology str GROWTH yes VALUE_STARS Number of value stars according to the InvestSuite X-Ray calculations float 4.0 yes","title":"Get ID cards for an entire universe"},{"location":"value-added-apis/inspiration/","text":"Service Description \u00b6 The Inspiration API provides groupings of instruments by automated curation without the manual work of your analyst/content team. For instance, it maintains stocks with top-scores on valuation, growth, and financial health, or analyst favourites and dividend stars. The Inspiration instrument groupings rely on InvestSuite's XRay analyses implemented by our Quant Team. To retrieve Inspiration and up-to-date instruments within them perform a GET request against the /inspiration/ endpoint. A GET request against the /inspiration/definition/ endpoint will return the metadata (identifier, description, name, query definition) available to the tenant. Inspiration API Redoc Documentation Inspiration API Swagger UI Interface Inspiration GET \u00b6 GET Inspirations for a tenant with updated instruments matching the provided Inspiration Definition at endpoint /inspiration/ . Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/?id={inspiration_identifier_1}\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" ```HTTP GET /inspiration/?id={inspiration_identifier_1} HTTP/1.1 Host: api.data.uat.investsuite.com X-TENANT-ID: $TENANT_ID X-Api-Key: $IVS_API_SECRET accept: application/json Content-Type: application/json ```` Query Parameter Field Description Data type Example Required id One or multiple id parameter queries can be passed with optional to filter on Inspirations of interest. id is optional and by default gets all available Inspirations. To obtain available identifiers in the Inspiration Definitions via a GET request the /inspiration/definition/ endpoint (cf. below). string top_financial_health No, if not given return all Inspirations After the request, we get the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme)\"\". \" cus t om \": \" bool : Cus t om t o tenant or whi tela bel ( false | true ) \"\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, \"instruments\" : [ { \"isin\" : \"ISIN identifier of instrument, e.g. ISIN1234.\" , \"name\" : \"Full extended company name, e.g., XYZ Corporation.\" } ... ] }, ... ] Inspiration Definitions GET \u00b6 GET the Inspiration Definition metadata without the instruments at the /inspiration/definition/ endpoint. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/definition/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /inspiration/definition/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json After the request, we receive the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme).\" , \"custom\" : \"bool: Custom to tenant or whitelabel (false|true)\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, }, ... ]","title":"Inspiration API"},{"location":"value-added-apis/inspiration/#service-description","text":"The Inspiration API provides groupings of instruments by automated curation without the manual work of your analyst/content team. For instance, it maintains stocks with top-scores on valuation, growth, and financial health, or analyst favourites and dividend stars. The Inspiration instrument groupings rely on InvestSuite's XRay analyses implemented by our Quant Team. To retrieve Inspiration and up-to-date instruments within them perform a GET request against the /inspiration/ endpoint. A GET request against the /inspiration/definition/ endpoint will return the metadata (identifier, description, name, query definition) available to the tenant. Inspiration API Redoc Documentation Inspiration API Swagger UI Interface","title":"Service Description"},{"location":"value-added-apis/inspiration/#inspiration-get","text":"GET Inspirations for a tenant with updated instruments matching the provided Inspiration Definition at endpoint /inspiration/ . Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/?id={inspiration_identifier_1}\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" ```HTTP GET /inspiration/?id={inspiration_identifier_1} HTTP/1.1 Host: api.data.uat.investsuite.com X-TENANT-ID: $TENANT_ID X-Api-Key: $IVS_API_SECRET accept: application/json Content-Type: application/json ```` Query Parameter Field Description Data type Example Required id One or multiple id parameter queries can be passed with optional to filter on Inspirations of interest. id is optional and by default gets all available Inspirations. To obtain available identifiers in the Inspiration Definitions via a GET request the /inspiration/definition/ endpoint (cf. below). string top_financial_health No, if not given return all Inspirations After the request, we get the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme)\"\". \" cus t om \": \" bool : Cus t om t o tenant or whi tela bel ( false | true ) \"\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, \"instruments\" : [ { \"isin\" : \"ISIN identifier of instrument, e.g. ISIN1234.\" , \"name\" : \"Full extended company name, e.g., XYZ Corporation.\" } ... ] }, ... ]","title":"Inspiration GET"},{"location":"value-added-apis/inspiration/#inspiration-definitions-get","text":"GET the Inspiration Definition metadata without the instruments at the /inspiration/definition/ endpoint. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/inspiration/definition/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /inspiration/definition/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json After the request, we receive the following example response: Response (Body Content JSON) [{ \"name\" : \"str: The formatted full name of your inspiration, e.g. Top Financial Health\" , \"id\" : \"str: The short identifier name, use underscore seperor, e.g. top_financial_health\" , \"description\" : \"str: Description of the inspiration, e.g. Financially healthy companies.\" , \"type\" : \"str: InvestSuite Thematic-datatype field (inspiration|theme|metatheme).\" , \"custom\" : \"bool: Custom to tenant or whitelabel (false|true)\" , \"query\" : { \"xray\" : \"$FINANCIAL_HEALTH_STARS >= 0\" }, }, ... ]","title":"Inspiration Definitions GET"},{"location":"value-added-apis/introduction/","text":"This section handles topics that are specific to the Value Added APIs.","title":"Introduction"},{"location":"value-added-apis/logos/","text":"Service Description \u00b6 Get a company logo image by an instrument identifier (ISIN). Logos API Documentation Logos API Swagger UI Interface Our logo database is automatically collected with human-in-the-loop verification and periodic updates to catch out-of-date assets. Logo GET \u00b6 Request a logo for an ISIN as .png image of a certain size with 1:1 square aspect ratio. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/logo/?isin=US30303M1027&use_only_cache=true&size=128\" \\ -H \"accept: */*\" \\ -H \"Content-Type: image/png\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /logo/?isin=US30303M1027&use_only_cache=true&size=128 HTTP / 1.1 Host : api.data.uat.investsuite.com accept : */* Content-Type : image/png X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required isin The ISIN identifier of the company. str US30303M1027 Yes use_only_cache Set to false , to bypass the cache. Cached requests are recommended. bool: {true|false} true No, default true size Size in pixels from 0 up to 1000. All returned images have square aspect ratio 1:1. int No, default to original asset size. After the request, we get the following example response: Response (Body Image) The image binary in image/png format.","title":"Logos API"},{"location":"value-added-apis/logos/#service-description","text":"Get a company logo image by an instrument identifier (ISIN). Logos API Documentation Logos API Swagger UI Interface Our logo database is automatically collected with human-in-the-loop verification and periodic updates to catch out-of-date assets.","title":"Service Description"},{"location":"value-added-apis/logos/#logo-get","text":"Request a logo for an ISIN as .png image of a certain size with 1:1 square aspect ratio. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/logo/?isin=US30303M1027&use_only_cache=true&size=128\" \\ -H \"accept: */*\" \\ -H \"Content-Type: image/png\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /logo/?isin=US30303M1027&use_only_cache=true&size=128 HTTP / 1.1 Host : api.data.uat.investsuite.com accept : */* Content-Type : image/png X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required isin The ISIN identifier of the company. str US30303M1027 Yes use_only_cache Set to false , to bypass the cache. Cached requests are recommended. bool: {true|false} true No, default true size Size in pixels from 0 up to 1000. All returned images have square aspect ratio 1:1. int No, default to original asset size. After the request, we get the following example response: Response (Body Image) The image binary in image/png format.","title":"Logo GET"},{"location":"value-added-apis/monte_carlo/","text":"Service Description \u00b6 This API endpoint can be used to simulate a range of possible future returns for a portfolio, based on confidence intervals. This can be based on the historical returns of the asset classed the portfolio is exposed to, or a set of expected returns over the short and long term. When using expected returns, the short and long term estimates for the returns and volatilities of the asset classes (which InvestSuite obtains from a variety of sources) are used to calculate the simulations. A linear smoothing is applied to change the distributions over time. InvestSuite updates these expectations in a timely fashion. The Financial Data API endpoint for the Monte Carlo simulations is accessed through the following endpoint: Future Performance Below, we elaborate further on how to use this endpoints in practice. Future Data POST \u00b6 The endpoint has a range of predefined fields to query data for. Let us look at an example. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/performance/future/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"asset_classes\": { \"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2] }, \"start_date\": \"2022-01-31\", \"end_date\": \"2022-12-31\", \"currency\": \"EUR\", \"start_amount\": 1000, \"recurring_deposit_amount\": 50, \"recurring_deposit_frequency\": \"M\", \"sample_frequency\": \"M\", \"quantiles\": [0.05, 0.5, 0.95], \"use_expected_returns\": false }' POST /performance/future/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json { \"asset_classes\" : { \"EQUITY\" : [ 0.8 , 1 ], \"FIXED_INCOME\" : [ 0 , 0.2 ] }, \"start_date\" : \"2022-01-31\" , \"end_date\" : \"2022-12-31\" , \"currency\" : \"EUR\" , \"start_amount\" : 1000 , \"recurring_deposit_amount\" : 50 , \"recurring_deposit_frequency\" : \"M\" , \"sample_frequency\" : \"M\" , \"quantiles\" : [ 0.05 , 0.5 , 0.95 ], \"use_expected_returns\" : false } Field Description Data type Example Required asset_classes A dictionary mapping asset classes to portfolio upper and lower weights. dict {\"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2]} yes start_date Start date of the scenarios. date \"2022-01-31\" yes end_date End date of the scenarios. date \"2022-12-31\" yes currency The currency of the portfolio in ISO format. str \"USD\" no start_amount Start amount of the portfolio (in base currency) - i.e. amount put in at start_date. float 1000 no recurring_deposit_amount Amount assumed to be added/subtracted at the provided frequency. float 100 no recurring_deposit_frequency Frequency of the deposit amount. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no sample_frequency Frequency for which the scenarios should be generated. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no quantiles The quantiles to calculate and return (expressed in decimal form). list [0.05, 0.5, 0.95] no use_expected_returns Whether the simulations need to are based on projected returns, not historical ones. bool false no asset_class_mapping Instruments to use for the historical asset class returns. dict {\"EQUITY\": \"US0378331005\", \"FIXED_INCOME\": \"IE00B4L5Y983\"} no asset_class_st_mean_and_stdev Mean and standard deviation for the short term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.25, \"stdev\": 0.35}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no asset_class_lt_mean_and_stdev Mean and standard deviation for the long term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.15, \"stdev\": 0.25}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no short_to_long_term_transition_cut_off Cut-off between the short and long term distributions, in years. int 5 no The long term and short term distribution parameters can be provided by mapping asset classes to the following structure. Field Description Data type Example Required mean The mean of the distribution. float 0.15 yes stdev The standard deviation of the distribution. float 0.25 yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"value\" : { \"0.05\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1035.8986317433569 , ... \"2022-11-30\" : 1402.444917327639 , \"2022-12-31\" : 1450.056624826056 }, \"0.5\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1109.6624596515082 , ... \"2022-11-30\" : 1682.6038711807148 , \"2022-12-31\" : 1749.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1188.9452142854648 , ... \"2022-11-30\" : 2032.411301502351 , \"2022-12-31\" : 2127.5945389625517 } }, \"deposits\" : { \"deposits\" : { \"2022-01-31\" : 50.0 , \"2022-02-28\" : 100.0 , ... \"2022-11-30\" : 550.0 , \"2022-12-31\" : 600.0 } }, \"return\" : { \"0.05\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 935.8986317433569 , ... \"2022-11-30\" : 852.4449173276389 , \"2022-12-31\" : 850.0566248260559 }, \"0.5\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1009.6624596515082 , ... \"2022-11-30\" : 1132.6038711807148 , \"2022-12-31\" : 1149.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1088.9452142854648 , ... \"2022-11-30\" : 1482.411301502351 , \"2022-12-31\" : 1527.5945389625517 } } }, \"meta\" : null } Field Description Data type Example Required data Holds all the Monte Carlo simulation data. object yes value The simulated future value of the portfolio of the requested quantiles. dict yes deposits The cumulative deposits over time. dict yes return The simulated future value of the portfolio of the requested quantiles, minus the deposits. dict yes","title":"Monte Carlo API"},{"location":"value-added-apis/monte_carlo/#service-description","text":"This API endpoint can be used to simulate a range of possible future returns for a portfolio, based on confidence intervals. This can be based on the historical returns of the asset classed the portfolio is exposed to, or a set of expected returns over the short and long term. When using expected returns, the short and long term estimates for the returns and volatilities of the asset classes (which InvestSuite obtains from a variety of sources) are used to calculate the simulations. A linear smoothing is applied to change the distributions over time. InvestSuite updates these expectations in a timely fashion. The Financial Data API endpoint for the Monte Carlo simulations is accessed through the following endpoint: Future Performance Below, we elaborate further on how to use this endpoints in practice.","title":"Service Description"},{"location":"value-added-apis/monte_carlo/#future-data-post","text":"The endpoint has a range of predefined fields to query data for. Let us look at an example. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/performance/future/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"asset_classes\": { \"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2] }, \"start_date\": \"2022-01-31\", \"end_date\": \"2022-12-31\", \"currency\": \"EUR\", \"start_amount\": 1000, \"recurring_deposit_amount\": 50, \"recurring_deposit_frequency\": \"M\", \"sample_frequency\": \"M\", \"quantiles\": [0.05, 0.5, 0.95], \"use_expected_returns\": false }' POST /performance/future/ HTTP / 1.1 Host : api.data.uat.investsuite.com X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET accept : application/json Content-Type : application/json { \"asset_classes\" : { \"EQUITY\" : [ 0.8 , 1 ], \"FIXED_INCOME\" : [ 0 , 0.2 ] }, \"start_date\" : \"2022-01-31\" , \"end_date\" : \"2022-12-31\" , \"currency\" : \"EUR\" , \"start_amount\" : 1000 , \"recurring_deposit_amount\" : 50 , \"recurring_deposit_frequency\" : \"M\" , \"sample_frequency\" : \"M\" , \"quantiles\" : [ 0.05 , 0.5 , 0.95 ], \"use_expected_returns\" : false } Field Description Data type Example Required asset_classes A dictionary mapping asset classes to portfolio upper and lower weights. dict {\"EQUITY\": [0.8, 1], \"FIXED_INCOME\": [0, 0.2]} yes start_date Start date of the scenarios. date \"2022-01-31\" yes end_date End date of the scenarios. date \"2022-12-31\" yes currency The currency of the portfolio in ISO format. str \"USD\" no start_amount Start amount of the portfolio (in base currency) - i.e. amount put in at start_date. float 1000 no recurring_deposit_amount Amount assumed to be added/subtracted at the provided frequency. float 100 no recurring_deposit_frequency Frequency of the deposit amount. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no sample_frequency Frequency for which the scenarios should be generated. Options are \"D\", \"W\", \"M\" or \"Y\". str \"M\" no quantiles The quantiles to calculate and return (expressed in decimal form). list [0.05, 0.5, 0.95] no use_expected_returns Whether the simulations need to are based on projected returns, not historical ones. bool false no asset_class_mapping Instruments to use for the historical asset class returns. dict {\"EQUITY\": \"US0378331005\", \"FIXED_INCOME\": \"IE00B4L5Y983\"} no asset_class_st_mean_and_stdev Mean and standard deviation for the short term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.25, \"stdev\": 0.35}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no asset_class_lt_mean_and_stdev Mean and standard deviation for the long term projected asset class returns. dict {\"EQUITY\": {\"mean\": 0.15, \"stdev\": 0.25}, \"FIXED_INCOME\": {\"mean\": 0.005, \"stdev\": 0.04}} no short_to_long_term_transition_cut_off Cut-off between the short and long term distributions, in years. int 5 no The long term and short term distribution parameters can be provided by mapping asset classes to the following structure. Field Description Data type Example Required mean The mean of the distribution. float 0.15 yes stdev The standard deviation of the distribution. float 0.25 yes After uploading data, we get a response back: Response (Body Content JSON) { \"data\" : { \"value\" : { \"0.05\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1035.8986317433569 , ... \"2022-11-30\" : 1402.444917327639 , \"2022-12-31\" : 1450.056624826056 }, \"0.5\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1109.6624596515082 , ... \"2022-11-30\" : 1682.6038711807148 , \"2022-12-31\" : 1749.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1050.0 , \"2022-02-28\" : 1188.9452142854648 , ... \"2022-11-30\" : 2032.411301502351 , \"2022-12-31\" : 2127.5945389625517 } }, \"deposits\" : { \"deposits\" : { \"2022-01-31\" : 50.0 , \"2022-02-28\" : 100.0 , ... \"2022-11-30\" : 550.0 , \"2022-12-31\" : 600.0 } }, \"return\" : { \"0.05\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 935.8986317433569 , ... \"2022-11-30\" : 852.4449173276389 , \"2022-12-31\" : 850.0566248260559 }, \"0.5\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1009.6624596515082 , ... \"2022-11-30\" : 1132.6038711807148 , \"2022-12-31\" : 1149.7551854182339 }, \"0.95\" : { \"2022-01-31\" : 1000.0 , \"2022-02-28\" : 1088.9452142854648 , ... \"2022-11-30\" : 1482.411301502351 , \"2022-12-31\" : 1527.5945389625517 } } }, \"meta\" : null } Field Description Data type Example Required data Holds all the Monte Carlo simulation data. object yes value The simulated future value of the portfolio of the requested quantiles. dict yes deposits The cumulative deposits over time. dict yes return The simulated future value of the portfolio of the requested quantiles, minus the deposits. dict yes","title":"Future Data POST"},{"location":"value-added-apis/reference/","text":"Service Description \u00b6 Query reference data fields for financial instruments such as ISIN, asset class, market cap, etc. User-defined data with custom fields can be uploaded with the Custom Reference Data endpoint . Reference Data Model Docs Reference Data UI Interface Reference Query POST \u00b6 Use this POST endpoint to query reference data fields for a list of instruments. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/reference/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [ \"US0378331005\", \"US2546871060\" ], \"fields\": [ \"ASSET_CLASS\", \"CURRENCY\" ], \"fields_extra\": [] }' POST /data/reference/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json instrument_ids Request body JSON data List of instrument identifiers for which to request data fields. list[str] cf. above Yes fields Request body JSON data List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values per instrument_id: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null } Reference Universe GET \u00b6 Use this GET endpoint to get reference data fields for the instruments in the tenant's universe. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/data/reference/universe/?fields=ASSET_CLASS&fields=CURRENCY\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /data/reference/universe/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request Header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json universe_name Request query parameter The named universe for which to return that universe instruments' reference data. Tenants have universes for different use-cases, cf. Tenant Configuration str ROBO No, default returns union set of instruments of all universes of the tenant. fields Request query parameter List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values for all instruments in the tenant universe: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, ... \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null } Custom Reference POST \u00b6 See Custom Reference Data endpoint FAQ \u00b6 Where do I find the return type of a field? TODO: Assign ReferenceData model to response output so I can link redoc model docs here.","title":"Reference API"},{"location":"value-added-apis/reference/#service-description","text":"Query reference data fields for financial instruments such as ISIN, asset class, market cap, etc. User-defined data with custom fields can be uploaded with the Custom Reference Data endpoint . Reference Data Model Docs Reference Data UI Interface","title":"Service Description"},{"location":"value-added-apis/reference/#reference-query-post","text":"Use this POST endpoint to query reference data fields for a list of instruments. Curl Request HTTP Request curl -X \"POST\" \\ \"https://api.data.uat.investsuite.com/data/reference/query/\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ -d '{ \"instrument_ids\": [ \"US0378331005\", \"US2546871060\" ], \"fields\": [ \"ASSET_CLASS\", \"CURRENCY\" ], \"fields_extra\": [] }' POST /data/reference/query/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json instrument_ids Request body JSON data List of instrument identifiers for which to request data fields. list[str] cf. above Yes fields Request body JSON data List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values per instrument_id: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null }","title":"Reference Query POST"},{"location":"value-added-apis/reference/#reference-universe-get","text":"Use this GET endpoint to get reference data fields for the instruments in the tenant's universe. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/data/reference/universe/?fields=ASSET_CLASS&fields=CURRENCY\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /data/reference/universe/ HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Type Description Data type Example Required accept Request Header parameter application/json returns the reference results as a json object. application/octet-stream as a binary Python pandas dataframe. str Yes, default application/json universe_name Request query parameter The named universe for which to return that universe instruments' reference data. Tenants have universes for different use-cases, cf. Tenant Configuration str ROBO No, default returns union set of instruments of all universes of the tenant. fields Request query parameter List of instrument identifiers for which to request data fields. Available data fields can be seen in the drop-down at API documentation of this endpoint list[str] cf. above Yes fields_extra Request body JSON data List of instrument field keys which are custom / user-defined and uploaded in the custom endpoint. list[str] cf. above Yes After the request, we get the following example response with the data field values for all instruments in the tenant universe: Response (Body Content JSON) { \"data\" :{ \"US0378331005\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" }, ... \"US2546871060\" :{ \"asset_class\" : \"EQUITY\" , \"currency\" : \"USD\" } }, \"meta\" : null }","title":"Reference Universe GET"},{"location":"value-added-apis/reference/#custom-reference-post","text":"See Custom Reference Data endpoint","title":"Custom Reference POST"},{"location":"value-added-apis/reference/#faq","text":"Where do I find the return type of a field? TODO: Assign ReferenceData model to response output so I can link redoc model docs here.","title":"FAQ"},{"location":"value-added-apis/template/","text":"Service Description \u00b6 Describe the service here in natural language and provide documentation and UI link: Themes API Documentation Themes API Swagger UI Interface GET example \u00b6 Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/ $ENDPOINT_NAME /? $EXAMPLE_QUERY_PARAMS \" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /$ENDPOINT_NAME/?$EXAMPLE_QUERY_PARAMS HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required {example-query-params} Description. data type: possible|values Example Yes/No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ... # trun ca te lo n g respo nses o f t he same values f or readabili t y { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ] Exceptions \u00b6","title":"Endpoint Name Title"},{"location":"value-added-apis/template/#service-description","text":"Describe the service here in natural language and provide documentation and UI link: Themes API Documentation Themes API Swagger UI Interface","title":"Service Description"},{"location":"value-added-apis/template/#get-example","text":"Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/ $ENDPOINT_NAME /? $EXAMPLE_QUERY_PARAMS \" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" \\ GET /$ENDPOINT_NAME/?$EXAMPLE_QUERY_PARAMS HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Field Description Data type Example Required {example-query-params} Description. data type: possible|values Example Yes/No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ... # trun ca te lo n g respo nses o f t he same values f or readabili t y { \"example-field\" : \"example_data\" }, { \"example-field\" : \"example_data\" }, ]","title":"GET example"},{"location":"value-added-apis/template/#exceptions","text":"","title":"Exceptions"},{"location":"value-added-apis/tenant_config/","text":"The tenant configuration files are not user-editable. This page is for internal documentation purposes. Tenant Configuration Usage \u00b6 The {tenant_identifier}.json files located in /tenant_config configure the following functionality: Universes under property \"UNIVERSES\" : Named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources with associated functionality. Allowed providers list under \"ALLOWED_PROVIDERS\" : Permissions the allowed data providers for the tenant. Classification mapping under \"CLASSIFICATION_MAPPING\" : Points to a mapping file per data provider from predefined categories -> instrument/data field identifiers. Data Model \u00b6 A subsection per request type and subpath in the endpoint. Example tenant_config.json { \"UNIVERSES\" : [ { \"NAME\" : \"EXAMPLE_UNIVERSE_1\" , \"DATA_SOURCES\" : { \"MORNINGSTAR\" : [ \"REFERENCE\" , \"COMPOSITION\" ], \"DATASTREAM\" : [ \"REFERENCE\" , \"TIMESERIES\" , \"FUNDAMENTAL\" ] }, \"INSTRUMENTS\" : [ \"INSTRUMENT_ID_1\" \"INSTRUMENT_ID_2\" ], \"INDICES\" : [ \"INDEX_ID_1\" , \"INDEX_ID_2\" ] } ], \"ALLOWED_PROVIDERS\" : [ \"MORNINGSTAR\" , \"DATASTREAM\" ], \"CLASSIFICATION_MAPPING\" : \"demo.com\" } Field Description Data type Example Required \"UNIVERSES\" A list of universe definition objects. Defines named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources for associated DataTypes. list[object] cf. above Yes \u251c \"NAME\" The name of the universe. Can be used in endpoints under the universe_name optional query parameter, by default this is not passed and these endpoints return the set of all instrument universes after lookup. str EXAMPLE_UNIVERSE_1 Yes \u251c \"DATA_SOURCES\" Configures the allowed data provider source by name key and a list of datatypes. \u2022 Available data sources: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] . \u2022 Available DataTypes: [\"REFERENCE\", \"TIMESERIES\", \"ESG\", \"ESG_TIMESERIES\", \"COMPOSITION\", \"COMPOSITION_TIMESERIES\", \"FUNDAMENTAL\"] object[str, list[DataType]] {\"MORNINGSTAR\": [\"REFERENCE\", \"COMPOSITION\"], \"DATASTREAM\": [\"REFERENCE\", \"TIMESERIES\", \"FUNDAMENTAL\"]} No, can be empty {} \u251c \"INSTRUMENTS\" A list of instrument identifiers. list[str] [\"INSTRUMENT_ID_1\", \"INSTRUMENT_ID_2\"] No \u2514 \"INDICES\" A list of indices/composition-of-instruments identifiers. str [\"INDEX_ID_1\", \"INDEX_ID_2\"] No \"ALLOWED_PROVIDERS\" A list of allowed data provider names. Permissions the allowed data providers for the tenant. \u2022 Available providers: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] list[str] cf. above Yes \"CLASSIFICATION_MAPPING\" Points to the filename of a json map in the /classification_mapping/ folder. This configures the mappings per data provider of from predefined categories -> instrument/data field identifiers (e.g., [\"REBRP-EquityRegionEuropeexeuro\", \"REBRP-EquityRegionEurozone\", \"REBRP-EquityRegionUnitedKingdomLongRescaled\"] are data field lookup keys for the EUROPE_DEVELOPED subcategory for EQUITY_REGION category for MORNINGSTAR data provider). list[str] cf. above Yes","title":"Tenant Configuration"},{"location":"value-added-apis/tenant_config/#tenant-configuration-usage","text":"The {tenant_identifier}.json files located in /tenant_config configure the following functionality: Universes under property \"UNIVERSES\" : Named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources with associated functionality. Allowed providers list under \"ALLOWED_PROVIDERS\" : Permissions the allowed data providers for the tenant. Classification mapping under \"CLASSIFICATION_MAPPING\" : Points to a mapping file per data provider from predefined categories -> instrument/data field identifiers.","title":"Tenant Configuration Usage"},{"location":"value-added-apis/tenant_config/#data-model","text":"A subsection per request type and subpath in the endpoint. Example tenant_config.json { \"UNIVERSES\" : [ { \"NAME\" : \"EXAMPLE_UNIVERSE_1\" , \"DATA_SOURCES\" : { \"MORNINGSTAR\" : [ \"REFERENCE\" , \"COMPOSITION\" ], \"DATASTREAM\" : [ \"REFERENCE\" , \"TIMESERIES\" , \"FUNDAMENTAL\" ] }, \"INSTRUMENTS\" : [ \"INSTRUMENT_ID_1\" \"INSTRUMENT_ID_2\" ], \"INDICES\" : [ \"INDEX_ID_1\" , \"INDEX_ID_2\" ] } ], \"ALLOWED_PROVIDERS\" : [ \"MORNINGSTAR\" , \"DATASTREAM\" ], \"CLASSIFICATION_MAPPING\" : \"demo.com\" } Field Description Data type Example Required \"UNIVERSES\" A list of universe definition objects. Defines named instrument universes which are collections of instruments/indices that belong to a tenant-usecase. Each universe contains the allowed data sources for associated DataTypes. list[object] cf. above Yes \u251c \"NAME\" The name of the universe. Can be used in endpoints under the universe_name optional query parameter, by default this is not passed and these endpoints return the set of all instrument universes after lookup. str EXAMPLE_UNIVERSE_1 Yes \u251c \"DATA_SOURCES\" Configures the allowed data provider source by name key and a list of datatypes. \u2022 Available data sources: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] . \u2022 Available DataTypes: [\"REFERENCE\", \"TIMESERIES\", \"ESG\", \"ESG_TIMESERIES\", \"COMPOSITION\", \"COMPOSITION_TIMESERIES\", \"FUNDAMENTAL\"] object[str, list[DataType]] {\"MORNINGSTAR\": [\"REFERENCE\", \"COMPOSITION\"], \"DATASTREAM\": [\"REFERENCE\", \"TIMESERIES\", \"FUNDAMENTAL\"]} No, can be empty {} \u251c \"INSTRUMENTS\" A list of instrument identifiers. list[str] [\"INSTRUMENT_ID_1\", \"INSTRUMENT_ID_2\"] No \u2514 \"INDICES\" A list of indices/composition-of-instruments identifiers. str [\"INDEX_ID_1\", \"INDEX_ID_2\"] No \"ALLOWED_PROVIDERS\" A list of allowed data provider names. Permissions the allowed data providers for the tenant. \u2022 Available providers: [\"MORNINGSTAR\", \"MORNINGSTAR_ONDEMAND\", \"DATASTREAM\", \"CUSTOM\", \"RDP\", \"TRKD\", \"COINMARKETCAP\"] list[str] cf. above Yes \"CLASSIFICATION_MAPPING\" Points to the filename of a json map in the /classification_mapping/ folder. This configures the mappings per data provider of from predefined categories -> instrument/data field identifiers (e.g., [\"REBRP-EquityRegionEuropeexeuro\", \"REBRP-EquityRegionEurozone\", \"REBRP-EquityRegionUnitedKingdomLongRescaled\"] are data field lookup keys for the EUROPE_DEVELOPED subcategory for EQUITY_REGION category for MORNINGSTAR data provider). list[str] cf. above Yes","title":"Data Model"},{"location":"value-added-apis/themes/","text":"Service Description \u00b6 The InvestSuite quant team composes and actively manages a list of Themes or thematic instrument groups such as Healthcare, Clean & Green Economy, Social Trends each holding an applicable list of financial instruments. The aim of the Themes Value-Added-API service is to offer a means to filter the instrument universe to their personal preference and view. To retrieve Themes and selected instruments within them perform a GET request against the /themes/ endpoint: Themes API Redoc Documentation Themes API Swagger UI Interface Themes can be grouped into Metathemes. A Metatheme consists of multiple themes and will combine their instruments with its own. Themes GET \u00b6 Request Themes and Metathemes instruments and metadata by passing your tenant identifier. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/themes/?include_children=false\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /themes/?include_children=false HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Query Parameter Field Description Data type Example Required include_children By default Metathemes that consist of multiple child Themes will not include child instruments. Setting include_children to true will include the instruments of child Themes into the Metathemes data. boolean: true | false No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"name\" : \"theme1\" , \"description\" : \"Description of theme1.\" , \"type\" : \"theme\" , \"children\" : [], \"instruments\" : [ { \"isin\" : \"ISIN1234\" , \"name\" : \"CompanyXYZ Inc.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" }, ... { \"name\" : \"metatheme1\" , \"description\" : \"Description of metatheme2.\" , \"type\" : \"metatheme\" , \"children\" : [ \"theme1\" ], \"instruments\" : [ { \"isin\" : \"ISIN5678\" , \"name\" : \"Enterprise Corp.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" } ] InvestSuite Theme Screening Methodology \u00b6 The screening process consists of two-phases each of which is based on a automated process using human-in-the-loop artificial intelligence. Theme identification: Themes and Thematic Investments are manually identified based on social trends or based on popular investment products (Thematic ETFs). A description and criteria for screening are drafted. Instrument screening: We automatically check the main activities of the instrument companies and their descriptions. The automated screening is then followed by extensive manual screening by humans and serves as a guide. Currently, the majority of the screening work is done by humans with automated suggestions.","title":"Themes API"},{"location":"value-added-apis/themes/#service-description","text":"The InvestSuite quant team composes and actively manages a list of Themes or thematic instrument groups such as Healthcare, Clean & Green Economy, Social Trends each holding an applicable list of financial instruments. The aim of the Themes Value-Added-API service is to offer a means to filter the instrument universe to their personal preference and view. To retrieve Themes and selected instruments within them perform a GET request against the /themes/ endpoint: Themes API Redoc Documentation Themes API Swagger UI Interface Themes can be grouped into Metathemes. A Metatheme consists of multiple themes and will combine their instruments with its own.","title":"Service Description"},{"location":"value-added-apis/themes/#themes-get","text":"Request Themes and Metathemes instruments and metadata by passing your tenant identifier. Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/themes/?include_children=false\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" GET /themes/?include_children=false HTTP / 1.1 Host : api.data.uat.investsuite.com accept : application/json Content-Type : application/json X-TENANT-ID : $TENANT_ID X-Api-Key : $IVS_API_SECRET Query Parameter Field Description Data type Example Required include_children By default Metathemes that consist of multiple child Themes will not include child instruments. Setting include_children to true will include the instruments of child Themes into the Metathemes data. boolean: true | false No, default false After the request, we get the following example response: Response (Body Content JSON) [ { \"name\" : \"theme1\" , \"description\" : \"Description of theme1.\" , \"type\" : \"theme\" , \"children\" : [], \"instruments\" : [ { \"isin\" : \"ISIN1234\" , \"name\" : \"CompanyXYZ Inc.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" }, ... { \"name\" : \"metatheme1\" , \"description\" : \"Description of metatheme2.\" , \"type\" : \"metatheme\" , \"children\" : [ \"theme1\" ], \"instruments\" : [ { \"isin\" : \"ISIN5678\" , \"name\" : \"Enterprise Corp.\" }, ... ] \"date_modified\" : \"2022-04-06T14:34:32.425959\" } ]","title":"Themes GET"},{"location":"value-added-apis/themes/#investsuite-theme-screening-methodology","text":"The screening process consists of two-phases each of which is based on a automated process using human-in-the-loop artificial intelligence. Theme identification: Themes and Thematic Investments are manually identified based on social trends or based on popular investment products (Thematic ETFs). A description and criteria for screening are drafted. Instrument screening: We automatically check the main activities of the instrument companies and their descriptions. The automated screening is then followed by extensive manual screening by humans and serves as a guide. Currently, the majority of the screening work is done by humans with automated suggestions.","title":"InvestSuite Theme Screening Methodology"},{"location":"value-added-apis/xray/","text":"Service Description \u00b6 The X-Ray API provides a series of stock metrics. Our quantitative methodology scores stocks on 8 dimensions (Valuation, Growth, Momentum, Stability, Financial Health, Profitability, Size, Dividend Yield). To retrieve X-Ray perform a GET request against the /xray/universe/ endpoint. X-Ray API Redoc Documentation X-Ray API Swagger UI Interface X-Ray GET \u00b6 GET X-Rays for a tenant with at endpoint /xray/universe/ . Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/xray/universe/?fields={xray_fields}&normalization_universe={normalization_universe}&instrument_universe={instrument_universe}&group_split_type={group_split_type}&universe_name={universe_name}\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" ```HTTP GET /xray/universe/?fields={xray_fields}&normalization_universe={normalization_universe}&instrument_universe={instrument_universe}&group_split_type={group_split_type}&universe_name={universe_name} HTTP/1.1 Host: api.data.uat.investsuite.com X-TENANT-ID: $TENANT_ID X-Api-Key: $IVS_API_SECRET accept: application/json Content-Type: application/json ```` Query Parameter Field Description Data type Example Required fields One or multiple X-Ray factors to retrieve. string VALUE_STARS Yes normalization_universe The universe used to calculate ranked factors on. string GLOBAL No instrument_universe The universe for which factors are calculated (which can be a subset of the normalization universe). string GLOBAL No group_split_type How to group the universe for factors which depend on rankings within the universe. string REGION_SECTOR No universe_name The universe to retrieve the factors for. string DEFAULT Yes After the request, we get the following example response: Response (Body Content JSON) [{ \"data\" : { \"US88160R1014\" : { \"VALUE_STARS\" : 1 , \"GROWTH_STARS\" : 4 , ... }, \"US1912161007\" : { \"VALUE_STARS\" : 4 , \"GROWTH_STARS\" : 1 , ... }, ... } } ]","title":"X-Ray API"},{"location":"value-added-apis/xray/#service-description","text":"The X-Ray API provides a series of stock metrics. Our quantitative methodology scores stocks on 8 dimensions (Valuation, Growth, Momentum, Stability, Financial Health, Profitability, Size, Dividend Yield). To retrieve X-Ray perform a GET request against the /xray/universe/ endpoint. X-Ray API Redoc Documentation X-Ray API Swagger UI Interface","title":"Service Description"},{"location":"value-added-apis/xray/#x-ray-get","text":"GET X-Rays for a tenant with at endpoint /xray/universe/ . Curl Request HTTP Request curl -X \"GET\" \\ \"https://api.data.uat.investsuite.com/xray/universe/?fields={xray_fields}&normalization_universe={normalization_universe}&instrument_universe={instrument_universe}&group_split_type={group_split_type}&universe_name={universe_name}\" \\ -H \"accept: application/json\" \\ -H \"Content-Type: application/json\" \\ -H \"X-TENANT-ID: $TENANT_ID \" \\ -H \"X-Api-Key: $IVS_API_SECRET \" ```HTTP GET /xray/universe/?fields={xray_fields}&normalization_universe={normalization_universe}&instrument_universe={instrument_universe}&group_split_type={group_split_type}&universe_name={universe_name} HTTP/1.1 Host: api.data.uat.investsuite.com X-TENANT-ID: $TENANT_ID X-Api-Key: $IVS_API_SECRET accept: application/json Content-Type: application/json ```` Query Parameter Field Description Data type Example Required fields One or multiple X-Ray factors to retrieve. string VALUE_STARS Yes normalization_universe The universe used to calculate ranked factors on. string GLOBAL No instrument_universe The universe for which factors are calculated (which can be a subset of the normalization universe). string GLOBAL No group_split_type How to group the universe for factors which depend on rankings within the universe. string REGION_SECTOR No universe_name The universe to retrieve the factors for. string DEFAULT Yes After the request, we get the following example response: Response (Body Content JSON) [{ \"data\" : { \"US88160R1014\" : { \"VALUE_STARS\" : 1 , \"GROWTH_STARS\" : 4 , ... }, \"US1912161007\" : { \"VALUE_STARS\" : 4 , \"GROWTH_STARS\" : 1 , ... }, ... } } ]","title":"X-Ray GET"}]}